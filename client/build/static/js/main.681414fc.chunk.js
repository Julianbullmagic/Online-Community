(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(49),i=a(3),s=a.n(i),l=a(6),c=a(2),u=a(10),h=a(24),d=a(25),p=a(27),m=a(26),f=a(28),g=a(7),y=a(16),v=a.n(y),w=a(91),b=a(116),E=a.n(b),S=a(15),k=a.n(S),C=a(33),T="/api/chat";var j=function(e){return o.a.createElement("div",{style:{width:"95%",background:"#e0e8e6",margin:"1vw",padding:"10px",overflow:"auto"}},o.a.createElement("p",{style:{margin:"0.5vw"}},o.a.createElement("strong",null,e.sender.name,":")," ",e.message))},O=(a(375),function(){var e=Object(l.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("signin"),e.next=4,fetch("/auth/signin/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()),N=function(){var e=Object(l.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/signout/",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),x={isAuthenticated:function(){return"undefined"!=typeof window&&(!!sessionStorage.getItem("jwt")&&JSON.parse(sessionStorage.getItem("jwt")))},authenticate:function(e,t){console.log("auth"),"undefined"!==typeof window&&sessionStorage.setItem("jwt",JSON.stringify(e)),t()},clearJWT:function(e){"undefined"!==typeof window&&sessionStorage.removeItem("jwt"),e(),N().then(function(e){document.cookie="t=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"})}},A=a(88),I=a.n(A);function _(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var P=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleInputChange=function(e){a.setState({chatMessage:e.target.value})},a.submitChatMessage=function(e){if(e.preventDefault(),a.props.user.userData&&!a.props.user.userData.isAuth)return alert("Please Log in first");var t,n,o=a.state.chatMessage,r=x.isAuthenticated().user._id,i=x.isAuthenticated().user.name,s=a.props.groupId,l=a.state.grouptitle,c=E()(),u=a.state.room,h=_(a.state.users);try{for(h.s();!(n=h.n()).done;){var d=n.value;d.name==a.state.usertomessage&&(t=d)}}catch(p){h.e(p)}finally{h.f()}console.log(t?"Input Chat Message To User":"Input Chat Message"),a.socket.emit(t?"Input Chat Message To User":"Input Chat Message",{chatMessage:o,userId:r,userName:i,nowTime:c,type:"Text",recipient:t,room:u,groupId:s,groupTitle:l}),a.setState({chatMessage:""})},a.state={chatMessage:"",chats:[],users:e.users,grouptitle:e.grouptitle,user:{},currentgroupmessage:{},lastgroupmessage:{},chattingtouser:"",unreadwholegroupmessages:0,usertomessage:"",room:"",widthcolumntwo:"0%",widthcolumnthree:"60%",height:"0vh",togglechat:!1},a.handleuserchange=a.handleuserchange.bind(Object(g.a)(Object(g.a)(a))),a.setInitialChats=a.setInitialChats.bind(Object(g.a)(Object(g.a)(a))),console.log("PROPS",e),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.users!==this.props.users&&this.setState({users:e.users}),e.grouptitle!==this.props.grouptitle&&this.setState({grouptitle:e.grouptitle})}},{key:"componentDidMount",value:function(e){var t=this;this.props.dispatch(function(){var e=k.a.get("".concat(T,"/getChats")).then(function(e){return e.data});return{type:C.c,payload:e}}()),this.socket=v()(),console.log("node env","production"),this.setInitialChats(),this.socket.on("increase unread whole group count",function(e){t.state.chattingtouser&&t.setState({unreadwholegroupmessages:t.state.unreadwholegroupmessages+1})}),this.socket.on("Output Chat Message",function(e){"All Group Chat"!==t.state.usertomessage&&t.setState({unreadallgroupmessages:t.state.unreadallgroupmessages+1}),"All Group Chat"==t.state.usertomessage&&t.setState({unreadallgroupmessages:0}),console.log("OUTPUT CHAT MESSAGE messageFromBackEnd",e),I()({title:"New notifications in group ".concat(e.groupId),subtitle:"",message:e.message,theme:"darkblue",native:!0});var a=JSON.parse(JSON.stringify(t.state.chats));if(console.log(a),a.push(e[0]),console.log(a.length),console.log(a),a.length>50&&(a=a.slice(a.length-50,a.length-1),console.log(a)),t.setState({chats:a,currentgroupmessage:e[0]}),e[0].recipient&&t.state.user._id==e[0].recipient){var n=JSON.parse(JSON.stringify(t.state.user));n.recentprivatemessages.push(e[0]);var o,r=JSON.parse(JSON.stringify(t.state.users)),i=_(r);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.unreadmessages=0;var l,c=_(n.recentprivatemessages);try{for(c.s();!(l=c.n()).done;){l.value.sender==s._id&&(s.unreadmessages+=1)}}catch(u){c.e(u)}finally{c.f()}}}catch(u){i.e(u)}finally{i.f()}t.setState({users:r})}}),this.socket.on("Joined Room",function(e){console.log("Joined Room",e),t.setState({user:e});var a,n=JSON.parse(JSON.stringify(t.state.users)),o=_(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r.unreadmessages=0;var i,s=_(e.recentprivatemessages);try{for(s.s();!(i=s.n()).done;){i.value.sender==r._id&&(r.unreadmessages+=1)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){o.e(l)}finally{o.f()}console.log("USERS COPY",n),t.setState({users:n})}),this.socket.on("Output pm",function(e){if(console.log("mp",e),e.recipient==x.isAuthenticated().user._id){var a=JSON.parse(JSON.stringify(t.state.user));a.recentprivatemessages.push(e),console.log("usercopy",a.recentprivatemessages);var n,o=JSON.parse(JSON.stringify(t.state.users)),r=_(o);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.unreadmessages=0;var s,l=_(a.recentprivatemessages);try{for(l.s();!(s=l.n()).done;){var c=s.value;console.log(c),c.sender==i._id&&(i.unreadmessages+=1)}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}console.log("USERS COPY",o),t.setState({users:o,user:a})}})}},{key:"setInitialChats",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t,a,n,o,r,i,l,c,h,d=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.grouptitle,a=x.isAuthenticated().user.name,console.log("join group room",t),this.socket.emit("join group room",{room:t,userName:a}),e.next=6,fetch("/api/chat/getChats/"+this.props.groupId).then(function(e){return e.json()}).then(function(e){console.log("get chats",e),e.length>50&&(e=e.slice(e.length-50,e.length-1),console.log(e)),d.setState({chats:Object(u.a)(e)})});case 6:return e.next=8,fetch("/groups/getuser/"+x.isAuthenticated().user._id).then(function(e){return e.json()}).then(function(e){return e.data});case 8:n=e.sent,o=JSON.parse(JSON.stringify(this.state.users)),r=_(o);try{for(r.s();!(i=r.n()).done;){(l=i.value).unreadmessages=0,c=_(n.recentprivatemessages);try{for(c.s();!(h=c.n()).done;)h.value.sender==l._id&&(l.unreadmessages+=1)}catch(s){c.e(s)}finally{c.f()}}}catch(s){r.e(s)}finally{r.f()}this.setState({users:o,user:n});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleuserchange",value:function(){var e=Object(l.a)(s.a.mark(function e(t){var a,n,o,r,i,l,c,h,d,p,m,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("All Group Chat"!=t.target.value){e.next=9;break}this.setState({usertomessage:"",unreadwholegroupmessages:0}),this.setInitialChats(),a=this.props.groupId,n=x.isAuthenticated().user.name,this.socket.emit("join group room",{room:a,userName:n}),this.setState({chattingtouser:!1}),e.next=34;break;case 9:i=_(this.state.users);try{for(i.s();!(l=i.n()).done;)(c=l.value).name==t.target.value&&(o=c._id,r=c.name)}catch(s){i.e(s)}finally{i.f()}return h=(h=(h=[x.isAuthenticated().user.name,t.target.value]).sort()).join(),d=this.props.groupId,p=x.isAuthenticated().user._id,m=r,this.socket.emit("join room",{room:h,userName:m,userId:p,recipientId:o,groupId:d}),console.log("changing user"),""==this.state.usertomessage&&this.setState({lastgroupmessage:this.state.currentgroupmessage}),this.setState({usertomessage:t.target.value,room:h,chattingtouser:!0}),console.log(this.state.usertomessage),f=[],e.prev=23,console.log("recipientid",o),e.next=27,fetch("/api/chat/getChatsWithParticularUser/".concat(o,"/").concat(x.isAuthenticated().user._id)).then(function(e){return e.json()}).then(function(e){return Object(u.a)(e)});case 27:f=e.sent,e.next=33;break;case 30:e.prev=30,e.t0=e.catch(23),console.error(e.t0);case 33:this.setState({chats:f});case 34:case"end":return e.stop()}},e,this,[[23,30]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=o.a.createElement("p",null,"No conversation so far.");1==Array.isArray(this.state.chats)&&(t=this.state.chats.map(function(e){return o.a.createElement(j,Object.assign({key:e._id},e))}));var a=this.state.users.map(function(e){return e._id});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{height:this.state.height},className:"chat"},o.a.createElement("div",{className:"chatcoloumn1"},o.a.createElement("textarea",{style:{marginTop:"2vh",marginLeft:"2vw"},placeholder:"Let's start talking",align:"top",type:"text",value:this.state.chatMessage,onChange:this.handleInputChange}),a.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{style:{display:"inline",marginTop:"0.5vh"},className:"submitbutton",onClick:this.submitChatMessage},"Submit Message"),o.a.createElement("select",{style:{marginLeft:"1vw",marginTop:"0.5vh",display:"inline"},name:"room",id:"room",onChange:this.handleuserchange},o.a.createElement("option",{value:"All Group Chat"},"All Group Chat ",this.state.unreadwholegroupmessages," unread messages"),this.state.users&&this.state.users.map(function(e){return o.a.createElement("option",{key:e._id,value:e.name},e.name," ",e.unreadmessages," unread messages ")}))),o.a.createElement("div",{style:{border:"white",borderStyle:"solid",borderWidth:"5px",margin:"10px"},className:"chatcoloumn2"},o.a.createElement("div",{style:{width:"97%",height:"90%",background:"#efefef",margin:"10px",overflowY:"scroll"}},t,o.a.createElement("div",{ref:function(t){e.messagesEnd=t},style:{clear:"both"}})))),o.a.createElement("div",{className:"togglechatbutton chat",style:{bottom:this.state.height,borderColor:"#c7cecc",borderStyle:"solid",borderRightWidth:"0.5vw",borderleftWidth:"0.5vw",borderTopWidth:"0.5vw",width:"100vw",transition:"bottom 2s"}},o.a.createElement("button",{style:{transform:"translateY(-30%)",margin:"8px",borderRadius:"5px"},onClick:function(t){t.preventDefault(),e.setState({togglechat:!e.state.togglechat,height:e.state.togglechat?"0.5vh":"40vh"})}},"View Chat")))}}]),t}(n.Component),D=Object(w.b)(function(e){return{user:e.user,chats:e.chat}})(P),F=a(36),J=a(17),U=a(11);function M(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(15);var Y=a(23);function q(e){var t,a=o.a.useRef(""),r=o.a.useRef(""),i=Object(n.useState)(!1),h=Object(c.a)(i,2),d=h[0],p=h[1],m=Object(n.useState)(!1),f=Object(c.a)(m,2),g=f[0],y=f[1],v=Object(n.useState)([]),w=Object(c.a)(v,2),b=w[0],E=w[1],S=Object(n.useState)(!1),C=Object(c.a)(S,2),T=C[0],j=C[1],O=o.a.useRef(0),N=o.a.useRef(""),A=o.a.useRef(null),I=Object(n.useState)([]),_=Object(c.a)(I,2),R=_[0],P=_[1],D=Object(n.useState)(e.groups),F=Object(c.a)(D,2),U=F[0],W=F[1],q=Object(n.useState)([]),L=Object(c.a)(q,2),B=L[0],G=L[1],H=Object(n.useState)(e.user),z=Object(c.a)(H,2),V=(z[0],z[1],Object(n.useState)(!1)),K=Object(c.a)(V,2),X=(K[0],K[1],Object(n.useState)(0)),$=Object(c.a)(X,2);$[0],$[1];function Z(){return(Z=Object(l.a)(s.a.mark(function t(n){var o,i,l,c,u,h,d,m,f,g;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),b.length>0&&j(!0),0!=b.length){t.next=28;break}if(p(!0),o=(o=Y.Types.ObjectId()).toString(),i=[],!A.current.files[0]){t.next=13;break}return(l=new FormData).append("file",A.current.files[0]),l.append("upload_preset","jvm6p9qv"),t.next=13,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",l).then(function(e){i.push(e.data.public_id)}).catch(function(e){console.error(e)});case 13:return c=new Date,u=c.getTime(),h=x.isAuthenticated().user.cool?N.current.value:null,d={_id:o,title:a.current.value,groupabove:h,description:r.current.value,cool:x.isAuthenticated().user.cool,timecreated:u,images:i,level:Number(O.current.value),members:[],centroid:x.isAuthenticated().user.coordinates},e.updateGroups(d),m={method:"POST",body:JSON.stringify(d),headers:{"Content-type":"application/json; charset=UTF-8"}},f={method:"PUT",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}},t.next=22,fetch("groups/creategroup",m).then(function(e){return e.json()}).then(function(e){return e.data}).catch(function(e){console.error(e)});case 22:return g=t.sent,t.next=25,fetch("groups/addlowertohigher/"+g+"/"+N.current.value,f).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)});case 25:p(!1),y(!0),setTimeout(function(){y(!1)},5e3);case 28:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(n.useEffect)(function(){W(e.groups);var t=e.groups.filter(function(e){return 1==e.level}),a=e.groups.sort(function(e,t){return t.level-e.level});(a=a[0])&&(a=a.level),G(t)},[e]),Object(n.useEffect)(function(){fetch("/groups/finduser/"+x.isAuthenticated().user._id).then(function(e){return e.json()}).then(function(e){var t,a=JSON.parse(JSON.stringify(e.data)),n=[],o=M(a[0].groupstheybelongto);try{for(o.s();!(t=o.n()).done;){var r=t.value;n.push(r.level)}}catch(i){o.e(i)}finally{o.f()}console.log(a[0]),n=Object(u.a)(new Set(n)),console.log("levels",n),(n=n.sort(function(e,t){return e-t})).length>1&&n.pop(),P(n)}).catch(function(e){return console.error(e)})},[]),o.a.createElement("div",{className:"homepageform"},o.a.createElement("form",{onSubmit:function(e){return Z.apply(this,arguments)},onChange:function(){O.current.value;var e=[];!N.current.value&&x.isAuthenticated().user.cool&&e.push("You need to choose a parent group"),0==a.current.value.length&&e.push("You need a title"),r.current.value||e.push("You need a group description"),!O.current.value&&x.isAuthenticated().user.cool&&e.push("You need to choose a group level"),0==e.length&&j(!1),E(e)}},o.a.createElement("h3",null,"You can make a group for anything. It could be for a geographic area or a particular subject or topic."),o.a.createElement("div",{className:"titlediv"},o.a.createElement("label",{style:{display:"inline"},htmlFor:"name"},"Title"),o.a.createElement("input",{style:{display:"inline",width:"80vw"},type:"text",name:"titleValue",id:"titleValue",ref:a})),o.a.createElement("div",{className:"titlediv"},o.a.createElement("label",{style:{display:"inline"},htmlFor:"name"},"Description"),o.a.createElement("input",{style:{display:"inline",width:"76vw"},type:"text",name:"descriptionValue",id:"descriptionValue",ref:r})),x.isAuthenticated().user.cool&&o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("label",(t={style:{display:"inline"}},Object(J.a)(t,"style",{display:"inline"}),Object(J.a)(t,"htmlFor","name"),t),"Choose a Level"),o.a.createElement("select",{style:{display:"inline"},onChange:function(){var e=U.filter(function(e){return e.level==O.current.value+1});G(e)},ref:O},!R&&o.a.createElement("option",{value:"0"},"0"),R&&R.map(function(e){return o.a.createElement("option",{value:e},e)}))),x.isAuthenticated().user.cool&&o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("label",{htmlFor:"name"},"Choose a parent group"),o.a.createElement("select",{ref:N},o.a.createElement("option",{value:""}),B&&B.map(function(e){return o.a.createElement("option",{value:e._id},e.title)}))),o.a.createElement("div",{id:"file",style:{display:"inline"}},o.a.createElement("label",{style:{display:"inline"},htmlFor:"name"},"Image"),o.a.createElement("input",{style:{display:"inline",width:"30%"},type:"file",ref:A})),o.a.createElement("div",null,o.a.createElement("label",null,"You must choose a level before you can choose a parent group. You can only create a group at a level above zero if you have been elected to be a member of a higher level group.")),b&&T&&b.map(function(e){return o.a.createElement("p",{style:{color:"red"}},e)}),!g&&!d&&!T&&o.a.createElement("button",{style:{margin:"1vw"},type:"submit",value:"Submit"},"Submit"),d&&o.a.createElement("h3",null,"uploading....."),g&&o.a.createElement("h2",null,"Upload Complete")))}a(354);var L=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={groups:[],vidone:[],vidtwo:[],allgroups:[],mygroups:[],user:{},page:1,pageNum:[],viewform:!1,currentPageData:[]},a.viewAllGroups=a.viewAllGroups.bind(Object(g.a)(Object(g.a)(a))),a.updateGroups=a.updateGroups.bind(Object(g.a)(Object(g.a)(a))),a.searchGroups=a.searchGroups.bind(Object(g.a)(Object(g.a)(a))),a.handleSearchChange=a.handleSearchChange.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.viewAllGroups();var e=["https://www.youtube.com/embed/tTBWfkE7BXU","https://www.youtube.com/embed/34LGPIXvU5M","https://www.youtube.com/embed/8ZoI0C1mPek","https://www.youtube.com/embed/x-oRmcYR5cM","https://www.youtube.com/embed/emnYMfjYh1Q","https://www.youtube.com/embed/Hgwtd4X_qFM","https://www.youtube.com/embed/lu8lQKVcbOs","https://www.youtube.com/embed/_swnWW2NGBI","https://www.youtube.com/embed/7IIEB5JiyNs","https://www.youtube.com/embed/wCzS2FZoB-I","https://www.youtube.com/embed/uNkADHZStDE","https://www.youtube.com/embed/6s17IAj-XpU"].sort(function(){return.5-Math.random()}).slice(0,2);this.setState({vidone:e[0],vidtwo:e[1]})}},{key:"updateGroups",value:function(e){var t=JSON.parse(JSON.stringify(this.state.groups));t.reverse(),t.push(e),t.reverse(),this.setState({groups:t})}},{key:"searchGroups",value:function(e){var t=this;if(this.state.searchterm.length>0){var a=JSON.parse(JSON.stringify(this.state.allgroups));a=a.filter(function(e){return e.title.toLowerCase().includes(t.state.searchterm.toLowerCase())}),this.setState({groups:a})}0==this.state.searchterm.length&&this.setState({groups:this.state.allgroups})}},{key:"handleSearchChange",value:function(e){this.setState({searchterm:e.target.value})}},{key:"viewAllGroups",value:function(){var e=this;fetch("/groups/finduser/"+x.isAuthenticated().user._id).then(function(e){return e.json()}).then(function(t){e.setState({user:t.data[0]})}).catch(function(e){return console.error(e)}),fetch("/groups/findgroups/"+x.isAuthenticated().user.cool).then(function(e){return e.json()}).then(function(t){var a=JSON.parse(JSON.stringify(t.data));a.sort(function(){return Math.random()-.5}),e.setState({groups:a,allgroups:a})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this,t=o.a.createElement("h3",null,"no groups");this.state.groups&&(t=this.state.groups.map(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.b,{key:e._id,className:"gotogroup",exact:!0,to:"/group/"+e._id},o.a.createElement("div",{className:"groupdiv",key:e._id},o.a.createElement("div",null,e.title&&o.a.createElement("h3",{style:{display:"inline",margin:"0vw",padding:"0vw",overflowX:"hidden"}},"Title: ",e.title&&e.title,"  "),e.location&&o.a.createElement("h4",{style:{display:"inline",margin:"0vw",padding:"0vw",overflow:"hidden"}},"Location: ",e.location,"  "),o.a.createElement("h4",{style:{display:"inline",margin:"0vw",padding:"0vw"}},"Level: ",e.level)))))}));var a=[],n=!1;return this.state.user&&this.state.user.groupstheybelongto&&(0==this.state.user.groupstheybelongto.length&&(n=!0),a=this.state.user.groupstheybelongto.map(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",Object(J.a)({key:e._id,className:"groupdiv"},"key",e._id),o.a.createElement(U.b,{style:{margin:"0vw",padding:"0vw"},className:"gotogroup",exact:!0,to:"/group/"+e._id},o.a.createElement("div",{style:{margin:"0vw",padding:"0vw"}},e.title&&o.a.createElement("h3",{style:{display:"inline",margin:"0vw",padding:"0vw",overflowX:"hidden"}},"Title: ",e.title&&e.title),e.location&&o.a.createElement("h4",{style:{display:"inline",margin:"0vw",padding:"0vw",overflow:"hidden"}}," Location: ",e.location),o.a.createElement("h4",{style:{display:"inline",margin:"0vw",padding:"0vw"}}," Level: ",e.level)))))})),o.a.createElement("div",{className:"groupslist",style:{marginTop:"6vh"}},o.a.createElement("div",{style:{margin:"0vw"}},o.a.createElement("h1",{className:"groupstitle"},"Groups")),o.a.createElement("div",null,o.a.createElement("button",{style:{},onClick:function(t){return e.setState({viewform:!e.state.viewform})}},"View Create Group Form?")),o.a.createElement("div",{style:{marginTop:"1vw",marginBottom:"0.5vw",maxHeight:this.state.viewform?"100vw":"0",overflow:"hidden",transition:"max-height 2s"}},o.a.createElement(q,{updateGroups:this.updateGroups,groups:this.state.groups,user:this.state.user})),o.a.createElement("div",{className:"yourgroups"},o.a.createElement("div",{className:"groupdivtwo"},o.a.createElement("h2",{style:{marginLeft:"2.5vw",margin:"0.5vw"}},"Your Groups")),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n&&o.a.createElement("h4",{style:{marginLeft:"2.5vw",margin:"0.5vw"}},"You haven't joined any groups yet, click on the group link below. Join some groups, make suggestions and vote for rules. Post an introduction about yourself. You can only join a maximum of three bottom level groups. If you leave one group, your votes are still recorded but not counted. If you choose to rejoin, they will count again."),a)),o.a.createElement("section",{className:"groupsbox"},o.a.createElement("div",{className:"groupscol1"},o.a.createElement("div",{className:"groupdivtwo"},o.a.createElement("h2",{style:{marginLeft:"2.5vw",margin:"0.5vw",display:"inline"}},"All Groups"),o.a.createElement("input",{style:{width:"63vw",marginLeft:"2.5vw",margin:"0.5vw",display:"inline"},placeholder:"enter search term",onChange:function(t){return e.handleSearchChange(t)}}),o.a.createElement("button",{style:{marginLeft:"2.5vw",margin:"0.5vw",display:"inline"},onClick:function(t){return e.searchGroups(t)}},"Search All Groups")),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},t))),o.a.createElement("br",null),x.isAuthenticated().user.cool&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"vids"},o.a.createElement("iframe",{style:{margin:"0.5vw",width:"44vw",height:"44vh",display:"inline"},src:this.state.vidone,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{style:{margin:"0.5vw",width:"44vw",height:"44vh",display:"inline"},src:this.state.vidtwo,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}))))}}]),t}(n.Component),B=(a(356),["","In the last few decades wage growth has declined substantially, the cost of living increased enormously and unemployment rates have tripled. These problems have fairly straightforward solutions, we just need a political system that chooses the sorts of leaders who will pursue them. We are experimenting with a new system called Democracy-social-network",'"In theory it was perfect equality, and even in practice it was not far from it. There is a sense in which it would be true to say that one was experiencing a foretaste of Socialism, by which I mean that the prevailing mental atmosphere was that of Socialism. Many of the normal motives of civilized life \u2014 snobbishness, money-grubbing, fear of the boss, etc. \u2014 had simply ceased to exist. The ordinary class-division of society had disappeared to an extent that is almost unthinkable in the money-tainted air of England; there was no one there except the peasants and ourselves, and no one owned anyone else as his master." -George Orwell Homage to Catalonia',"Our current political system was designed at a time when the maximum speed that information could travel was as fast as horses could run. This restricted how democratic organisations could be. The most practical way to organise large, complex groups of people, back then was with a top down hierarchical system, with orders being passed down from the top and spreading out exponentially. You could have an election every few years to choose the upper level leaders, but that was about as much democracy as was practical. Most businesses and the administration of the public enterprises were usually organized in a top down way. Today, the internet and computers allow much more democratic forms of organisation that are much more responsive to the needs and wants of the population but also to expert knowledge.","Social Media is not very democratic. Just like capitalist businesses, social media groups usually have bosses. The admins or moderators are usually not elected by or accountable to the group. They can censor anyone and anything with few real consequences. People can be removed from groups with no judicial process or explanation of any kind. Group members are usually not at all involved in creating the rules and often these are not even made explicit. All of this contributes to feelings of social anxiety among users. We have designed a new and different social network in order to try to resolve some of these problems and create more real, human connections.","We have designed a new, democratic social network. All group admins are elected by the groups, members can propose and vote on their own rules, and polls. Each group has a jury tab in which members can vote on restrictions for rule breakers. Elected leaders can have their authority removed at any time by the group.","We've designed a democratic social network with the intention of making it easier for workers to form unions or co-operatives. Admins are elected by each group and members are much more involved in creating and enforcing the rules than in most social media applications.","Social Networks have been demonstrated by psychologists to be harmful to our mental health, Facebook has even admitted this in court. This is largely because facebook is undemocratic. The admins of groups are usually not elected by the members, they are unaccountable to the group. They can sensor anyone or anything with practically few consequences for themselves. They can remove people from groups with no explanation. Group members are not at all involved in creating the rules and often these are not even made explicit. This leads to strong feelings of insecurity and social anxiety among Facebook Users. In a hierarchical/undemocratic organization, people are less likely to give each other the benefit of the doubt. We are all human, we are all imperfect. If there are strong imbalances of power, people will try to emphasize and focus on each other's character flaws to provide an excuse for having a higher status in the group. It makes us less willing to admit mistakes and accept criticism. Power is always illegitimate, if we define 'power' as meaning the ability to impose our own will onto other people. The Democratic Social Network aims to resolve this problem and create a more human online social environment where we can be more honest with and accepting of each other.","The economic situation for the vast majority of Australians has grown substantially worse since the 1970s. The unemployment rate has almost tripled, it is much harder to find and maintain consistent employment. The cost of living is much more expensive, particularly housing. Wage growth has declined substantially. We need a new kind of political system that is more democratic, more responsive to the wants and needs of the population but also to expert advice. I have built a democratic social network in order to demonstrate how computers and the internet can potentially create a much more human political system that results in much smarter group decisions that more people are happy with. We need a system where the government cannot just blatantly ignore a consensus amongst climate scientists that we are facing a global ecological catastrophe or that most of the population agree that we should do our best to resolve this problem.","Worker Co-operatives are democratic businesses where the workers are also the shareholders. They own and run the business, electing their own managers and directors. They decide how to distribute the profit. This form of organization is superior to Capitalist enterprise. Co-operatives tend to have a longer lifespan, are less risky to start up, workers are better paid and report safer, happier, more friendly working conditions. The democratic social network may help people to establish worker co-ops.","In this day and age our technology has become so advanced that there is little need to work. Within the next few decades, there will be no need. Robots exist that can grow and cook all the food you need, solar panels that can produce all the energy you need, robots that can 3d print houses for very low cost. Why is it that we still work 9 to 5, five days a week, a habit that began more than a century ago? Democracy Social Network can answer this question and provide a potential solution to the problem.","Do you ever wish you could be your own boss? Would you rather work with people instead of for someone? The Democracy Social Network may have some solutions."]);function G(e){e.history;var t=Object(n.useState)(!1),r=Object(c.a)(t,2),i=(r[0],r[1]);function u(){return(u=Object(l.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/groups/getusers").then(function(e){return e.json()}).then(function(e){console.log("users",e),i(e)});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){!function(){u.apply(this,arguments)}(),fetch("/groups/addtopagecounter/home",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{height:"100vh",width:"100vw",overflow:"hidden",scroll:"none"}},!x.isAuthenticated()&&o.a.createElement("div",{style:{height:"100vh",width:"100vw",position:"relative",zIndex:2,overflow:"hidden"}},o.a.createElement("h5",{style:{marginLeft:"8vw",marginRight:"10vw",marginTop:"5vh"}},B[0]),o.a.createElement("img",{className:"homepageimg",src:a(357)})),x.isAuthenticated()&&o.a.createElement(o.a.Fragment,null,o.a.createElement(L,null)))}B.sort(function(){return Math.random()-.5}),B.sort(function(){return Math.random()-.5}),B.sort(function(){return Math.random()-.5});var H=a(9),z=a(181),V=a(404),K=a(401),X=a(410),$=a(408),Z=a(406),Q=a(407),ee=a(405),te=function(){var e=Object(l.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updating user",t),e.prev=1,e.next=4,fetch("/api/users/changepassword/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),ne=a(23),oe=Object(K.a)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300}}});function re(){var e=oe(),t=Object(n.useState)([0]),a=Object(c.a)(t,2),r=a[0],i=a[1],h=Object(n.useState)(!1),d=Object(c.a)(h,2),p=d[0],m=d[1],f=Object(n.useState)(!1),g=Object(c.a)(f,2),y=g[0],w=g[1],b=Object(n.useState)({name:"",password:"",passwordtwo:"",passworderror:!1,coordinates:"",politicalparties:"",sex:"female",passiveincome:!1,location:"",securityquestionone:"",securityquestiontwo:"",groupsCoordinates:"",address:"",email:"",phone:"",expertise:"",images:"",error:"",open:!1}),E=Object(c.a)(b,2),S=E[0],C=E[1],T=o.a.useRef(null),j=o.a.useRef(null),O=o.a.useRef(null),N=o.a.useRef(null),x=o.a.useRef(null);v()("http://localhost:5000");function A(){return(A=Object(l.a)(s.a.mark(function e(){var t,a,n,o,r,i,l,c,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.password!=S.passwordtwo&&C(Object(H.a)({},S,{passworderror:!0})),S.password!=S.passwordtwo){e.next=43;break}if(C(Object(H.a)({},S,{passworderror:!1})),m(!0),t=ne.Types.ObjectId(),a=[],!T.current.files[0]){e.next=12;break}return(n=new FormData).append("file",T.current.files[0]),n.append("upload_preset","jvm6p9qv"),e.next=12,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",n).then(function(e){a.push(e.data.public_id)});case 12:if(!j.current.files[0]){e.next=18;break}return(o=new FormData).append("file",j.current.files[0]),o.append("upload_preset","jvm6p9qv"),e.next=18,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",o).then(function(e){a.push(e.data.public_id)});case 18:if(!O.current.files[0]){e.next=24;break}return(r=new FormData).append("file",O.current.files[0]),r.append("upload_preset","jvm6p9qv"),e.next=24,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",r).then(function(e){a.push(e.data.public_id)});case 24:if(!N.current.files[0]){e.next=30;break}return(i=new FormData).append("file",N.current.files[0]),i.append("upload_preset","jvm6p9qv"),e.next=30,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",i).then(function(e){a.push(e.data.public_id)});case 30:if(!x.current.files[0]){e.next=36;break}return(l=new FormData).append("file",x.current.files[0]),l.append("upload_preset","jvm6p9qv"),e.next=36,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",l).then(function(e){a.push(e.data.public_id)});case 36:c=!0,(S.politicalparties.toLowerCase().includes("labour")||S.politicalparties.toLowerCase().includes("liberal")||S.politicalparties.toLowerCase().includes("socialist alternative")||S.politicalparties.toLowerCase().includes("resistance")||S.politicalparties.toLowerCase().includes("greens"))&&(c=!1),Boolean(S.passiveincome)&&(c=!1),u={_id:t,name:S.name||void 0,phone:S.phone||void 0,email:S.email||void 0,sex:S.sex,cool:c,expertise:S.expertise||void 0,images:a,password:S.password||void 0},console.log(u),te(u).then(function(e){e.error?C(Object(H.a)({},S,{error:e.error})):C(Object(H.a)({},S,{error:"",open:!0}))}),m(!1);case 43:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){console.log(S,y),w(!y),C(Object(H.a)({},S,{sex:t}))}Object(n.useEffect)(function(){},[r,i]);var _,R=function(e){return function(t){C(Object(H.a)({},S,Object(J.a)({},e,t.target.value)))}};return o.a.createElement("div",{className:"signupform"},o.a.createElement("h2",{className:"innersignupform",style:{display:p?"block":"none"}},"Uploading profile, please wait..."),o.a.createElement("div",{className:"innersignupform",style:{display:p?"none":"block"}},o.a.createElement("h4",{style:{textAlign:"center"}},"Sign Up"),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Name "),o.a.createElement("input",{id:"name",placeHolder:S.name,label:"text",value:S.name,onChange:R("name"),margin:"normal"})),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Email "),o.a.createElement("input",{id:"email",placeHolder:S.email,type:"text",label:"Email",value:S.email,onChange:R("email"),margin:"normal"})),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Phone "),o.a.createElement("input",{id:"phone",placeHolder:S.phone,type:"text",label:"Phone",value:S.phone,onChange:R("phone"),margin:"normal"})),o.a.createElement("div",{style:{margin:"1vw"}},o.a.createElement("h5",{style:{marginRight:"1vw",display:"block"}},"Try to explain your skills, knowledge, experience, qualifications. You may be elected as a leader of a group and other group members need some way of evaluating if you are a good candidate."),o.a.createElement("textarea",{style:{width:"95%",height:"20vh",overflowY:"auto",display:"block"},id:"expertise",placeHolder:S.expertise,label:"expertise",value:S.expertise,onChange:R("expertise"),margin:"normal"})),o.a.createElement("div",{className:"signupinput",style:{display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Are you male or female? If you identify as another category please write it below. We are aiming for proportionate representation for all demographic groups."),o.a.createElement("h6",{style:{display:"inline"}},"Male"),o.a.createElement("input",{id:"expertise",checked:y,style:{margin:"0.5vw",display:"inline"},type:"checkbox",onClick:function(e){return I(0,"male")},margin:"normal"}),o.a.createElement("h6",{style:{display:"inline"}},"Female"),o.a.createElement("input",{id:"expertise",checked:!y,style:{margin:"0.5vw",display:"inline"},type:"checkbox",onClick:function(e){return I(0,"female")},margin:"normal"})),o.a.createElement("input",{style:{width:"95%"},id:"expertise",type:"text"}),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Are you a member of any political parties? If so, which ones? "),o.a.createElement("input",{id:"expertise",type:"text",placeHolder:S.politicalparties,label:"expertise",value:S.politicalparties,onChange:R("politicalparties"),margin:"normal"})),o.a.createElement("div",{className:"signupinput",style:{display:"none",alignItems:"center",justifyContent:"center"}},o.a.createElement("h5",{style:{display:"none",marginRight:"1vw"},className:"ruletext"},"Do you receive any passive income from rents, dividends, interest or royalties? We are curious if you are a working class person. "),o.a.createElement("input",{style:{display:"none"},id:"expertise",type:"checkbox",value:!1,onChange:(_="passiveincome",function(e){C(Object(H.a)({},S,Object(J.a)({},_,e.target.checked)))}),margin:"normal"})),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{className:"ruletext"},"  Images "),o.a.createElement("div",{style:{display:r.length>=1?"block":"none"},className:"eventformbox ruletext"},o.a.createElement("input",{id:"file",type:"file",ref:T}))),o.a.createElement("div",{style:{display:r.length>=2?"block":"none"},className:"eventformbox ruletext"},o.a.createElement("input",{style:{width:"90%"},id:"file",type:"file",ref:j})),o.a.createElement("div",{style:{display:r.length>=3?"block":"none"},className:"eventformbox ruletext"},o.a.createElement("input",{style:{width:"90%"},id:"file",type:"file",ref:O})),o.a.createElement("div",{style:{display:r.length>=4?"block":"none"},className:"eventformbox ruletext"},o.a.createElement("input",{style:{width:"90%"},id:"file",type:"file",ref:N})),o.a.createElement("div",{style:{display:r.length>=5?"block":"none"},className:"eventformbox ruletext"},o.a.createElement("input",{style:{width:"90%"},id:"file",type:"file",ref:x}),o.a.createElement("p",null,"Max 5 images")),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Password "),o.a.createElement("input",{id:"password",type:"password",placeHolder:S.password,label:"Password",value:S.password,onChange:R("password"),margin:"normal"})),o.a.createElement("div",{className:"signupinput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Confirm Password "),o.a.createElement("input",{id:"passwordtwo",type:"password",placeHolder:S.passwordtwo,label:"Confirm Password",value:S.passwordtwo,onChange:R("passwordtwo"),margin:"normal"})),!(S.password==S.passwordtwo)&&!(""==S.passwordtwo)&&o.a.createElement("h5",{style:{marginRight:"1vw",color:"red"},className:"ruletext"},"Passwords Do Not Match"),S.passworderror&&!(S.password==S.passwordtwo)&&!(""==S.passwordtwo)&&o.a.createElement("h5",{style:{marginRight:"1vw",color:"red"},className:"ruletext"},"Cannot Submit, Must Fix Errors"),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t=r;t.length<5&&t.push(0),i(Object(u.a)(t))}(e)}},"Add Extra Image"),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t=r;t.length>0&&t.pop(),i(Object(u.a)(t))}(e)}},"One Less Image"),o.a.createElement("button",{id:"submit",onClick:function(e){!function(){A.apply(this,arguments)}()}},"Submit"),o.a.createElement("br",null)," ",S.error&&o.a.createElement(z.a,{component:"p",color:"error"},o.a.createElement(V.a,{color:"error",className:e.error},"error"),S.error)),o.a.createElement(X.a,{open:S.open,disableBackdropClick:!0},o.a.createElement(ee.a,null,"New Account"),o.a.createElement(Z.a,null,o.a.createElement(Q.a,null,"New account successfully created.")),o.a.createElement($.a,null,o.a.createElement(U.b,{to:"/signin"},o.a.createElement("button",null,"Sign In")))))}var ie=Object(K.a)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}});function se(e){var t;t=v()();var a=ie(),i=Object(n.useState)(!1),u=Object(c.a)(i,2),h=u[0],d=u[1],p=Object(n.useState)({email:"",password:"",mustenteremail:"",checkyouremail:"",error:"",redirectToReferrer:!1}),m=Object(c.a)(p,2),f=m[0],g=m[1];function y(){return(y=Object(l.a)(s.a.mark(function e(){var t,a,n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.email||(g(Object(H.a)({},f,{mustenteremail:"You must enter your email address so we can send you a password reset link"})),setTimeout(function(){g(Object(H.a)({},f,{mustenteremail:""}))},5e3)),console.log(f.email),!f.email){e.next=15;break}return t={method:"post",headers:{"Content-Type":"application/json"},body:""},e.next=6,fetch("/groups/getpasswordresettoken/"+f.email,t).then(function(e){return e.json()}).then(function(e){return console.log("password reset token result",e.token),e.token}).catch(function(e){console.error(e)});case 6:a=e.sent,console.log("password reset token",a),n="http://localhost:3000",n="http://democratic-social-network.herokuapp.com",o={emails:[f.email],subject:"Change Password for Democratic Social Network",message:"To reset your password visit this link ".concat(n,"/forgotpassword/").concat(a)},r={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},fetch("/groups/sendemailnotification",r).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),g(Object(H.a)({},f,{checkyouremail:"We have sent you an email with a password reset link"})),setTimeout(function(){g(Object(H.a)({},f,{checkyouremail:""}))},5e3);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}var w=function(e){return function(t){g(Object(H.a)({},f,Object(J.a)({},e,t.target.value)))}},b=(e.location.state||{from:{pathname:"/"}}).from;return f.redirectToReferrer?o.a.createElement(r.a,{to:b}):o.a.createElement("div",{className:"signinform"},o.a.createElement("div",{className:"innersigninform"},o.a.createElement("h4",{style:{margin:"1vw",textAlign:"center"}},"Sign In"),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",{className:"ruletext"},"Email "),o.a.createElement("input",{id:"email",type:"email",label:"Email",className:a.textField,value:f.email,onChange:w("email"),margin:"normal"})),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",{className:"ruletext"},"Password "),o.a.createElement("input",{id:"password",type:"password",label:"Password",className:a.textField,value:f.password,onChange:w("password"),margin:"normal"})),f.error&&o.a.createElement(z.a,{component:"p",color:"error"},o.a.createElement(V.a,{color:"error",className:a.error},"error "),f.error),!h&&o.a.createElement("button",{style:{display:"inline"},id:"submit",onClick:function(){d(!0);var e={email:f.email||void 0,password:f.password||void 0};console.log(e),O(e).then(function(e){e.error?(g(Object(H.a)({},f,{error:e.error})),console.error(e.error),d(!1)):(console.log(e),x.authenticate(e,function(){g(Object(H.a)({},f,{error:"",redirectToReferrer:!0}))}),t.emit("new user",e.user.name),d(!1))})}},"Submit"),h&&o.a.createElement("h3",null,"Logging in..."),o.a.createElement("button",{style:{display:"inline"},id:"submit",onClick:function(){return y.apply(this,arguments)}},"Forgot Password"),f.mustenteremail&&o.a.createElement("p",{style:{color:"red",display:"block"}},f.mustenteremail),f.checkyouremail&&o.a.createElement("p",{style:{color:"green",display:"block"}},f.checkyouremail)))}a(48);var le=a(23);function ce(e){var t=o.a.useRef(""),a=Object(n.useState)(),r=Object(c.a)(a,2),i=r[0],u=r[1];function h(){return(h=Object(l.a)(s.a.mark(function a(n){var o,r,l,c,h,d;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),o=new Date,r=o.getTime(),l=(l=le.Types.ObjectId()).toString(),c={_id:l,postid:e.id,createdby:x.isAuthenticated().user._id,comment:t.current.value,timecreated:r},(h=JSON.parse(JSON.stringify(i))).push(c),u(h),d={method:"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8"}},a.next=12,fetch("/posts/createcomment/"+l,d).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)});case 12:({method:"put",headers:{"Content-Type":"application/json"},body:""});case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}if(Object(n.useEffect)(function(){fetch("/posts/getcomments/"+e.id).then(function(e){return e.json()}).then(function(e){u(e.data)}).catch(function(e){console.error(e)})},[e]),i)var d=i.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:t,className:"comment"},o.a.createElement("p",{className:"commp",style:{margin:"1vw",fontSize:"small"}},e.comment),o.a.createElement("div",{classname:"comm"},o.a.createElement("p",{style:{display:"inline",margin:"1vw",fontSize:"small"}},o.a.createElement("strong",null,"Comment by ",e.createdby.name)),o.a.createElement("button",{style:{display:"inline"},onClick:function(t){return function(e,t){e.preventDefault();var a=JSON.parse(JSON.stringify(i)).filter(function(e){return e._id!==t});u(a),fetch("/posts/deletecomment/"+t,{method:"Delete",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}(t,e._id)}},"Delete comment?"))))});return o.a.createElement("div",{className:"comments"},o.a.createElement("div",{className:"commentform"},o.a.createElement("div",{className:"commentstuff"},o.a.createElement("p",{style:{display:"inline",fontSize:"small"},htmlFor:"name"},o.a.createElement("strong",null,"Comment")),o.a.createElement("button",{style:{display:"inline"},onClick:function(e){return function(e){return h.apply(this,arguments)}(e)}},"Submit Comment")),o.a.createElement("input",{className:"commentinput",type:"text",style:{overflowY:"auto"},name:"commentValue",id:"commentValue",ref:t})),o.a.createElement("div",{className:"commentsdisplay"},d&&d))}function ue(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return he(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return he(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var de=a(23);function pe(e){var t,a=Object(n.useState)(!1),r=Object(c.a)(a,2),i=r[0],h=r[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),m=p[0],f=p[1],g=o.a.useRef(""),y=Object(n.useState)([]),w=Object(c.a)(y,2),b=w[0],E=w[1],S=Object(n.useState)(e.group),k=Object(c.a)(S,2),C=k[0],T=k[1],j=Object(n.useState)(""),O=Object(c.a)(j,2),N=O[0],A=O[1],I=Object(n.useState)(!1),_=Object(c.a)(I,2),R=_[0],P=_[1],D=Object(n.useState)(1),F=Object(c.a)(D,2),J=F[0],U=F[1],M=Object(n.useState)([]),W=Object(c.a)(M,2),Y=W[0],q=W[1],L=Object(n.useState)([]),B=Object(c.a)(L,2),G=B[0],H=B[1],z=Object(n.useState)(""),V=Object(c.a)(z,2),K=(V[0],V[1],Object(n.useState)("")),X=Object(c.a)(K,2),$=X[0],Z=X[1];function Q(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null}function ee(e,t){var a=b.slice(10*t-10,10*t);U(t),H(a)}function te(){return(te=Object(l.a)(s.a.mark(function e(t){var a,n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={key:"567204aab52f43be1f7bbd3573ff4875",q:t},t.includes("youtube")&&(n=Q(t),o="http//www.youtube.com/embed/".concat(n),a={key:"567204aab52f43be1f7bbd3573ff4875",q:o}),e.next=4,fetch("https://api.linkpreview.net",{method:"POST",mode:"cors",body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){console.error(e)});case 4:r=e.sent,Z(r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(a){a.preventDefault(),P(!0),setTimeout(function(){P(!1)},3e3);var n=(new Date).getTime(),o=de.Types.ObjectId(),r={_id:o,post:N,level:C.level,politicalmarketing:[],groupIds:[e.groupId],preview:$,timecreated:n,createdby:x.isAuthenticated().user._id},i=JSON.parse(JSON.stringify(r));i.createdby=x.isAuthenticated().user;var s=x.isAuthenticated().user._id,l=x.isAuthenticated().user.name,c=n,h=C._id,d=C.title;console.log(d),t.emit("Input Chat Message",{chatMessage:"created a new post",userId:s,userName:l,nowTime:c,type:"text",groupId:h,groupTitle:d});var p=JSON.parse(JSON.stringify(b));p.reverse(),p.push(i),p.reverse(),function(t){var a=JSON.parse(JSON.stringify(b));if(!t.notificationsent){var n,o=ue(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.notificationsent=!0)}}catch(h){o.e(h)}finally{o.f()}E(a);var i=a.slice(10*J-10,10*J);H(i);var s=JSON.parse(JSON.stringify(e.users)),l=(s=s.filter(function(e){return e.posts})).map(function(e){return e.email}),c={emails:l,subject:"New Post",message:"".concat(x.isAuthenticated().user.name," wrote a post called ").concat(t.post,"  in the group ").concat(C.title," at level ").concat(C.level)},u={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};fetch("/groups/sendemailnotification",u).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/posts/notificationsent/"+t._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}A("")}(r);var m={method:"POST",body:JSON.stringify(r),headers:{"Content-type":"application/json; charset=UTF-8"}};fetch("/posts/createpost/"+o,m).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)}),function(e,t){if(!e.sentdown){var a,n=JSON.parse(JSON.stringify(t)),o=ue(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r._id==e._id.toString()&&(r.sentdown=!0)}}catch(g){o.e(g)}finally{o.f()}E(n);var i=n.slice(10*J-10,10*J);H(i);var s={method:"put",headers:{"Content-Type":"application/json"},body:""};fetch("/posts/marksentdown/"+e._id.toString(),s).then(function(e){console.log(e)}).catch(function(e){console.error(e)});var l,c=[],h=ue(C.groupsbelow);try{for(h.s();!(l=h.n()).done;){var d=l.value;d.groupsbelow&&c.push.apply(c,Object(u.a)(d.groupsbelow)),c.push(d._id)}}catch(g){h.e(g)}finally{h.f()}for(var p=0,m=c;p<m.length;p++){var f=m[p];fetch("/posts/sendpostdown/"+e._id.toString()+"/"+f,s).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}}(r,p)}function ne(a,n){var o,r,i=JSON.parse(JSON.stringify(b)),s=ue(i);try{for(s.s();!(r=s.n()).done;){var l=r.value;l._id==n&&(o=l.post)}}catch(S){s.e(S)}finally{s.f()}var c=i.filter(function(e){return!(e._id==n)});E(c);var u=c.slice(10*J-10,10*J);H(u);var h=(new Date).getTime(),d=x.isAuthenticated().user._id,p=x.isAuthenticated().user.name,m=h,f=C._id,g=C.title;t.emit("Input Chat Message",{chatMessage:"deleted a post",userId:d,userName:p,nowTime:m,type:"text",groupId:f,groupTitle:g}),fetch("/posts/deletepost/"+n,{method:"Delete",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)});var y=JSON.parse(JSON.stringify(e.users)),v={emails:(y=y.filter(function(e){return e.posts})).map(function(e){return e.email}),subject:"Post Deleted",message:"".concat(x.isAuthenticated().user.name," deleted the post called ").concat(o," in the group ").concat(C.title," at level ").concat(C.level)},w={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)};fetch("/groups/sendemailnotification",w).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}if(t=v()(),Object(n.useEffect)(function(){T(e.group),fetch("/posts/getposts/"+e.groupId).then(function(e){return e.json()}).then(function(e){var t=e.data;t.reverse(),E(t);var a=t.slice(0,10);H(a);for(var n=Math.ceil(e.data.length/10),o=[];n>0;)o.push(n),n--;o.reverse(),q(o)}).catch(function(e){console.error(e)})},[e]),Object(n.useEffect)(function(){var e=/(https?:\/\/[^ ]*)/;N.match(e)&&function(e){te.apply(this,arguments)}(N.match(e)[0])},[N]),$&&(console.log("preview",$),$.url))var oe=o.a.createElement("img",{src:$.url,style:{marginLeft:"10vw",textAlign:"center",maxHeight:"70vh",maxWidth:"70vw",objectFit:"contain"}});console.log("posts",G);var re,ie=G.map(function(e,t){var a;e.preview&&e.preview.url&&(a=o.a.createElement("img",{key:e._id,style:{position:"relative",margin:"1vw",display:"block",Zindex:"-1",Position:"fixed",marginLeft:"10vw",textAlign:"center",maxHeight:"70vh",maxWidth:"70vw",objectFit:"contain"},src:e.preview.url}));var n=o.a.Fragment;n=Math.round(e.politicalmarketing.length/C.members.length*100);var r,i=[],s=ue(C.members);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,u=ue(e.politicalmarketing);try{for(u.s();!(l=u.n()).done;){l.value==c._id&&i.push(c.name)}}catch(d){u.e(d)}finally{u.f()}}}catch(d){s.e(d)}finally{s.f()}n>75&&ne(0,e._id);var h="".concat(e.politicalmarketing.length/C.members.length*100,"%");return console.log("prev",a),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:e._id,className:"postbox"},o.a.createElement("div",null,o.a.createElement("div",{className:"postboxform",style:{overflowX:"hidden"}},o.a.createElement("div",{style:{display:"block",margin:"1vw",textAlign:"right"}},e.createdby&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",{style:{margin:"1vw",display:"inline",textAlign:"center"}},o.a.createElement("strong",null," Post by ",e.createdby.name)),(e.createdby._id==x.isAuthenticated().user._id||C.groupabove.members.includes(x.isAuthenticated().user._id))&&!e.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(t){return function(e,t){console.log(t);var a,n=JSON.parse(JSON.stringify(b)),o=ue(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r._id==t._id&&(r.areyousure=!0)}}catch(d){o.e(d)}finally{o.f()}var i=n.slice(10*J-10,10*J);E(n),H(i)}(0,e)}},"Delete Post?")),e.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(t){return function(e,t){console.log(t);var a,n=JSON.parse(JSON.stringify(b)),o=ue(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r._id==t._id&&(r.areyousure=!1)}}catch(d){o.e(d)}finally{o.f()}var i=n.slice(10*J-10,10*J);E(n),H(i)}(0,e)}},"Not sure"),e.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(t){return ne(0,e._id)}},"Are you sure?")),o.a.createElement("h4",{style:{display:"block",margin:"1vw"}},o.a.createElement("strong",null,"Post: "),e.post),a&&a),e.level>C.level&&o.a.createElement("div",{className:"postboxform"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement("h5",{style:{display:"inline"}},o.a.createElement("strong",null,"This post has been passed down by a level ",e.level," group.")," Does it encourage you to vote or not vote for a particular person?"),!e.politicalmarketing.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext",onClick:function(t){return function(e,t){console.log(t);var a,n=JSON.parse(JSON.stringify(b)),o=ue(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r._id==t&&(r.politicalmarketing.includes(x.isAuthenticated().user._id)||r.politicalmarketing.push(x.isAuthenticated().user._id),E(n))}}catch(d){o.e(d)}finally{o.f()}var i=n.slice(10*J-10,10*J);H(i),fetch("/posts/markaspoliticalmarketing/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).catch(function(e){console.error(e)})}(0,e._id)}},"Is this political marketing?"),e.politicalmarketing.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext",onClick:function(t){return function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(b));function n(e){return e!=x.isAuthenticated().user._id}var o,r=ue(a);try{for(r.s();!(o=r.n()).done;){var i=o.value;if(i._id==t){var s=i.politicalmarketing.filter(n);i.politicalmarketing=s}}}catch(d){r.e(d)}finally{r.f()}E(a);var l=a.slice(10*J-10,10*J);H(l),fetch("/posts/withdrawmarkaspoliticalmarketing/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).catch(function(e){console.error(e)})}(0,e._id)}},"This is not political marketing?"),i&&i.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",{className:"ruletext"},e,t<i.length-2?", ":t<i.length-1?" and ":"."))}),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:h},className:"percentage"}))))),o.a.createElement(ce,{id:e._id})))});return C.members&&(re=(re=C.members.map(function(e){return e._id})).includes(x.isAuthenticated().user._id)),o.a.createElement(o.a.Fragment,null,re&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"block"},onClick:function(e){return h(!i)}},"View Write Post Form?"),o.a.createElement("div",{className:"form",style:{maxHeight:i?"1000vw":"0",overflow:"hidden",transition:"max-height 2s"}},o.a.createElement("form",{style:{display:i?"block":"none"}},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"name"},"Write Post"),!R&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"formsubmitbutton",onClick:function(e){return ae(e)}},"New Post?")),R&&o.a.createElement("h4",null,"Uploading Post..."),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),f(!m)}(e)}},"View Explanation")),o.a.createElement("textarea",{className:"posttextarea",onChange:function(e){return A(e.target.value)},ref:g,id:"story",rows:"5",cols:"33"}),$&&oe,o.a.createElement("div",{className:"leaderexpl",style:{maxHeight:m?"2000vw":"0",overflow:"hidden"}},C.level>0&&o.a.createElement("p",null,"Posts made in higher groups are immediately passed down to all groups below them. Remember that ",o.a.createElement("strong",null,"you cannot promote, advertise or endorse candidates in lower groups in any way"),". If you think a post contains this kind of marketing, you can click the button to mark it. If a 75% majority in any group agrees on this, the post is deleted. If elected candidates repeatedly break this rule, it is recommended to withdraw your vote from them and give it to someone else. Groups must be entirely responsible for choosing their own leaders. We want a genuine meritocracy and not an oligarchy in which a small minority group pre-appproves candidates that are acceptable to themselves. We want genuine democracy and not a democracy where people only get to choose between a range of options decided by an oligarchy. We also don't want a system where only the very wealthy can afford to run political campaigns. Actually, we shouldn't have any political marketing campaigns at all. Ideally, people should be politically conscious enough to actively go and do their own research about who the leaders should be, instead of passively complying with what the political propoganda suggests. We want a political system grounded in the authority of knowledge, wisdom and moral integrity, instead of coercive or exploitative power. We don't want people to use any kind of authority to create and impose rules that reinforce or propogate their own power. That would be an abuse of authority. We need leaders who will try to lead the group in a direction that is in the best interests of the group and not one's who will take advantage of the society for their own benefit. Posts are very useful for sharing information between groups and for higher level groups to try to explain why they have created certain rules, events, polls or restrictions. The mass media should be used for sharing important information and not for misleading people with propoganda. On the democratic social network, any user can visit any group and see their discussions. In order to prevent chaotic, disorderly conversations with too many people, you cannot directly participate in all discussions, but you can at least see them. This fact, combined with immediate recall of unpopular representatives means that there is a much greater motivation for elected leaders to consult, discuss and explain their decisions with the people effected by them or demonstrate their own trustworthyness. This is quite different from and elitist political system. In an oligarchy, the masses are excluded from group decision making because the rulers believe that most people are stupid, weak, immoral and irresponsible. In a genuine, socialistic democracy, authority is distributed evenly so that, while you may not be able to vote on all issues, you can be involved in making choices about things that are relevant to you and you have the expertise to understand. Our modern world is extremely complicated, even the biggest genuises can only be experts in a tiny fraction of all knowledge the human race collective has. There will always be many issues that we just don't know anything about and there is no benefit in us sharing our views."))))),Y.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),Y.length>1&&Y&&b&&Y.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:t+1==J?"0.5":"1"},onClick:function(t){return ee(0,e)}},e))}),ie,o.a.createElement("br",null),o.a.createElement("div",{style:{marginBottom:"5vw"}},Y.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),Y.length>1&&Y&&b&&Y.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:t+1==J?"0.5":"1"},onClick:function(t){return ee(0,e)}},e))})))}var me=a(23);function fe(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],i=a[1],u=Object(n.useState)(!1),h=Object(c.a)(u,2),d=h[0],p=h[1],m=Object(n.useState)(!1),f=Object(c.a)(m,2),g=f[0],y=f[1],v=Object(n.useState)(e.level),w=Object(c.a)(v,2),b=w[0],E=w[1],S=o.a.useRef(""),C=o.a.useRef(""),T=o.a.useRef(""),j=o.a.useRef(0),O=o.a.useRef(0),N=o.a.useRef(null),A=Object(n.useState)(!1),I=Object(c.a)(A,2),_=(I[0],I[1],Object(n.useState)(1)),R=Object(c.a)(_,2);R[0],R[1];function P(){return(P=Object(l.a)(s.a.mark(function t(a){var n,o,r,i,l,c,u,h,d;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("submitting"),a.preventDefault(),p(!0),n=new Date,o=n.getTime(),r=(r=me.Types.ObjectId()).toString(),t.next=9,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(T.current.value,".json?access_token=pk.eyJ1IjoianVsaWFuYnVsbCIsImEiOiJja25zbXJibW0wNHgwMnZsaHJoaDV6MTg4In0.qPBGW4XMJcsZSUCrQej8Zw")).then(function(e){return e.json()}).then(function(e){return console.log(e),e.features[0].center}).catch(function(e){console.error(e)});case 9:if(i=t.sent,y(!i),!i){t.next=27;break}if(l=[],!N.current.files[0]){t.next=19;break}return(c=new FormData).append("file",N.current.files[0]),c.append("upload_preset","jvm6p9qv"),t.next=19,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",c).then(function(e){console.log(e.data.public_id),l.push(e.data.public_id)}).catch(function(e){console.error(e)});case 19:return u={_id:r,title:S.current.value,groupIds:[e.groupId],level:b,starttime:String(j.current.value),endtime:String(O.current.value),description:C.current.value,createdby:x.isAuthenticated().user._id,location:T.current.value,coordinates:[i[1],i[0]],notificationsent:!1,approvalnotificationsent:!1,images:l,timecreated:o,approval:[x.isAuthenticated().user._id]},(h=JSON.parse(JSON.stringify(u))).createdby=x.isAuthenticated().user,console.log("new event",h),e.updateEvents(h),d={method:"POST",body:JSON.stringify(u),headers:{"Content-type":"application/json; charset=UTF-8"}},t.next=27,fetch("/events/createevent/"+r,d).then(function(e){return e.json()}).then(function(e){return console.log(e)}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)});case 27:p(!1);case 28:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(n.useEffect)(function(){E(e.level,"level")},[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"formbutton",style:{display:"block"},onClick:function(e){return i(!r)}},"View Create Event Form?"),o.a.createElement("div",{className:"form",style:{maxHeight:r?"100vw":"0",overflow:"hidden",transition:"max-height 2s"}},o.a.createElement("form",null,o.a.createElement("div",{className:"eventformbox"},o.a.createElement("label",{style:{display:"block"},htmlFor:"name"},"Title"),o.a.createElement("input",{className:"posttextarea",style:{width:"80vw"},type:"text",name:"titleValue",id:"titleValue",ref:S})),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("label",{htmlFor:"name"},"Description"),o.a.createElement("input",{className:"posttextarea",style:{width:"80vw"},type:"text",name:"descriptionValue",id:"descriptionValue",ref:C})),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("label",{htmlFor:"name"},"Location"),o.a.createElement("input",{className:"posttextarea",type:"text",name:"locationValue",style:{width:"80vw"},id:"locationValue",ref:T}),g&&o.a.createElement("p",{style:{display:"block",color:"red"}},"Not a valid location"),o.a.createElement("label",{htmlFor:"name"},"Start Time"),o.a.createElement("input",{type:"datetime-local",name:"startTimValue",style:{width:"80vw",overflow:"hidden"},id:"startTimeValue",ref:j}),o.a.createElement("label",{htmlFor:"name"},"End Time"),o.a.createElement("input",{type:"datetime-local",name:"endTimeValue",style:{width:"80vw",overflow:"hidden"},id:"endTimeValue",ref:O})),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("label",{htmlFor:"name"},"Image"),o.a.createElement("input",{id:"file",type:"file",ref:N})),!d&&o.a.createElement("button",{className:"formsubmitbutton",onClick:function(e){return function(e){return P.apply(this,arguments)}(e)}},"Submit Event?"),d&&o.a.createElement("h3",null,"uploading!!!!!"))))}var ge=a(117),ye=a.n(ge),ve=(a(358),a(174),a(409)),we=a(413),be=a(414);function Ee(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Se(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Se(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(23);var ke=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={location:"",title:"",users:e.users,group:e.group,socket:e.socket,level:0,events:[],page:1,pageNum:[],currentPageData:[],redirect:!1,updating:!1},a.updateEvents=a.updateEvents.bind(Object(g.a)(Object(g.a)(a))),a.eventApprovedNotification=a.eventApprovedNotification.bind(Object(g.a)(Object(g.a)(a))),a.areYouSure=a.areYouSure.bind(Object(g.a)(Object(g.a)(a))),a.areYouNotSure=a.areYouNotSure.bind(Object(g.a)(Object(g.a)(a))),a.sendEventNotification=a.sendEventNotification.bind(Object(g.a)(Object(g.a)(a))),a.approveofevent=a.approveofevent.bind(Object(g.a)(Object(g.a)(a))),a.deleteEvent=a.deleteEvent.bind(Object(g.a)(Object(g.a)(a))),a.withdrawapproveofevent=a.withdrawapprovalofevent.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getEvents()}},{key:"componentWillReceiveProps",value:function(e){e.socket!==this.props.socket&&this.setState({socket:e.socket}),e.users!==this.props.users&&this.setState({users:e.users}),e.group!==this.props.group&&this.setState({group:e.group})}},{key:"decidePage",value:function(e,t){var a=this.state.events.slice(10*t-10,10*t);this.setState({page:t,currentPageData:a})}},{key:"getEvents",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/events/getevents/"+this.props.groupId).then(function(e){return e.json()}).then(function(e){console.log(e);var a=e;a.reverse(),t.setState({events:a});var n=a.slice(0,10);t.setState({currentPageData:n});for(var o=Math.ceil(e.length/10),r=[];o>0;)r.push(o),o--;r.reverse(),t.setState({pageNum:r})}).catch(function(e){console.error(e)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateEvents",value:function(e){var t=JSON.parse(JSON.stringify(this.state.events));t.reverse(),t.push(e),t.reverse(),this.setState({events:t});var a=t.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:a})}},{key:"sendEventDown",value:function(){var e=Object(l.a)(s.a.mark(function e(t){var a,n,o,r,i,l,c,h;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"put",headers:{"Content-Type":"application/json"},body:""},fetch("/events/marksentdown/"+t._id,a).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),n=[],o=Ee(this.state.group.groupsbelow);try{for(o.s();!(r=o.n()).done;)(i=r.value).groupsbelow&&n.push.apply(n,Object(u.a)(i.groupsbelow)),n.push(i._id)}catch(s){o.e(s)}finally{o.f()}for(l=0,c=n;l<c.length;l++)h=c[l],fetch("/events/sendeventdown/"+t._id+"/"+h,a).catch(function(e){console.error(e)});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.events));var n=(new Date).getTime(),o="An event called ".concat(t.title," has been deleted from this group"),r=x.isAuthenticated().user._id,i=x.isAuthenticated().user.name,s=n,l=this.state.group._id,c=this.state.group.title;this.state.socket.emit("Input Chat Message",{chatMessage:o,userId:r,userName:i,nowTime:s,type:"text",groupId:l,groupTitle:c});var u=a.filter(function(e){return e._id!=t._id});this.setState({events:u});var h=u.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:h});var d=JSON.parse(JSON.stringify(this.state.users)),p={emails:(d=d.filter(function(e){return e.events})).map(function(e){return e.email}),subject:"Event Deleted",message:"The event called ".concat(t.title," has been deleted in the group called\n      ").concat(this.state.group.title," at level ").concat(this.state.group.level,".")},m={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)};fetch("/groups/sendemailnotification",m).then(function(e){console.log(e)}).catch(function(e){console.error(e)});var f={method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("/events/"+t._id,f).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}},{key:"approveofevent",value:function(e,t){var a=(new Date).getTime(),n=JSON.parse(JSON.stringify(this.state.events));var o,r=Ee(n);try{for(r.s();!(o=r.n()).done;){var i=o.value;i._id==t&&(i.approval.includes(x.isAuthenticated().user._id)||i.approval.push(x.isAuthenticated().user._id));var s,l=[],c=this.state.group.members.map(function(e){return e._id}),u=Ee(i.approval);try{for(u.s();!(s=u.n()).done;){var h=s.value;c.includes(h)&&l.push(h)}}catch(m){u.e(m)}finally{u.f()}i.approval=l;var d=Math.round(i.approval.length/this.state.users.length*100);d>75&&this.state.group.level>0&&0==i.sentdown&&(i.sentdown=!0,this.sendEventDown(i)),d>75&&!i.approvalnotificationsent&&this.eventApprovedNotification(i),d<75&&a-i.timecreated>6048e5&&this.deleteEvent(null,i),d>=10&&!i.notificationsent&&this.sendEventNotification(i)}}catch(m){r.e(m)}finally{r.f()}this.setState({events:n});var p=n.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:p});fetch("/events/approveofevent/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}},{key:"withdrawapprovalofevent",value:function(e,t){var a=(new Date).getTime(),n=JSON.parse(JSON.stringify(this.state.events));function o(e){return e!=x.isAuthenticated().user._id}var r,i=Ee(n);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s._id==t){var l=s.approval.filter(o);s.approval=l}Math.round(s.approval.length/this.state.users.length*100)<75&&a-s.timecreated>6048e5&&this.deleteEvent(null,s)}}catch(u){i.e(u)}finally{i.f()}this.setState({events:n});var c=n.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:c});fetch("/events/withdrawapprovalofevent/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}},{key:"eventApprovedNotification",value:function(e){if(console.log(e),0==e.approvalnotificationsent){var t,a=JSON.parse(JSON.stringify(this.state.events)),n=Ee(a);try{for(n.s();!(t=n.n()).done;){var o=t.value;console.log(o._id,e._id),o._id==e._id&&(o.approvalnotificationsent=!0)}}catch(g){n.e(g)}finally{n.f()}console.log(a),this.setState({events:a});var r=a.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:r});var i=(new Date).getTime(),s="An event called ".concat(e.title," has been approved for this group, with 75% attendance"),l=x.isAuthenticated().user._id,c=x.isAuthenticated().user.name,u=i,h=this.state.group._id,d=this.state.group.title;this.state.socket.emit("Input Chat Message",{chatMessage:s,userId:l,userName:c,nowTime:u,type:"text",groupId:h,groupTitle:d});var p=JSON.parse(JSON.stringify(this.state.users)),m={emails:(p=p.filter(function(e){return e.eventsapproved})).map(function(e){return e.email}),subject:"New Event Approved",message:"An event called ".concat(e.title," has reached 75% attendance in the group called ").concat(this.state.group.title," at level ").concat(this.state.group.level)},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)};fetch("/groups/sendemailnotification",f).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/events/approvalnotificationsent/"+e._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}},{key:"areYouSure",value:function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(this.state.events));console.log(a);var n,o=Ee(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!0)}}catch(s){o.e(s)}finally{o.f()}console.log(a);var i=a.slice(10*this.state.page-10,10*this.state.page);this.setState({events:a,currentPageData:i})}},{key:"areYouNotSure",value:function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(this.state.events));console.log(a);var n,o=Ee(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!1)}}catch(s){o.e(s)}finally{o.f()}console.log(a);var i=a.slice(10*this.state.page-10,10*this.state.page);this.setState({events:a,currentPageData:i})}},{key:"sendEventNotification",value:function(e){if(console.log(e),0==e.notificationsent){var t=JSON.parse(JSON.stringify(this.state.events));console.log(t);var a,n=Ee(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;o._id==e._id&&(o.notificationsent=!0,console.log("updated event",o))}}catch(g){n.e(g)}finally{n.f()}console.log(t);var r=t.slice(10*this.state.page-10,10*this.state.page);this.setState({events:t,currentPageData:r});var i=(new Date).getTime(),s="An event called ".concat(e.title," has been suggested for this group"),l=x.isAuthenticated().user._id,c=x.isAuthenticated().user.name,u=i,h=this.state.group._id,d=this.state.group.title;this.state.socket.emit("Input Chat Message",{chatMessage:s,userId:l,userName:c,nowTime:u,type:"text",groupId:h,groupTitle:d});var p=JSON.parse(JSON.stringify(this.state.users)),m={emails:(p=p.filter(function(e){return e.events})).map(function(e){return e.email}),subject:"New Event Suggestion",message:"In the group called ".concat(this.state.group.title," at level ").concat(this.state.group.level,", ").concat(e.createdby.name," suggested the event: ").concat(e.title)},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)};fetch("/groups/sendemailnotification",f).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/events/notificationsent/"+e._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}},{key:"render",value:function(){var e=this,t=(new Date).getTime(),a=o.a.createElement("h3",null,"no events");this.state.users&&this.state.events&&this.state.events.length>0&&(a=this.state.currentPageData.map(function(a){var n,r=o.a.Fragment,i=[],s=e.state.group.members.map(function(e){return e._id}),l=Ee(a.approval);try{for(l.s();!(n=l.n()).done;){var c=n.value;s.includes(c)&&i.push(c)}}catch(w){l.e(w)}finally{l.f()}a.approval=i,r=Math.round(a.approval.length/e.state.users.length*100);var u,h=[],d=Ee(e.state.users);try{for(d.s();!(u=d.n()).done;){var p,m=u.value,f=Ee(a.approval);try{for(f.s();!(p=f.n()).done;){p.value==m._id&&h.push(m.name)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){d.e(w)}finally{d.f()}var g="".concat(a.approval.length/e.state.users.length*100,"%");r<75&&t-a.timecreated>6048e5&&e.deleteEvent(null,a);var y=a.starttime.split("T");y="Date: ".concat(y[0],", Time: ").concat(y[1]);var v=a.endtime.split("T");return v="Date: ".concat(v[0],", Time: ").concat(v[1]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:a._id,className:"eventbox",style:{marginBottom:"1vw"}},o.a.createElement("div",{className:"eventcol1"},a.title&&o.a.createElement("h3",null,"Title: ",a.title),a.description&&o.a.createElement("h4",null,"Description: ",a.description),a.starttime&&o.a.createElement("h4",null,"Start: ",y,", End: ",v),e.state.users&&o.a.createElement("h4",{className:"ruletext"},a.approval.length," people are attending this event. ",a.approval.length>0&&o.a.createElement(o.a.Fragment,null,"Attendees=")),h&&h.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",{className:"ruletext"},e,t<h.length-2?", ":t<h.length-1?" and ":"."))}),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:g},className:"percentage"})),!a.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext approvalbutton",id:a.title,onClick:function(t){return e.approveofevent(t,a._id)}},"Attend this event?"),a.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext approvalbutton",id:a.title,onClick:function(t){return e.withdrawapprovalofevent(t,a._id)}},"Don't want to attend anymore?"),e.state.group.groupabove&&o.a.createElement(o.a.Fragment,null,a.createdby&&o.a.createElement(o.a.Fragment,null,(a.createdby._id==x.isAuthenticated().user._id||e.state.group.groupabove.members.includes(x.isAuthenticated().user._id))&&r<75&&!a.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",id:a.title,onClick:function(t){return e.areYouSure(t,a)}},"Delete?"))),a.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",id:a.title,onClick:function(t){return e.areYouNotSure(t,a)}},"Not sure"),a.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",id:a.title,onClick:function(t){return e.deleteEvent(t,a)}},"Are you sure?")),(a.images||a.coordinates)&&o.a.createElement("div",{className:"eventimagemapcontainer"},a.images&&o.a.createElement("div",{className:"eventcol2"},o.a.createElement(F.a,{style:{width:"100%",overflow:"hidden"},cloudName:"julianbullmagic",publicId:a.images[0]})),o.a.createElement("div",{className:"eventcol3"},o.a.createElement("div",{className:"eventcol3inner"},a.coordinates&&o.a.createElement(ve.a,{center:[a.coordinates[0],a.coordinates[1]],zoom:13,scrollWheelZoom:!1},o.a.createElement(we.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.a.createElement(be.a,{center:[a.coordinates[0],a.coordinates[1]],radius:100})))))))}));var n=this.state.group.members.map(function(e){return e._id});return n=n.includes(x.isAuthenticated().user._id),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginBottom:"20vw"}},n&&o.a.createElement("h2",null,"Propose an Event"),n&&o.a.createElement(fe,{updateEvents:this.updateEvents,groupId:this.props.groupId,level:this.state.group.level}),o.a.createElement("h2",null,o.a.createElement("strong",null,"Group Events ")),this.state.pageNum.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),this.state.pageNum.length>1&&this.state.pageNum&&this.state.events&&this.state.pageNum.map(function(t,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:a+1==e.state.page?"0.5":"1"},onClick:function(a){return e.decidePage(a,t)}},t))}),this.state.currentPageData&&a,this.state.pageNum.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),this.state.pageNum.length>1&&this.state.pageNum.length>1&&this.state.pageNum&&this.state.events&&this.state.pageNum.map(function(t,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:a+1==e.state.page?"0.5":"1"},onClick:function(a){return e.decidePage(a,t)}},t))})))}}]),t}(n.Component),Ce=a(23);function Te(e){var t=o.a.useRef(""),a=o.a.useRef(""),r=Object(n.useState)(!1),i=Object(c.a)(r,2),u=i[0],h=i[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2);p[0],p[1];function m(){return(m=Object(l.a)(s.a.mark(function n(o){var r,i,l,c,u,h;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.preventDefault(),r=new Date,i=r.getTime(),l=(l=Ce.Types.ObjectId()).toString(),c={_id:l,rule:t.current.value,groupIds:[e.groupId],level:e.level,createdby:x.isAuthenticated().user._id,explanation:a.current.value,notificationsent:!1,ratificationnotificationsent:!1,timecreated:i,approval:[x.isAuthenticated().user._id]},console.log("NEW RULE",c),(u=JSON.parse(JSON.stringify(c))).createdby=x.isAuthenticated().user,e.updateRules(u),h={method:"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8"}},n.next=13,fetch("/rules/createrule/"+l,h).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)});case 13:case"end":return n.stop()}},n)}))).apply(this,arguments)}return v()(),o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"formbutton",style:{display:"block"},onClick:function(e){return h(!u)}},"View Create Rule Form?"),o.a.createElement("div",{className:"form",style:{maxHeight:u?"100vw":"0",overflow:"hidden",transition:"max-height 2s"}},o.a.createElement("form",{className:"search-form"},o.a.createElement("div",{className:"eventformbox"},o.a.createElement("label",{htmlFor:"name"},"Rule"),o.a.createElement("input",{className:"posttextarea",type:"text",name:"ruleValue",id:"ruleValue",ref:t,style:{width:"95%"}})),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("label",{htmlFor:"name"},"Explanation"),o.a.createElement("textarea",{className:"posttextarea",rows:"4",type:"text",name:"explanationValue",id:"explanationValue",ref:a})),o.a.createElement("button",{className:"formsubmitbutton",onClick:function(e){return function(e){return m.apply(this,arguments)}(e)}},"Submit Rule"))))}function je(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Oe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Oe(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(23);var Ne=[],xe=function(e){function t(e){var a;Object(h.a)(this,t),a=Object(p.a)(this,Object(m.a)(t).call(this,e));var n,o=je(e.users);try{for(o.s();!(n=o.n()).done;){var r=n.value;e.group.groupabove&&e.group.groupabove.members.includes(r._id)&&Ne.push(r)}}catch(s){o.e(s)}finally{o.f()}Ne=Object(u.a)(new Set(Ne));var i=e.users;return i=(i=i.sort(function(){return Math.random()-.5})).sort(function(){return Math.random()-.5}),a.state={users:i,viewexplanation:!1,group:e.group,leaders:Ne,redirect:!1,updating:!1,participate:e.participate},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=JSON.parse(JSON.stringify(e.users));t=(t=t.sort(function(){return Math.random()-.5})).sort(function(){return Math.random()-.5}),e.users!==this.props.users&&this.setState({users:t}),e.group!==this.props.group&&this.setState({group:e.group});var a,n=je(this.state.users);try{for(n.s();!(a=n.n()).done;){var o=a.value;this.state.group.groupabove&&this.state.group.groupabove.members.includes(o._id)&&Ne.push(o)}}catch(r){n.e(r)}finally{n.f()}Ne=Object(u.a)(new Set(Ne)),this.setState({leaders:Ne})}},{key:"approveofuser",value:function(e,t){var a,n=this,o=JSON.parse(JSON.stringify(this.state.users)),r="".concat(this.state.group.title,",").concat(this.state.group.level,",").concat(x.isAuthenticated().user._id),i=Math.round(o.length/25),s=je(o);try{var l=function(){var e,t=a.value,o=[],r=n.state.group.members.map(function(e){return e._id}),i=je(t.votes);try{for(i.s();!(e=i.n()).done;){var s=e.value,l=s.split(",");r.includes(l[2])&&o.push(s)}}catch(u){i.e(u)}finally{i.f()}t.votes=o;var c="".concat(n.state.group.title,",").concat(n.state.group.level);t.votes||(t.votes=[]),t.votes&&(t.votes=t.votes.filter(function(e){return e.startsWith(c)}))};for(s.s();!(a=s.n()).done;)l()}catch(v){s.e(v)}finally{s.f()}var c,h=je(o);try{for(h.s();!(c=h.n()).done;){var d=c.value;d._id==t&&(d.votes.includes(r)||function(){d.votes.push(r);var e=r.split(",");e.pop(),e.join(","),d.votes=d.votes.filter(function(t){return t.startsWith(e)})}())}}catch(v){h.e(v)}finally{h.f()}o=Object(u.a)(new Set(o));var p=JSON.parse(JSON.stringify(o));o.sort(function(e,t){return e.votes.length<t.votes.length?1:-1});var m=o.slice(0,i);this.setState({leaders:m});this.setState({users:p}),fetch("/leaders/voteforleader/"+t+"/"+r,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)});var f,g=je(this.state.users);try{for(g.s();!(f=g.n()).done;){var y=f.value;this.state.group.groupabove.members.includes(y._id)&&m.push(y)}}catch(v){g.e(v)}finally{g.f()}m=Object(u.a)(new Set(m)),this.setState({leaders:m})}},{key:"withdrawapprovalofuser",value:function(e,t){var a,n=JSON.parse(JSON.stringify(this.state.users)),o=(Math.round(n.length/25),"".concat(this.state.group.title,",").concat(this.state.group.level,",").concat(x.isAuthenticated().user._id)),r=je(n);try{for(r.s();!(a=r.n()).done;){var i,s=a.value,l=[],c=this.state.group.members.map(function(e){return e._id}),h=je(s.votes);try{for(h.s();!(i=h.n()).done;){var d=i.value,p=d.split(",");c.includes(p[2])&&l.push(d)}}catch(f){h.e(f)}finally{h.f()}if(s.votes=l,s._id==t){var m=s.votes.filter(function(e){return!(e==o)});m=Object(u.a)(new Set(m)),s.votes=m}}}catch(f){r.e(f)}finally{r.f()}this.setState({users:n});fetch("/leaders/withdrawvoteforleader/"+t+"/"+o,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}},{key:"render",value:function(e){var t,a=this;this.state.users&&(t=this.state.users.map(function(e){var t="".concat(a.state.group.title,",").concat(a.state.group.level);if(e.votes||(e.votes=[]),e.votes){e.votes=e.votes.filter(function(e){return e.startsWith(t)}),e.votes=Object(u.a)(new Set(e.votes));var n,r=[],i=a.state.group.members.map(function(e){return e._id}),s=je(e.votes);try{for(s.s();!(n=s.n()).done;){var l=n.value,c=l.split(",");i.includes(c[2])&&r.push(l)}}catch(b){s.e(b)}finally{s.f()}e.votes=r}var h="".concat(a.state.group.title,",").concat(a.state.group.level,",").concat(x.isAuthenticated().user._id),d=[];if(e.votes.length>0){var p,m=je(e.votes);try{for(m.s();!(p=m.n()).done;){var f,g=p.value.split(","),y=je(a.state.users);try{for(y.s();!(f=y.n()).done;){var v=f.value;v._id==g[2]&&(d.push(v.name),d=Object(u.a)(new Set(d)))}}catch(b){y.e(b)}finally{y.f()}}}catch(b){m.e(b)}finally{m.f()}}var w="".concat(e.votes.length/a.state.group.members.length*100,"%");return console.log("width",w,e.votes),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:e._id,className:"rule"},o.a.createElement("h3",{className:"ruletext"},e.name,"  "),!e.votes.includes(h)&&o.a.createElement("button",{style:{display:"inline"},className:"ruletext",onClick:function(t){return a.approveofuser(t,e._id)}},"Vote For This Person?"),e.votes.includes(h)&&o.a.createElement("button",{style:{display:"inline"},className:"ruletext",onClick:function(t){return a.withdrawapprovalofuser(t,e._id)}},"Withdraw Vote?"),d.length>0&&o.a.createElement("p",{style:{display:"inline"}},"People who voted: "),d&&d.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{style:{display:"inline"}},e,t<d.length-2?", ":t<d.length-1?" and ":"."))}),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:w},className:"percentage"}))))}));var n=this.state.group.members.map(function(e){return e._id});return n=n.includes(x.isAuthenticated().user._id),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginBottom:"20vw"}},o.a.createElement("br",null),o.a.createElement("h2",null,"Group Leaders"),2==this.state.group.level&&o.a.createElement("h4",null,"The highest level group, Australia, has no singular leader, prime minister, president or chancellor"),this.state.leaders.length>0&&this.state.leaders.map(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"leader"},o.a.createElement("h3",{style:{margin:"0.5vw"}},e.name)))}),0==this.state.leaders.length&&o.a.createElement("h4",null,"No leaders"),o.a.createElement("button",{onClick:function(e){return a.setState({viewexplanation:!a.state.viewexplanation})}},"View Explanation"),o.a.createElement("div",{className:"leaderexpl",style:{maxHeight:this.state.viewexplanation?"300vw":"0",overflow:"hidden"}},this.state.users.length<13&&o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Each group larger than 25 members will have two representatives, one male and the other female. If all members are only one sex, they cannot choose any representatives. If the group is smaller than 25 members large, you can still vote for people in this group. These votes will be recorded in the database and counted if the group should become large enough. We have a sorting algorithm that ensures all people outside of the two main sex groups are proportionally represented, however male and female are the largest ones and will mostly be chosen (purely based on population size). Most capitalist parliaments or congresses are less than a third female, giving hugely disproportionate and unfair representation to men. If we hope to reduce the gender pay gap, high cost of childcare, the disproportionate amount of unpaid housework, rates of teenage pregnancy and many other distinctly female problems, a more humanistic political system is needed.")),"Representatives from higher level groups are not allowed to nominate or endorse candidates in lower level groups. This helps to ensure a genuine grassroots organization. There are no election campaigns on this web application. However, you can explain your skills, qualifications and experience on your profile page and others can inspect this. Each candidate will be assessed on their merits by the people they represent. We don't want an oligarchy to limit or influence the choice of candidates. You could also post a resume in your groups for other members to look at and evalutate your credentials. This is intended to create a genuine meritocracy, the choice of leaders or experts should be purely based on their skill, experience, trustworthyness, moral integrity and knowledge. It should have nothing to do with how much money people have to spend on a political marketing campaigns or how much control they have over the media. In order to prevent a situation where people get selected simply because they were first to get any votes, all elected leaders must receive at least 75% approval from their group and the most popular members above this threshold can become representatives. When you choose who to vote for, try to priortise their actual credentials instead of whether or not you like them personally. The democratic social network tries to prevent demagoguery. This is a phenomenon where people gain influence simply with charm and charisma, while they may not actual have the competence for leadership. A demagogue is sort of like a sociopath, very manipulative and cunning, but the term refers particularly to political leaders. It is nice if leaders are likeable and friendly, but this should not be the priority. A real leader tells you what you need to hear, not just what you want to hear. Only two leaders are chosen from each group, however there may be many members who happen to all be equally and most popular. For this reason, every three months, two leaders are chosen randomly from this group."),o.a.createElement("hr",null),n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Vote for Members"),this.state.users.length<1&&o.a.createElement("h4",null,"No members"),t)))}}]),t}(n.Component);function Ae(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ie(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(23);var _e=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={users:e.users,rules:[],group:e.group,page:1,pageNum:[],currentPageData:[],redirect:!1,viewexplanation:!1,updating:!1,socket:e.socket,participate:e.participate},a.updateRules=a.updateRules.bind(Object(g.a)(Object(g.a)(a))),a.sendRuleNotification=a.sendRuleNotification.bind(Object(g.a)(Object(g.a)(a))),a.approveofrule=a.approveofrule.bind(Object(g.a)(Object(g.a)(a))),a.ruleApprovedNotification=a.ruleApprovedNotification.bind(Object(g.a)(Object(g.a)(a))),a.areYouSure=a.areYouSure.bind(Object(g.a)(Object(g.a)(a))),a.areYouNotSure=a.areYouNotSure.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(e){this.getRules()}},{key:"componentWillReceiveProps",value:function(e){e.socket!==this.props.socket&&this.setState({socket:e.socket}),e.users!==this.props.users&&this.setState({users:e.users}),e.group!==this.props.group&&this.setState({group:e.group})}},{key:"decidePage",value:function(e,t){var a=this.state.rules.slice(10*t-10,10*t);this.setState({page:t,currentPageData:a})}},{key:"getRules",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rules/getrules/"+this.props.groupId).then(function(e){return e.json()}).then(function(e){var a=e;a.reverse(),t.setState({rules:a});var n=a.slice(0,10);t.setState({currentPageData:n});for(var o=Math.ceil(e.length/10),r=[];o>0;)r.push(o),o--;r.reverse(),t.setState({pageNum:r})}).catch(function(e){console.error(e)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateRules",value:function(e){var t=JSON.parse(JSON.stringify(this.state.rules));t.reverse(),t.push(e),t.reverse();var a=t.slice(10*this.state.page-10,10*this.state.page);this.setState({rules:t,currentPageData:a})}},{key:"deleteRule",value:function(){var e=Object(l.a)(s.a.mark(function e(t,a){var n,o,r,i,l,c,u,h,d,p,m,f,g,y,v,w,b;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return e._id!=a._id},n=JSON.parse(JSON.stringify(this.state.rules)),r=n.filter(o),i=r.slice(10*this.state.page-10,10*this.state.page),this.setState({rules:r,currentPageData:i}),l={method:"delete",headers:{"Content-Type":"application/json"},body:""},fetch("/rules/"+a._id,l).then(function(e){console.log("res.data",e.data)}).catch(function(e){console.error(e)}),c=new Date,u=c.getTime(),h="The rule ".concat(a.rule," has been deleted."),d=x.isAuthenticated().user._id,p=x.isAuthenticated().user.name,m=u,"text",f=this.state.group._id,g=this.state.group.title,this.state.socket.emit("Input Chat Message",{chatMessage:h,userId:d,userName:p,nowTime:m,type:"text",groupId:f,groupTitle:g}),y=(y=JSON.parse(JSON.stringify(this.state.users))).filter(function(e){return e.rules}),v=y.map(function(e){return e.email}),w={emails:v,subject:"Rule Deleted",message:"In the group called ".concat(this.state.group.title," at level ").concat(this.state.group.level,", The rule ").concat(a.rule," has been deleted\n        because of lack of support")},b={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)},e.next=24,fetch("/groups/sendemailnotification",b).then(function(e){console.log("res.data",e.data)}).catch(function(e){console.error(e)});case 24:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"approveofrule",value:function(e,t){var a=(new Date).getTime(),n=JSON.parse(JSON.stringify(this.state.rules));var o,r=Ae(n);try{for(r.s();!(o=r.n()).done;){var i,s=o.value,l=[],c=this.state.group.members.map(function(e){return e._id}),u=Ae(s.approval);try{for(u.s();!(i=u.n()).done;){var h=i.value;c.includes(h)&&l.push(h)}}catch(p){u.e(p)}finally{u.f()}if(s.approval=l,s._id==t&&!s.approval.includes(x.isAuthenticated().user._id)){s.approval.push(x.isAuthenticated().user._id);var d=s.approval.length/this.state.users.length*100;d>75&&this.ruleApprovedNotification(s),d<75&&a-s.timecreated>6048e5&&this.deleteRule(null,s),d>=10&&!s.notificationsent&&this.sendRuleNotification(s),d>75&&this.state.group.level>0&&0==s.sentdown&&(s.sentdown=!0,this.sendRuleDown(s))}}}catch(p){r.e(p)}finally{r.f()}this.setState({rules:n});n.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:n});fetch("/rules/approveofrule/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){}).catch(function(e){console.error(e)})}},{key:"sendRuleDown",value:function(){var e=Object(l.a)(s.a.mark(function e(t){var a,n,o,r,i,l,c,h;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"put",headers:{"Content-Type":"application/json"},body:""},fetch("/rules/marksentdown/"+t._id,a).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),n=[],o=Ae(this.state.group.groupsbelow);try{for(o.s();!(r=o.n()).done;)(i=r.value).groupsbelow&&n.push.apply(n,Object(u.a)(i.groupsbelow)),n.push(i._id)}catch(s){o.e(s)}finally{o.f()}for(l=0,c=n;l<c.length;l++)h=c[l],fetch("/rules/sendruledown/"+t._id+"/"+h,a).catch(function(e){console.error(e)});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"withdrawapprovalofrule",value:function(e,t){var a=(new Date).getTime(),n=JSON.parse(JSON.stringify(this.state.rules));function o(e){return e!=x.isAuthenticated().user._id}var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s._id==t){var l=s.approval.filter(o);s.approval=l}var c=s.approval.length/this.state.users.length*100;c>=10&&!s.notificationsent&&this.sendRuleNotification(s),c<75&&a-s.timecreated>6048e5&&this.deleteRule(null,s)}}catch(h){i.e(h)}finally{i.f()}this.setState({rules:n});var u=n.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:u});fetch("/rules/withdrawapprovalofrule/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}},{key:"sendRuleNotification",value:function(e){if(!e.notificationsent){var t,a=JSON.parse(JSON.stringify(this.state.rules)),n=Ae(a);try{for(n.s();!(t=n.n()).done;){var o=t.value;o._id==e._id&&(o.notificationsent=!0)}}catch(y){n.e(y)}finally{n.f()}this.setState({rules:a});var r=a.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:r});var i=JSON.parse(JSON.stringify(this.state.users)),s=(i=i.filter(function(e){return e.rules})).map(function(e){return e.email}),l=(new Date).getTime(),c="Rule suggested: ".concat(e.rule),u=x.isAuthenticated().user._id,h=x.isAuthenticated().user.name,d=l,p=this.state.group._id,m=this.state.group.title;this.state.socket.emit("Input Chat Message",{chatMessage:c,userId:u,userName:h,nowTime:d,type:"text",groupId:p,groupTitle:m});var f={emails:s,subject:"New Rule Suggestion",message:"In the group called ".concat(this.state.group.title," at level ").concat(this.state.group.level,",").concat(e.createdby.name," suggested the rule: ").concat(e.rule)},g={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)};fetch("/groups/sendemailnotification",g).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/rules/notificationsent/"+e._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){}).catch(function(e){console.error(e)})}}},{key:"ruleApprovedNotification",value:function(e){var t=JSON.parse(JSON.stringify(this.state.rules));if(!e.ratificationnotificationsent){var a,n=Ae(t);try{for(n.s();!(a=n.n()).done;){var o=a.value;o._id==e._id&&(o.ratificationnotificationsent=!0)}}catch(g){n.e(g)}finally{n.f()}var r=(new Date).getTime(),i="Rule approved by 75%: ".concat(e.rule),s=x.isAuthenticated().user._id,l=x.isAuthenticated().user.name,c=r,u=this.state.group._id,h=this.state.group.title;this.state.socket.emit("Input Chat Message",{chatMessage:i,userId:s,userName:l,nowTime:c,type:"text",groupId:u,groupTitle:h}),this.setState({rules:t});var d=t.slice(10*this.state.page-10,10*this.state.page);this.setState({currentPageData:d});var p=JSON.parse(JSON.stringify(this.state.users)),m={emails:(p=p.filter(function(e){return e.rulesapproved})).map(function(e){return e.email}),subject:"A rule has been approved by the group",message:"The group called ".concat(this.state.group.title," has a new rule: ").concat(e.rule)},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)};fetch("/groups/sendemailnotification",f).then(function(e){}).catch(function(e){console.error(e)});fetch("/rules/ruleratificationnotificationsent/"+e._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){}).catch(function(e){console.error(e)})}}},{key:"areYouSure",value:function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(this.state.rules));console.log(a);var n,o=Ae(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!0)}}catch(s){o.e(s)}finally{o.f()}console.log(a);var i=a.slice(10*this.state.page-10,10*this.state.page);this.setState({rules:a,currentPageData:i})}},{key:"areYouNotSure",value:function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(this.state.rules));console.log(a);var n,o=Ae(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!1)}}catch(s){o.e(s)}finally{o.f()}console.log(a);var i=a.slice(10*this.state.page-10,10*this.state.page);this.setState({rules:a,currentPageData:i})}},{key:"render",value:function(e){var t=this,a=(new Date).getTime(),n=o.a.createElement("h3",null,"no rules");this.state.rules&&this.state.rules.length>0&&(n=this.state.currentPageData.map(function(e){var n,r=o.a.createElement(o.a.Fragment,null),i=[],s=t.state.group.members.map(function(e){return e._id}),l=Ae(e.approval);try{for(l.s();!(n=l.n()).done;){var c=n.value;s.includes(c)&&i.push(c)}}catch(y){l.e(y)}finally{l.f()}e.approval=i,t.state.users&&(r=Math.round(e.approval.length/t.state.users.length*100));var u,h=[],d=Ae(t.state.users);try{for(d.s();!(u=d.n()).done;){var p,m=u.value,f=Ae(e.approval);try{for(f.s();!(p=f.n()).done;){p.value==m._id&&h.push(m.name)}}catch(y){f.e(y)}finally{f.f()}}}catch(y){d.e(y)}finally{d.f()}r<75&&a-e.timecreated>6048e5&&t.deleteRule(null,e);var g="".concat(e.approval.length/t.state.users.length*100,"%");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:e._id,className:"rule"},e.createdby&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"ruletext"},e.rule,!e.rule.endsWith(".")&&o.a.createElement(o.a.Fragment,null,",")," Suggested by ",e.createdby.name),t.state.group.groupabove&&o.a.createElement(o.a.Fragment,null,(e.createdby._id==x.isAuthenticated().user._id||t.state.group.groupabove.members.includes(x.isAuthenticated().user._id))&&r<75&&!e.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",id:e.title,onClick:function(a){return t.areYouSure(a,e)}},"Delete Rule?")),e.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",id:e.title,onClick:function(a){return t.areYouNotSure(a,e)}},"Not sure"),e.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",id:e.title,onClick:function(a){return t.deleteRule(a,e)}},"Are you sure?")),t.state.group.level==e.level&&o.a.createElement(o.a.Fragment,null,!e.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext approvalbutton",onClick:function(a){return t.approveofrule(a,e._id)}},"Approve this rule?"),e.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext approvalbutton",onClick:function(a){return t.withdrawapprovalofrule(a,e._id)}},"Withdraw Approval?")),o.a.createElement("h4",{className:"ruletext"},"  ",e.explanation,e.explanation&&o.a.createElement(o.a.Fragment,null,","),"  "),o.a.createElement("h4",{className:"ruletext"},"Rule Level ",e.level),t.state.group.level==e.level&&o.a.createElement(o.a.Fragment,null,t.state.users&&o.a.createElement("h4",{className:"ruletext"},", ",r,"% of members approve this rule, ",e.approval.length,"/",t.state.users.length,". ",h.length>0&&o.a.createElement("h4",{style:{display:"inline"}},"Approvees=")),h&&h.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",{className:"ruletext"},e,t<h.length-2?", ":t<h.length-1?" and ":"."))}),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:g},className:"percentage"})))))}));var r=this.state.group.members.map(function(e){return e._id});return r=r.includes(x.isAuthenticated().user._id),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginBottom:"20vw"}},r&&o.a.createElement("h2",null,"Propose a Rule"),r&&o.a.createElement(Te,{updateRules:this.updateRules,groupId:this.props.groupId,level:this.state.group.level}),o.a.createElement("button",{onClick:function(e){return t.setState({viewexplanation:!t.state.viewexplanation})}},"View Explanation"),o.a.createElement("div",{className:"leaderexpl",style:{maxHeight:this.state.viewexplanation?"300vw":"0",overflow:"hidden"}},o.a.createElement("p",null,"Rules that have less than 75% approval and are more than a week old will be deleted. There are some rules you cannot directly vote on because they have been approved by representatives of a larger group. If you disagree, consult with your elected representatives and they may be able to convince you, otherwize you can withdraw your vote from them. We live in a very complicated modern world, you cannot be expected to understand everything or even most things, but we can try to create circumstances that encourage trust between representatives and their constituency. Democracy book tries to achieve this by having fairly small groups, encouraging a closer relationship between elected delegates and their people. You may have important information that the delegate can pass onto the representative assembly. It is important that rules for larger groups be created by responsible leaders who have consulted with their people, thoroughly discussed the issue and tried to arrive at the most informed decision that as many people as possible are happy but also occasionally using authority to overule people if absolutely necessary. Coercion is always inferior to persuasion. People comply and follow a rule much more willingly and enthusiastically if they understand and agree with it or trust the people who created it. Force should only be used to impose rules in dangerous or dire circumstances where persuasion has failed.")),o.a.createElement("h2",null,"Group Rules"),this.state.pageNum.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),this.state.pageNum.length>1&&this.state.pageNum&&this.state.rules&&this.state.pageNum.map(function(e,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:a+1==t.state.page?"0.5":"1"},onClick:function(a){return t.decidePage(a,e)}},e))}),n,this.state.pageNum.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),this.state.pageNum.length>1&&this.state.pageNum&&this.state.rules&&this.state.pageNum.map(function(e,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:a+1==t.state.page?"0.5":"1"},onClick:function(a){return t.decidePage(a,e)}},e))})))}}]),t}(n.Component);function Re(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Pe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Pe(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var De=a(23);function Fe(e){var t,a=Object(n.useState)([]),r=Object(c.a)(a,2),i=r[0],s=r[1],l=Object(n.useState)(e.poll),h=Object(c.a)(l,2),d=h[0],p=h[1],m=Object(n.useState)(!1),f=Object(c.a)(m,2),g=f[0],y=f[1],v=Object(n.useState)(e.group),w=Object(c.a)(v,2),b=w[0],E=(w[1],o.a.useRef(""));function S(e,t){var a=JSON.parse(JSON.stringify(d)),n=0;a.approval.includes(x.isAuthenticated().user._id)||a.approval.push(x.isAuthenticated().user._id);var o,r=[],i=b.members.map(function(e){return e._id}),s=Re(a.approval);try{for(s.s();!(o=s.n()).done;){var l=o.value;i.includes(l)&&r.push(l)}}catch(c){s.e(c)}finally{s.f()}a.approval=r,b.members.length>0&&(n=Math.round(a.approval.length/b.members.length*100)),n>75&&function(){if(!d.sentdown){var e=JSON.parse(JSON.stringify(d));e.sentdown=!0,p(e);var t,a=[],n=Re(b.groupsbelow);try{for(n.s();!(t=n.n()).done;){var o=t.value;a.push(o.members);var r,i=Re(o.groupsbelow);try{for(i.s();!(r=i.n()).done;){var s=r.value;a.push(s.members)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}var l={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("/polls/marksentdown/"+d._id,l).then(function(e){console.log(e)}).catch(function(e){console.error(e)});var h,m=[],f=Re(b.groupsbelow);try{for(f.s();!(h=f.n()).done;){var g=h.value;g.groupsbelow&&m.push.apply(m,Object(u.a)(g.groupsbelow)),m.push(g._id)}}catch(c){f.e(c)}finally{f.f()}for(var y=0,v=m;y<v.length;y++){var w=v[y];fetch("/polls/sendpolldown/"+d._id+"/"+w,l).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}}(),p(a);fetch("/polls/approveofsendingpolldown/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}Object(n.useEffect)(function(){fetch("/polls/getsuggestions/"+e.poll._id).then(function(e){return e.json()}).then(function(e){s(e.data)}).catch(function(e){console.error(e)})},[]);var k=o.a.createElement(o.a.Fragment,null);if(i&&e.users){(new Date).getTime();i.length>=3&&!e.poll.notificationsent&&e.sendPollNotification(e.poll),k=i.map(function(t){var a,n=o.a.Fragment,r=[],l=b.members.map(function(e){return e._id}),c=Re(t.approval);try{for(c.s();!(a=c.n()).done;){var u=a.value;l.includes(u)&&r.push(u)}}catch(w){c.e(w)}finally{c.f()}t.approval=r,n=Math.round(t.approval.length/b.members.length*100);var h,p=[],m=Re(b.members);try{for(m.s();!(h=m.n()).done;){var f,g=h.value,y=Re(t.approval);try{for(y.s();!(f=y.n()).done;){f.value==g._id&&p.push(g.name)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){m.e(w)}finally{m.f()}var v="".concat(t.approval.length/e.users.length*100,"%");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:t._id,className:"pollbox"},o.a.createElement("h5",{className:"ruletext"},t.suggestion,", suggested by ",t.createdby.name,", "),o.a.createElement("h5",{className:"ruletext"},n,"% of members in this group approve this suggestion, ",t.approval.length,"/",b.members.length),b.groupabove&&o.a.createElement(o.a.Fragment,null,(t.createdby._id==x.isAuthenticated().user._id||b.groupabove.members.includes(x.isAuthenticated().user._id))&&n<75&&!t.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){return function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(i));console.log(a);var n,o=Re(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!0)}}catch(w){o.e(w)}finally{o.f()}console.log(a),s(a)}(0,t)}},"Delete Suggestion?"),t.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){return function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(i));console.log(a);var n,o=Re(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!1)}}catch(w){o.e(w)}finally{o.f()}console.log(a),s(a)}(0,t)}},"Not sure"),t.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){return function(e,t){var a=JSON.parse(JSON.stringify(i)).filter(function(e){return e._id!==t._id});s(a),fetch("/polls/deletesuggestion/"+t._id,{method:"Delete",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}(0,t)}},"Are you sure?")),!t.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext",onClick:function(a){return function(t,a){console.log(a);var n,o=JSON.parse(JSON.stringify(i)),r=Re(o);try{for(r.s();!(n=r.n()).done;){var l,c=n.value,u=[],h=b.members.map(function(e){return e._id}),d=Re(c.approval);try{for(d.s();!(l=d.n()).done;){var p=l.value;h.includes(p)&&u.push(p)}}catch(w){d.e(w)}finally{d.f()}c.approval=u,c._id==a&&(c.approval.includes(x.isAuthenticated().user._id)||c.approval.push(x.isAuthenticated().user._id),s(o))}}catch(w){r.e(w)}finally{r.f()}i.length>=3&&!e.poll.notificationsent&&e.sendPollNotification(e.poll),s(o),fetch("/polls/approveofsuggestion/"+a+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).catch(function(e){console.error(e)})}(0,t._id)}},"Approve this suggestion?"),t.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{className:"ruletext",onClick:function(e){return function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(i));function n(e){return e!=x.isAuthenticated().user._id}var o,r=Re(a);try{for(r.s();!(o=r.n()).done;){var l=o.value;if(l._id==t){var c=l.approval.filter(n);l.approval=c}}}catch(w){r.e(w)}finally{r.f()}s(a),fetch("/polls/withdrawapprovalofsuggestion/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).catch(function(e){console.error(e)})}(0,t._id)}},"Withdraw Approval?"),p&&p.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",{className:"ruletext"},e,t<p.length-2?", ":t<p.length-1?" and ":"."))}),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:v},className:"percentage"})),d&&b.level>d.level&&o.a.createElement("p",null,"This poll has been passed down by a higher group, all of it's children groups can vote on this question")))})}var C,T=o.a.createElement(o.a.Fragment,null),j=[],O=b.members.map(function(e){return e._id}),N=JSON.parse(JSON.stringify(d)),A=Re(N.approval);try{for(A.s();!(C=A.n()).done;){var I=C.value;O.includes(I)&&j.push(I)}}catch(W){A.e(W)}finally{A.f()}N.approval=j,b.members&&(T=Math.round(N.approval.length/b.members.length*100));var _,R=[],P=Re(b.members);try{for(P.s();!(_=P.n()).done;){var D,F=_.value,U=Re(N.approval);try{for(U.s();!(D=U.n()).done;){D.value==F._id&&R.push(F.name)}}catch(W){U.e(W)}finally{U.f()}}}catch(W){P.e(W)}finally{P.f()}var M="".concat(N.approval.length/b.members.length*100,"%");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",{className:"pollbox"},o.a.createElement("h3",{className:"ruletext"},e.poll.pollquestion,"  "),e.poll.createdby&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",{className:"ruletext"},"Poll Created By ",e.poll.createdby.name),b.groupabove&&o.a.createElement(o.a.Fragment,null,(e.poll.createdby._id==x.isAuthenticated().user._id||b.groupabove.members.includes(x.isAuthenticated().user._id))&&!g&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){y(!0)}},"Delete Poll?")),g&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){y(!1)}},"Not sure"),g&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(t){return e.deletePoll(t,e.poll)}},"Are you sure?")),o.a.createElement("form",null,o.a.createElement("div",null,o.a.createElement("h5",{className:"ruletext"},"Create Poll Suggestion"),o.a.createElement("button",(t={className:"pollsuggestionbutton"},Object(J.a)(t,"className","ruletext"),Object(J.a)(t,"onClick",function(t){return function(t){t.preventDefault();var a=(new Date).getTime(),n=De.Types.ObjectId(),o={_id:n,suggestion:E.current.value,pollid:e.poll._id,timecreated:a,approval:[x.isAuthenticated().user._id],createdby:x.isAuthenticated().user._id},r=JSON.parse(JSON.stringify(o));r.createdby=x.isAuthenticated().user;var l=JSON.parse(JSON.stringify(i));l.reverse(),l.push(r),l.reverse(),s(l);var c={method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}};fetch("/polls/createpollsuggestion/"+n,c).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}(t)}),t),"New Poll Suggestion?"),o.a.createElement("textarea",{style:{width:"75vw"},ref:E,id:"story",rows:"2"})))),o.a.createElement("div",null,k,b.level==d.level&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"pollbox"},b.level>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",{className:"ruletext"},"Send Down?"),!d.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{onClick:function(e){return S(0,d._id)}},"Send poll down to children groups?"),d.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{onClick:function(e){return function(e,t){var a=JSON.parse(JSON.stringify(d)),n=a.approval.filter(function(e){return e!=x.isAuthenticated().user._id});a.approval=n,p(a),fetch("/polls/withdrawapprovalofsendingpolldown/"+t+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}(0,d._id)}},"Don't send poll down to children groups?"),b.members&&o.a.createElement("h4",{className:"ruletext"},T,"% of members want to send this poll to lower groups, ",d.approval.length,"/",b.members.length,". ",d.approval.length>0&&o.a.createElement("h4",{style:{display:"inline"}},"Approvees=")),R&&R.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",{className:"ruletext"},e,t<R.length-2?", ":t<R.length-1?" and ":"."))}),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:M},className:"percentage"}))))))))}function Je(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ue(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ue(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Me=a(23),We=6048e5;function Ye(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],i=a[1],h=Object(n.useState)(e.users["".concat(e.users.length-1)]),d=Object(c.a)(h,2),p=d[0],m=d[1],f=Object(n.useState)(e.group),g=Object(c.a)(f,2),y=g[0],v=g[1],w=Object(n.useState)([e.group]),b=Object(c.a)(w,2),E=b[0],S=b[1],k=Object(n.useState)(""),C=Object(c.a)(k,2),T=C[0],j=C[1],O=Object(n.useState)("cannot post"),N=Object(c.a)(O,2),A=N[0],I=N[1],_=Object(n.useState)(!1),R=Object(c.a)(_,2),P=R[0],D=R[1],F=Object(n.useState)(!1),J=Object(c.a)(F,2),U=J[0],M=(J[1],Object(n.useState)(!1)),W=Object(c.a)(M,2),Y=W[0],q=W[1],L=Object(n.useState)(""),B=Object(c.a)(L,2),G=B[0],H=B[1],z=Object(n.useState)(0),V=Object(c.a)(z,2),K=V[0],X=V[1],$=Object(n.useState)([]),Z=Object(c.a)($,2),Q=Z[0],ee=Z[1],te=Object(n.useState)(""),ae=Object(c.a)(te,2),ne=(ae[0],ae[1],Object(n.useState)(1)),oe=Object(c.a)(ne,2),re=oe[0],ie=oe[1],se=Object(n.useState)(e.socket),le=Object(c.a)(se,2),ue=le[0],he=le[1],de=Object(n.useState)([]),pe=Object(c.a)(de,2),me=pe[0],fe=pe[1],ge=Object(n.useState)([]),ye=Object(c.a)(ge,2),ve=ye[0],we=ye[1];o.a.useRef("");function be(e,t){var a=Q.slice(10*t-10,10*t);ie(t),we(a)}function Ee(){return(Ee=Object(l.a)(s.a.mark(function t(a){var n,o,r,i,l,c,u,h,d,m,f,g,v,w,b,S,k,C,T;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(q(!0),a.preventDefault(),n=new Date,o=n.getTime(),r="created a restriction for ".concat(p.name),i=x.isAuthenticated().user._id,l=x.isAuthenticated().user.name,c=o,"text",u=y.title,h=y._id,ue.emit("Input Chat Message",{chatMessage:r,userId:i,userName:l,nowTime:c,type:"text",groupId:h,groupTitle:u}),d=[],p.restrictions){m=Je(p.restrictions);try{for(m.s();!(f=m.n()).done;)g=f.value,v="".concat(g.restriction).concat(g.duration),d.push(v)}catch(s){m.e(s)}finally{m.f()}}if(w="".concat(A).concat(K),d.includes(w)){t.next=29;break}return n=new Date,o=n.getTime(),b=(b=Me.Types.ObjectId()).toString(),S={_id:b,usertorestrict:p._id,restriction:A,createdby:x.isAuthenticated().user._id,explanation:G,groupId:e.groupId,groupIds:E,duration:K,timecreated:o},k={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)},t.next=24,fetch("/groups/createuserrrestriction",k).then(function(e){return e.json()}).catch(function(e){console.error(e)});case 24:return C=t.sent,T={method:"put",headers:{"Content-Type":"application/json"},body:""},t.next=28,fetch("/groups/addrestrictiontouser/"+p._id+"/"+C.data._id,T).then(function(e){return e.json()}).catch(function(e){console.error(e)});case 28:t.sent;case 29:q(!1),D(!0),setTimeout(function(){D(!1)},5e3);case 32:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Se(e,t){!function(e){ke.apply(this,arguments)}(t);JSON.parse(JSON.stringify(Q));var a=(new Date).getTime(),n="deleted a restriction poll for ".concat(t.usertorestrict.name," ").concat(t.restriction," for ").concat(t.duration," days"),o=x.isAuthenticated().user._id,r=x.isAuthenticated().user.name,i=a,s=y.title,l=y._id;ue.emit("Input Chat Message",{chatMessage:n,userId:o,userName:r,nowTime:i,type:"text",groupId:l,groupTitle:s});fetch("/polls/deleterestrictionpoll/"+t._id,{method:"Delete",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}function ke(){return(ke=Object(l.a)(s.a.mark(function t(a){var n,o,r,i,l,c,u,h,d,p,m,f,g,v,w;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(JSON.stringify(Q)),o="The restriction, ".concat(a.restriction," for ").concat(a.duration," days, has been deleted for ").concat(a.usertorestrict.name),r=x.isAuthenticated().user._id,i=x.isAuthenticated().user.name,l=je,"text",c=y.title,u=y._id,ue.emit("Input Chat Message",{chatMessage:o,userId:r,userName:i,nowTime:l,type:"text",groupId:u,groupTitle:c}),ee(n),h=n.slice(10*re-10,10*re),we(h),d=(d=JSON.parse(JSON.stringify(e.users))).filter(function(e){return e.restriction}),p=d.map(function(e){return e.email}),m={emails:p,subject:"Restriction Deleted",message:"The restriction ".concat(a.restriction," for ").concat(a.duration," in the group ").concat(y.title," at level ").concat(y.level,"\n                has been deleted for ").concat(a.usertorestrict.name)},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)},fetch("/groups/sendemailnotification",f).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),g={method:"Delete",body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}},t.next=21,fetch("/groups/deleterestriction",g).then(function(e){return e.json()}).then(function(e){return e.data}).catch(function(e){console.error(e)});case 21:if(v=t.sent,console.log("returned restriction",v),!v){t.next=27;break}return w={method:"Put",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}},t.next=27,fetch("/groups/removerestrictionfromuser/"+v._id+"/"+a.usertorestrict._id,w).then(function(e){return e}).catch(function(e){console.error(e)});case 27:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Ce(t,a){var n,o=Je(JSON.parse(JSON.stringify(Q)));try{var r=function(){var t,o=n.value,r=[],i=y.members.map(function(e){return e._id}),c=Je(o.approval);try{for(c.s();!(t=c.n()).done;){var u=t.value;i.includes(u)&&r.push(u)}}catch(O){c.e(O)}finally{c.f()}o.approval=r;var h=void 0;if(o._id==a._id){o.approval.includes(x.isAuthenticated().user._id)||o.approval.push(x.isAuthenticated().user._id),h=Math.round(o.approval.length/y.members.length*100);var d=(new Date).getTime();console.log("approving restriction",h),h>=10&&!o.notificationsent&&function(t){if(!t.notificationsent){var a,n=JSON.parse(JSON.stringify(Q)),o=Je(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r._id==t._id&&(r.notificationsent=!0)}}catch(O){o.e(O)}finally{o.f()}var i="The restriction, ".concat(t.restriction," for ").concat(t.duration," days, has been suggested for ").concat(p.name),s=x.isAuthenticated().user._id,l=x.isAuthenticated().user.name,c=je,u=y.title,h=y._id;ue.emit("Input Chat Message",{chatMessage:i,userId:s,userName:l,nowTime:c,type:"text",groupId:h,groupTitle:u}),ee(n);var d=n.slice(10*re-10,10*re);we(d);var m=JSON.parse(JSON.stringify(e.users)),f=(m=m.filter(function(e){return e.restriction})).map(function(e){return e.email}),g={emails:f,subject:"New Restriction Suggestion In Group Jury",message:"".concat(t.createdby.name," suggested a restriction ").concat(t.restriction," for ").concat(t.usertorestrict.name," in the group ").concat(y.title," at level ").concat(y.level)},v={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)};fetch("/groups/sendemailnotification",v).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/polls/restrictionnotificationsent/"+t._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}(o),h<75&&d-o.timecreated>We&&Se(0,o)}var m,f={},g=Je(e.users);try{for(g.s();!(m=g.n()).done;){var v=m.value;if(v._id==o.usertorestrict._id){var w=[];if((f=v).restrictions){var b,S=Je(f.restrictions);try{for(S.s();!(b=S.n()).done;){var k=b.value,C="".concat(k.restriction).concat(k.duration);w.push(C)}}catch(O){S.e(O)}finally{S.f()}}var T="".concat(o.restriction).concat(o.duration);if(!w.includes(T)&&h>75){var j=function(){var e=Object(l.a)(s.a.mark(function e(){var t,a,n,r,i,l,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getTime(),n=(n=Me.Types.ObjectId()).toString(),r={_id:n,usertorestrict:o.usertorestrict._id,restriction:o.restriction,explanation:o.explanation,groupIds:E,duration:o.duration,timecreated:a},i={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=8,fetch("/groups/createuserrrestriction",i).then(function(e){return e.json()}).catch(function(e){console.error(e)});case 8:return l=e.sent,c={method:"put",headers:{"Content-Type":"application/json"},body:""},e.next=12,fetch("/groups/addrestrictiontouser/"+o.usertorestrict._id+"/"+l.data._id,c).then(function(e){return e.json()}).catch(function(e){console.error(e)});case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Te(o),j()}}}}catch(O){g.e(O)}finally{g.f()}};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}fetch("/polls/approveofrestriction/"+a._id+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}function Te(t){var a=JSON.parse(JSON.stringify(Q));if(!t.ratificationnotificationsent){var n,o=Je(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.ratificationnotificationsent=!0)}}catch(g){o.e(g)}finally{o.f()}ee(a);var i=a.slice(10*re-10,10*re);we(i);var s=JSON.parse(JSON.stringify(e.users)),l="The restriction, ".concat(t.restriction," for ").concat(t.duration," days, has been approved for ").concat(t.usertorestrict.name),c=x.isAuthenticated().user._id,u=x.isAuthenticated().user.name,h=je,d=y.title,p=y._id;ue.emit("Input Chat Message",{chatMessage:l,userId:c,userName:u,nowTime:h,type:"text",groupId:p,groupTitle:d});var m={emails:(s=s.filter(function(e){return e.restrictionsapproved})).map(function(e){return e.email}),subject:"A restriction has been approved by group jury",message:"The restriction, ".concat(t.restriction," for ").concat(t.duration," days, has been approved for ").concat(t.usertorestrict.name,"\n                in the group ").concat(y.title," at level ").concat(y.level)},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)};fetch("/groups/sendemailnotification",f).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/polls/restrictionratificationnotificationsent/"+t._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}Object(n.useEffect)(function(){he(e.socket),v(e.group);var t=[];if(e.group.groupsbelow){t.push(e.group._id);var a,n=Je(e.group.groupsbelow);try{for(n.s();!(a=n.n()).done;){var o=a.value;if(o._id?t.push(o._id):t.push(o),o.groupsbelow){var r,i=Je(o.groupsbelow);try{for(i.s();!(r=i.n()).done;){var s=r.value;s._id?t.push(s._id):t.push(s)}}catch(l){i.e(l)}finally{i.f()}}}}catch(l){n.e(l)}finally{n.f()}}t=t.filter(function(e){return e}),t=Object(u.a)(new Set(t)),console.log("allgroups",t),m(e.users["".concat(e.users.length-1)]),S(t)},[e]),Object(n.useEffect)(function(){fetch("/polls/getrestrictionpolls/"+e.groupId).then(function(e){return e.json()}).then(function(e){var t=e.data;t.reverse(),ee(t);var a=t.slice(0,10);we(a);for(var n=Math.ceil(e.data.length/10),o=[];n>0;)o.push(n),n--;o.reverse(),fe(o)}).catch(function(e){console.error(e)})},[]);var je=(new Date).getTime(),Oe=ve.map(function(t,a){var n,r=o.a.createElement(o.a.Fragment,null),i=[],s=y.members.map(function(e){return e._id}),l=Je(t.approval);try{for(l.s();!(n=l.n()).done;){var c=n.value;s.includes(c)&&i.push(c)}}catch(v){l.e(v)}finally{l.f()}t.approval=i,e.users&&(r=Math.round(t.approval.length/e.users.length*100));var u,h=[],d=Je(e.users);try{for(d.s();!(u=d.n()).done;){var p,m=u.value,f=Je(t.approval);try{for(f.s();!(p=f.n()).done;){p.value==m._id&&h.push(m.name)}}catch(v){f.e(v)}finally{f.f()}}}catch(v){d.e(v)}finally{d.f()}var g="".concat(t.approval.length/e.users.length*100,"%");return r<75&&je-t.timecreated>We&&Se(0,t),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:t._id,className:"postbox"},o.a.createElement("div",{className:"juryboxform"},o.a.createElement("h4",{className:"ruletext"},o.a.createElement("strong",null,"Restriction:")," ",t.restriction," for ",t.duration," days, "),o.a.createElement("h4",{className:"ruletext"},o.a.createElement("strong",null,"User to Restrict:")," ",t.usertorestrictname," ,"),o.a.createElement("h4",{className:"ruletext"},o.a.createElement("strong",null,"Created By:")," ",t.createdby.name," ,"),e.users&&o.a.createElement("h4",{className:"ruletext"},r,"% of members approve this restriction, ",t.approval.length,"/",e.users.length),t.approval.length>0&&o.a.createElement("h4",{className:"ruletext"},", approvees="),h&&h.map(function(e,t){return o.a.createElement("h4",{className:"ruletext"}," ",e,t<h.length-2?", ":t<h.length-1?" and ":".")}),!t.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{style:{margin:"0.5vw"},className:"ruletext",onClick:function(e){Ce(0,t),function(e,t){var a,n=JSON.parse(JSON.stringify(Q)),o=Je(n);try{for(o.s();!(a=o.n()).done;){var r,i=a.value,s=[],l=y.members.map(function(e){return e._id}),c=Je(i.approval);try{for(c.s();!(r=c.n()).done;){var u=r.value;l.includes(u)&&s.push(u)}}catch(v){c.e(v)}finally{c.f()}i.approval=s;var h=void 0;if(i._id==t._id){i.approval.includes(x.isAuthenticated().user._id)||i.approval.push(x.isAuthenticated().user._id),h=Math.round(i.approval.length/y.members.length*100),console.log("appr restriction",h),ee(n);var d=n.slice(10*re-10,10*re);we(d)}}}catch(v){o.e(v)}finally{o.f()}}(0,t)}},"Approve?"),t.approval.includes(x.isAuthenticated().user._id)&&o.a.createElement("button",{style:{margin:"0.5vw"},className:"ruletext",onClick:function(a){return function(t,a){var n=JSON.parse(JSON.stringify(Q));function o(e){return e!=x.isAuthenticated().user._id}var r,i=Je(n);try{for(i.s();!(r=i.n()).done;){var s,l=r.value,c=[],u=y.members.map(function(e){return e._id}),h=Je(l.approval);try{for(h.s();!(s=h.n()).done;){var d=s.value;u.includes(d)&&c.push(d)}}catch(v){h.e(v)}finally{h.f()}if(l.approval=c,l._id==a._id){var p=l.approval.filter(o);l.approval=p}var m=(new Date).getTime(),f=0;e.users&&(f=Math.round(l.approval.length/e.users.length*100)),f<75&&m-l.timecreated>We&&Se(0,l)}}catch(v){i.e(v)}finally{i.f()}ee(n);var g=n.slice(10*re-10,10*re);we(g),fetch("/polls/withdrawapprovalofrestriction/"+a._id+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}(0,t)}},"Withdraw Approval?"),y.groupabove&&o.a.createElement(o.a.Fragment,null,(t.createdby&&t.createdby._id==x.isAuthenticated().user._id||y.groupabove.members.includes(x.isAuthenticated().user._id))&&!t.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){return function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(Q));console.log(a);var n,o=Je(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!0)}}catch(v){o.e(v)}finally{o.f()}console.log(a);var i=a.slice(10*re-10,10*re);ee(a),we(i)}(0,t)}},"Delete Restriction Poll?")),t.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){return function(e,t){console.log(t);var a=JSON.parse(JSON.stringify(Q));console.log(a);var n,o=Je(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r._id==t._id&&(r.areyousure=!1)}}catch(v){o.e(v)}finally{o.f()}console.log(a);var i=a.slice(10*re-10,10*re);ee(a),we(i)}(0,t)}},"Not sure"),t.areyousure&&o.a.createElement("button",{className:"ruletext deletebutton",onClick:function(e){Se(0,t),function(e,t){var a=JSON.parse(JSON.stringify(Q)).filter(function(e){return e._id!==t._id});ee(a);var n=a.slice(10*re-10,10*re);we(n)}(0,t)}},"Are you sure?"),o.a.createElement("h4",{style:{margin:"0vw",marginBottom:"0.5vw"}},o.a.createElement("strong",null,"Explanation:")," ",t.explanation," "),o.a.createElement("div",{className:"percentagecontainer"},o.a.createElement("div",{style:{width:g},className:"percentage"}))),o.a.createElement(ce,{id:t._id})))}),Ne=[];if(y.level>0){var xe,Ae=Je(y.groupsbelow);try{for(Ae.s();!(xe=Ae.n()).done;){var Ie,_e=xe.value;if(_e.members)(Ie=Ne).push.apply(Ie,Object(u.a)(_e.members));if(_e.groupsbelow){var Re,Pe=Je(_e.groupsbelow);try{for(Pe.s();!(Re=Pe.n()).done;){var De,Fe=Re.value;if(Fe.members)(De=Ne).push.apply(De,Object(u.a)(Fe.members))}}catch(ze){Pe.e(ze)}finally{Pe.f()}}}}catch(ze){Ae.e(ze)}finally{Ae.f()}}else{var Ue;(Ue=Ne).push.apply(Ue,Object(u.a)(y.members))}var Ye=JSON.parse(JSON.stringify(Ne)),qe=[];Ne=[];var Le,Be=Je(Ye);try{for(Be.s();!(Le=Be.n()).done;){var Ge=Le.value;qe.includes(Ge.name)||(qe.push(Ge.name),Ne.push(Ge))}}catch(ze){Be.e(ze)}finally{Be.f()}T&&(Ne=Ne.filter(function(e){return e.name.toLowerCase().includes(T.toLowerCase())})),console.log("all users",Ne);var He=y.members.map(function(e){return e._id});return He=He.includes(x.isAuthenticated().user._id),console.log("props.users[0]",e.users,e.users["".concat(e.users.length-1)]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginBottom:"20vw"}},He&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"block"},onClick:function(e){return i(!r)}},"View Restriction Poll Form?"),o.a.createElement("div",{className:"juryform",style:{maxHeight:r?"300vw":"0",overflow:"hidden",transition:"max-height 2s"}},o.a.createElement("form",null,o.a.createElement("div",{className:"eventformbox"},o.a.createElement("h3",null,"Propose a punishment for a member")),o.a.createElement("div",{className:"eventformbox"},y.level>1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{style:{width:"30vw",margin:"1vw"},type:"text",onChange:function(e){return function(e){j(e.target.value)}(e)}}),o.a.createElement("p",{htmlFor:"duration"},"Search for users then select from the drop down menu below")),o.a.createElement("select",{name:"room",id:"room",onChange:function(t){return function(t){var a,n=Je(e.users);try{for(n.s();!(a=n.n()).done;){var o=a.value;o._id===t.target.value&&(console.log(p),m(o),console.log(o))}}catch(ze){n.e(ze)}finally{n.f()}}(t)}},Ne&&Ne.map(function(e){return o.a.createElement("option",{key:e._id,value:e._id},e.name)})),o.a.createElement("p",{htmlFor:"room"}," Members")),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("select",{id:"restriction",onChange:function(e){I(e.target.value)}},o.a.createElement("option",{value:"cannot post"},"cannot post"),o.a.createElement("option",{value:"cannot create polls"},"cannot create polls"),o.a.createElement("option",{value:"cannot suggest rules or vote for rules"},"cannot suggest rules or vote for rules"),o.a.createElement("option",{value:"cannot use chat"},"cannot use chat"),o.a.createElement("option",{value:"cannot vote for leaders"},"cannot vote for leaders"),o.a.createElement("option",{value:"cannot see events"},"cannot see events"),o.a.createElement("option",{value:"cannot vote in jury"},"cannot vote in jury"),o.a.createElement("option",{value:"remove from group"},"remove from group")),o.a.createElement("p",{htmlFor:"room"}," Choose a punishment")),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("input",{type:"text",name:"duration",id:"duration",onChange:function(e){X(e.target.value)}}),o.a.createElement("p",{htmlFor:"duration"}," How many days?")),o.a.createElement("div",{className:"eventformbox"},o.a.createElement("input",{type:"text",name:"explanation",id:"explanation",onChange:function(e){H(e.target.value)}}),o.a.createElement("p",{htmlFor:"room"}," Explanation"),o.a.createElement("div",{className:"restrictionexplanation"},o.a.createElement("p",{style:{display:"block"},htmlFor:"duration"},"Explain why you think this restriction should be imposed? Which rule or rules have been broken? What is your evidence? Why do you think this punishment is proportionate to the crime? Avoid enforcing rules that have not been agreed on and made explicit in the group rules tab. People will not follow a rule if they don't even know it exists. A rule might seem like common sense to you, but to someone of a different background, culture, nationality, religion or ethnicity, it might not."))),o.a.createElement("button",{className:"formsubmitbutton",style:{margin:"0.5vw"},onClick:function(t){return function(t){t.preventDefault();var a=(new Date).getTime(),n=Me.Types.ObjectId(),o={_id:n,usertorestrict:p._id,usertorestrictname:p.name,explanation:G,groupId:e.groupId,groupIds:E,restriction:A,duration:K,approval:[x.isAuthenticated().user._id],timecreated:a,createdby:x.isAuthenticated().user._id},r=JSON.parse(JSON.stringify(o));r.usertorestrict=p,r.createdby=x.isAuthenticated().user;var i=JSON.parse(JSON.stringify(Q));i.reverse(),i.push(r),i.reverse(),ee(i);var s=i.slice(10*re-10,10*re);we(s);var l={method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}};fetch("/polls/createrestrictionpoll/"+n,l).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}(t)}},"New Restriction Poll"),y.groupabove&&o.a.createElement(o.a.Fragment,null,y.groupabove.members.includes(x.isAuthenticated().user._id)&&o.a.createElement("div",{style:{margin:"0.5vw",display:"inline"}},!Y&&o.a.createElement("button",{style:{margin:"0.5vw",display:"inline"},onClick:function(e){return function(e){return Ee.apply(this,arguments)}(e)}},"Create Restriction Immediately"),Y&&o.a.createElement("h3",{style:{margin:"0.5vw",display:"inline"}},"Uploading Restriction!!!"),P&&o.a.createElement("h2",{style:{margin:"0.5vw",display:"inline"}},"Upload Complete"),o.a.createElement("p",{style:{margin:"0.5vw"}},"You are an group leader, you can create restrictions to enforce the rules. However, unless you are dealing with a very serious issue and speed is vital, it is probably better to just propose a restriction poll for the jury to decide on. If you change your mind about this punishment, you can visit the users profile by clicking on the button with their name at the top of the group page. If the user has any restrictions they will be visible here and you can delete ones you have created"))),o.a.createElement("p",{style:{margin:"0.5vw"}},"Restriction polls are activated at 75% approval. They can be deleted before their duration has ended if the creator or a leader deletes them. Restrictions are also deleted if they are more than a week old and they have less than 75% approval")))),me.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),me.length>1&&me&&Q&&me.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:t+1==re?"0.5":"1"},onClick:function(t){return be(0,e)}},e))}),Oe,o.a.createElement("p",{style:{display:U?"block":"none"}},"If you punish too severely, you are getting revenge. You are also trying to assert dominance and control, you become the bad guy. The best kind of revenge is to succeed and prosper without the need to dominate and control others. Revenge leads to a pointless race to the bottom of people just trying to destroy each other. The only lesson that revenge teaches people is that might makes right, revenge can ony encourage more unethical behaviour, or destroy the spirit and confidence of the person it is inflicted onto. We live in a very unfair world and this puts huge pressure on people to behave in immoral ways. This makes us wonder that if we don't dominate others, they might end up dominating us. Try to take this into account when imposing restrictions on rule breakers. Try your best to explain the rules and to not make prejudiced judgments about people. Maybe they have just been surrounded by untrustworthy domineering people their whole lives,  making it very difficult for them to choose to behave ethically. It is much easier to behave in a moral way if you are surrounded by trustworthy people and you know they will reciprocate and follow the golden rule of \"treat others how you would like to be treated\" with you. People's lives are very complicated and our personal circumstances, advantages and disadvantages, vary hugely. People are much more likey to agree to follow a rule if they understand and agree with it and if the rules are enforced in the spirit that nobody is perfect."),me.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),me.length>1&&me&&Q&&me.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:t+1==re?"0.5":"1"},onClick:function(t){return be(0,e)}},e))})))}function qe(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Le(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Be=a(23);function Ge(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(!1),l=Object(c.a)(s,2),u=(l[0],l[1]),h=Object(n.useState)([]),d=Object(c.a)(h,2),p=d[0],m=d[1],f=Object(n.useState)([]),g=Object(c.a)(f,2),y=g[0],v=g[1],w=Object(n.useState)(e.group),b=Object(c.a)(w,2),E=b[0],S=b[1],k=Object(n.useState)(""),C=Object(c.a)(k,2),T=(C[0],C[1],Object(n.useState)("")),j=Object(c.a)(T,2),O=(j[0],j[1],Object(n.useState)(1)),N=Object(c.a)(O,2),A=N[0],I=N[1],_=Object(n.useState)([]),R=Object(c.a)(_,2),P=R[0],D=R[1],F=Object(n.useState)([]),J=Object(c.a)(F,2),U=J[0],M=J[1],W=o.a.useRef("");function Y(e,t){var a=p.slice(10*t-10,10*t);I(t),M(a)}function q(e,t){console.log(t);var a=JSON.parse(JSON.stringify(p)).filter(function(e){return e._id!==t._id});m(a);var n=a.slice(10*A-10,10*A);M(n);var o=(new Date).getTime(),r="deleted a poll called ".concat(t.pollquestion),i=x.isAuthenticated().user._id,s=x.isAuthenticated().user.name,l=o,c=E._id,u=E.title;y.emit("Input Chat Message",{chatMessage:r,userId:i,userName:s,nowTime:l,type:"text",groupId:c,groupTitle:u});var h=JSON.parse(JSON.stringify(E.members)),d={emails:(h=h.filter(function(e){return e.polls})).map(function(e){return e.email}),subject:"Poll Deleted",message:"The poll called ".concat(t.pollquestion," has been deleted in the group called\n                    ").concat(E.title," at level ").concat(E.level,".")},f={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)};fetch("/groups/sendemailnotification",f).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/polls/deletepoll/"+t._id,{method:"Delete",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}function L(t){var a,n=JSON.parse(JSON.stringify(p)),o=qe(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;r._id==t._id&&(r.notificationsent=!0)}}catch(u){o.e(u)}finally{o.f()}m(n);var i=n.slice(10*A-10,10*A);if(M(i),!t.notificationsent){var s=JSON.parse(JSON.stringify(e.users)),l={emails:(s=s.filter(function(e){return e.polls})).map(function(e){return e.email}),subject:"New Poll",message:"In the group called ".concat(E.title," at level ").concat(E.level,", ").concat(t.createdby.name," created the poll: ").concat(t.pollquestion)},c={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};fetch("/groups/sendemailnotification",c).then(function(e){console.log(e)}).catch(function(e){console.error(e)});fetch("/polls/notificationsent/"+t._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}}Object(n.useEffect)(function(){e.group.groupabove&&e.group.groupabove.members.includes(x.isAuthenticated().user._id)&&u(!0)},[]),Object(n.useEffect)(function(){v(e.socket),e.group.groupabove&&e.group.groupabove.members.includes(x.isAuthenticated().user._id)&&u(!0),S(e.group),fetch("/polls/getpolls/"+e.groupId).then(function(e){return e.json()}).then(function(e){var t=e.data;t.reverse(),m(t);var a=t.slice(0,10);M(a);for(var n=Math.ceil(e.data.length/10),o=[];n>0;)o.push(n),n--;o.reverse(),D(o)})},[e]);var B=U.map(function(t,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:t._id,className:"postbox"},o.a.createElement(Fe,{poll:t,key:t._id,users:e.users,deletePoll:q,sendPollNotification:L,group:E}),o.a.createElement(ce,{id:t._id})))}),G=E.members.map(function(e){return e._id});return G=G.includes(x.isAuthenticated().user._id),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginBottom:"20vw"}},G&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"formbutton",style:{display:"block"},onClick:function(e){return i(!r)}},"View Create Poll Form?"),o.a.createElement("div",{className:"form",style:{maxHeight:r?"100vw":"0",overflow:"hidden",transition:"max-height 2s"}},o.a.createElement("form",{style:{display:r?"block":"none"}},o.a.createElement("div",{className:"pollform"},o.a.createElement("label",{htmlFor:"name"},"Create Poll, write a question then suggest possible answers"),o.a.createElement("button",{className:"formsubmitbutton",onClick:function(e){return function(e){e.preventDefault();var t=(new Date).getTime(),a=Be.Types.ObjectId(),n={_id:a,pollquestion:W.current.value,approval:[],level:E.level,groupIds:[E._id],suggestions:[],timecreated:t,createdby:x.isAuthenticated().user._id},o=JSON.parse(JSON.stringify(n));o.createdby=x.isAuthenticated().user,t=(new Date).getTime();var r="created a poll called ".concat(W.current.value),i=x.isAuthenticated().user._id,s=x.isAuthenticated().user.name,l=t,c=E._id,u=E.title;y.emit("Input Chat Message",{chatMessage:r,userId:i,userName:s,nowTime:l,type:"text",groupId:c,groupTitle:u});var h=JSON.parse(JSON.stringify(p));h.reverse(),h.push(o),h.reverse(),m(h);var d=h.slice(10*A-10,10*A);M(d);var f={method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8"}};fetch("/polls/createpoll/"+a,f).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}(e)}},"New Poll?")),o.a.createElement("textarea",{className:"posttextarea",ref:W,id:"story",rows:"5"})))),P.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),P.length>1&&P&&p&&P.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:t+1==A?"0.5":"1"},onClick:function(t){return Y(0,e)}},e))}),B,P.length>1&&o.a.createElement("h4",{style:{display:"inline"}},"Choose Page"),P.length>1&&P&&p&&P.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline",opacity:t+1==A?"0.5":"1"},onClick:function(t){return Y(0,e)}},e))})))}var He=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={group:e.group},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.group!==this.props.group&&this.setState({group:e.group})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"details"},o.a.createElement("div",{className:"detailscol1"},o.a.createElement("h2",null,"Group Details"),this.state.group.title&&o.a.createElement("p",null,o.a.createElement("strong",null,"Group Title: ")," ",this.state.group.title),this.state.group.location&&o.a.createElement("p",null,o.a.createElement("strong",null,"Location: ")," ",this.state.group.location),o.a.createElement("p",null,o.a.createElement("strong",null,"Level: ")," ",this.state.group.level),this.state.group.description&&o.a.createElement("p",null,o.a.createElement("strong",null,"Description: ")," ",this.state.group.description),this.state.group.groupabove&&o.a.createElement("p",null,o.a.createElement("strong",null,"Group Above: ")),this.state.group.groupabove&&o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,{style:{display:"inline"},forceRefresh:!0},o.a.createElement(U.b,{className:"gotogroup",exact:!0,to:"/groups/"+this.state.group.groupabove._id},o.a.createElement("button",{style:{color:"white",padding:"0.5vw"}},this.state.group.groupabove.title)))),this.state.group.groupsbelow&&this.state.group.level>0&&o.a.createElement("p",null,o.a.createElement("strong",null,"Groups Below: ")),this.state.group.groupsbelow&&this.state.group.level>0&&this.state.group.groupsbelow.map(function(e,t){return o.a.createElement(U.a,{forceRefresh:!0,style:{display:"inline"}},o.a.createElement(U.b,{className:"gotogroup",exact:!0,to:"/groups/"+e._id},o.a.createElement("button",null,o.a.createElement("p",{style:{color:"white",display:"inline"}},e.title))))}),this.state.group.centroid&&this.state.group.groupsbelow&&"localgroup"==this.state.group.type&&o.a.createElement("p",{style:{color:"white"}},"All the small circles on the map roughly show the spread of members of this whole group. The different colours represent each of the groups that are children of this group. The small spots do not actually show the locations of members but approximately show the area covered by each group.")),o.a.createElement("br",null),o.a.createElement("div",{className:"detailscol2"},this.state.group.images&&this.state.group.images.length>0&&o.a.createElement(F.a,{className:"detailsimg",cloudName:"julianbullmagic",publicId:this.state.group.images[0]}))))}}]),t}(n.Component),ze=(a(359),a(21));a(361);function Ve(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ke(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(23);var Xe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={loading:!1,location:"",centroid:"",title:"",allmembers:[],allgroupsbelow:[],error:"",higherlevelgroup:"",newLowerGroupIds:[],id:"",inthisgroup:!1,members:[],level:0,group:{},users:[],associatedlocalgroups:[],redirect:!1,updating:!1,cannotpost:!1,cannotusechat:!1,cannotseeevents:!1,cannotvoteforleaders:!1,cannotparticipateingrouppurchases:!1,removefromgroup:!1,cannotcreatepolls:!1,cannotsuggestrulesorvoteforrules:!1,cannotseegigleads:!1,cannotvoteinjury:!1},a.updateUser=a.updateUser.bind(Object(g.a)(Object(g.a)(a))),a.join=a.join.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getGroupData();this.socket=v()()}},{key:"updateUser",value:function(e){console.log("updateing user",e),this.setState({user:e});var t,a=Ve(e.restrictions);try{for(a.s();!(t=a.n()).done;){var n=t.value;"cannot post"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotpost:!0}),"cannot use chat"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotusechat:!0}),"cannot vote for leaders"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotvoteforleaders:!0}),"cannot see events"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotseeevents:!0}),"remove from group"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({removefromgroup:!0}),"cannot create polls"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotcreatepolls:!0}),"cannot suggest rules or vote for rules"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotsuggestrulesorvoteforrules:!0}),"cannot vote in jury"==n.restriction&&n.groupIds.includes(this.props.match.params.groupId)&&this.setState({cannotvoteinjury:!0})}}catch(o){a.e(o)}finally{a.f()}}},{key:"getGroupData",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t,a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/groups/getuser/"+x.isAuthenticated().user._id).then(function(e){return e.json()}).catch(function(e){return console.error(e)});case 2:return t=e.sent,this.updateUser(t.data),e.next=6,fetch("/groups/findgroup/"+this.props.match.params.groupId).then(function(e){return e.json()}).then(function(e){var t=e.data[0].members;t=t.filter(function(e){return e.active}),a.setState({users:t,group:e.data[0],level:e.data[0].level,loading:!0})}).catch(function(e){console.error(e)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(e){var t=JSON.parse(JSON.stringify(this.state.users)).filter(function(e){return e._id!==x.isAuthenticated().user._id}),a=JSON.parse(JSON.stringify(this.state.group));a.members=t,this.setState({users:t,group:a});fetch("/groups/leave/"+this.props.match.params.groupId+"/"+x.isAuthenticated().user._id,{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){console.log(e)}).catch(function(e){console.error(e)})}},{key:"join",value:function(){var e=Object(l.a)(s.a.mark(function e(t){var a,n,o,r,i,l,c,u,h,d,p,m,f,g,y,v=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.state.user.groupstheybelongto.filter(function(e){return 0==e.level}))>=3&&(this.setState({error:"You have already joined the maximum number of level zero groups. You cannot have more than three, you must leave another\n            group before you can join this one. To leave a group, visit it's page and press the leave group button near the top."}),setTimeout(function(){v.setState({error:""})},8e3)),a<3&&(n=new Date,o=n.getTime(),"has joined this group",r=x.isAuthenticated().user._id,i=x.isAuthenticated().user.name,l=o,"text",c=this.state.group._id,u=this.state.group.title,this.socket.emit("Input Chat Message",{chatMessage:"has joined this group",userId:r,userName:i,nowTime:l,type:"text",groupId:c,groupTitle:u}),h=(h=JSON.parse(JSON.stringify(this.state.users))).filter(function(e){return e.newmembers}),d=h.map(function(e){return e.email}),p={emails:d,subject:"New member",message:"There is a new member called ".concat(x.isAuthenticated().user.name," in the group called ").concat(this.state.group.title," at level ").concat(this.state.group.level,", ")},m={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)},fetch("/groups/sendemailnotification",m).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),f={method:"put",headers:{"Content-Type":"application/json"},body:""},(g=JSON.parse(JSON.stringify(this.state.users))).push(x.isAuthenticated().user),(y=JSON.parse(JSON.stringify(this.state.group))).members=g,this.setState({users:g,members:g,group:y,error:""}),fetch("/groups/join/"+this.props.match.params.groupId+"/"+x.isAuthenticated().user._id,f).then(function(e){}).catch(function(e){console.error(e)}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=o.a.createElement(o.a.Fragment,null);if(x.isAuthenticated()){var a=this.state.users.map(function(e){return e._id});0==this.state.level&&(t=a.includes(x.isAuthenticated().user._id)?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"leavebutton",style:{display:"block"},onClick:function(t){return e.leave(t)}},"Leave Group?")):o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"joinbutton",style:{display:"block"},onClick:function(t){return e.join(t)}},"Join Group?")))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{width:"100vw",overflowX:"hidden"}},!x.isAuthenticated()&&o.a.createElement(r.a,{to:"/"}),this.state.removefromgroup&&o.a.createElement("h2",{style:{margin:"5vw",width:"90vw"}},"You have been removed from this group. See your profile page for an explanation"),!this.state.removefromgroup&&o.a.createElement(o.a.Fragment,null,x.isAuthenticated()&&o.a.createElement(o.a.Fragment,null,this.state.loading&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ze.d,{className:"tabs"},o.a.createElement("h1",{style:{margin:"0.5vw"}},this.state.group.title),o.a.createElement("h4",{style:{margin:"0.5vw"},className:"activemembers"},"Members"),this.state.users&&this.state.users.map(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{style:{display:"inline"}},o.a.createElement(U.b,{to:"/singleuser/"+e._id},e.name)))}),this.state.users.length<=50&&t,this.state.error&&o.a.createElement("p",{className:"toomanygroupserror",style:{color:"red"}},this.state.error),this.state.users.length>50&&o.a.createElement("h4",{style:{margin:"0.5vw"},className:"activemembers"},"This group is full, the maximum number of members in all groups is 50"),o.a.createElement(ze.b,null,!this.state.cannotpost&&o.a.createElement(ze.a,null,o.a.createElement("div",{className:"news"},"News")),o.a.createElement(ze.a,null,"Group Details"),x.isAuthenticated().user.cool&&!this.state.cannotvoteforleaders&&o.a.createElement(ze.a,null,o.a.createElement("div",{className:"leaders"},"Leaders")),!this.state.cannotcreatepolls&&o.a.createElement(ze.a,null,o.a.createElement("div",{className:"polls"},"Polls")),!this.state.cannotsuggestrulesorvoteforrules&&o.a.createElement(ze.a,null,o.a.createElement("div",{className:"rules"},"Rules")),!this.state.cannotseeevents&&o.a.createElement(ze.a,null,o.a.createElement("div",{className:"events"},"Events")),!this.state.cannotvoteinjury&&o.a.createElement(ze.a,null,o.a.createElement("div",{className:"jury"},"Jury"))),!this.state.cannotpost&&o.a.createElement(ze.c,null,o.a.createElement(pe,{socket:this.socket,users:this.state.users,groupId:this.props.match.params.groupId,groupTitle:this.state.group.title,group:this.state.group})),o.a.createElement(ze.c,null,o.a.createElement(He,{users:this.state.users,group:this.state.group})),x.isAuthenticated().user.cool&&!this.state.cannotvoteforleaders&&o.a.createElement(ze.c,null,o.a.createElement(xe,{socket:this.socket,users:this.state.users,group:this.state.group})),!this.state.cannotcreatepolls&&o.a.createElement(ze.c,null,o.a.createElement(Ge,{socket:this.socket,users:this.state.users,groupId:this.props.match.params.groupId,group:this.state.group})),!this.state.cannotsuggestrulesorvoteforrules&&o.a.createElement(ze.c,null,o.a.createElement(_e,{socket:this.socket,users:this.state.users,groupId:this.props.match.params.groupId,group:this.state.group})),!this.state.cannotseeevents&&o.a.createElement(ze.c,null,o.a.createElement(ke,{socket:this.socket,users:this.state.users,groupId:this.props.match.params.groupId,group:this.state.group})),!this.state.cannotvoteinjury&&o.a.createElement(ze.c,null,o.a.createElement(Ye,{socket:this.socket,users:this.state.users,groupId:this.props.match.params.groupId,updateUser:this.updateUser,group:this.state.group}))),this.state.users&&!this.state.cannotusechat&&o.a.createElement(D,{users:this.state.users,grouptitle:this.state.group.title,groupId:this.props.match.params.groupId}))))))}}]),t}(n.Component);a(23);function $e(e){var t=e.match,a=Object(n.useState)({}),r=Object(c.a)(a,2),i=r[0],h=r[1],d=Object(n.useState)([0]),p=Object(c.a)(d,2),m=p[0],f=p[1],g=(x.isAuthenticated(),Object(n.useState)(!1)),y=Object(c.a)(g,2),v=y[0],w=y[1],b=Object(n.useState)(!1),E=Object(c.a)(b,2),S=E[0],C=E[1],T=Object(n.useState)(!1),j=Object(c.a)(T,2),O=j[0],N=j[1],A=Object(n.useState)(!1),I=Object(c.a)(A,2),_=I[0],R=I[1],P=Object(n.useState)(!1),D=Object(c.a)(P,2),U=D[0],M=D[1],W=Object(n.useState)(!1),Y=Object(c.a)(W,2),q=Y[0],L=Y[1],B=Object(n.useState)(!1),G=Object(c.a)(B,2),z=G[0],V=G[1],K=Object(n.useState)(!1),X=Object(c.a)(K,2),$=X[0],Z=X[1],Q=Object(n.useState)(!1),ee=Object(c.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),oe=Object(c.a)(ne,2),re=(oe[0],oe[1]),ie=Object(n.useState)(!1),se=Object(c.a)(ie,2),le=se[0],ce=se[1],ue=Object(n.useState)([]),he=Object(c.a)(ue,2),de=he[0],pe=he[1],me=Object(n.useState)(!1),fe=Object(c.a)(me,2),ge=fe[0],ve=fe[1],we=Object(n.useState)(!1),be=Object(c.a)(we,2),Ee=be[0],Se=be[1],ke=Object(n.useState)({name:"",password:"",email:"",performancedescription:"",rates:"",images:"",error:"",open:!1}),Ce=Object(c.a)(ke,2),Te=Ce[0],je=Ce[1],Oe=Object(n.useRef)(null),Ne=Object(n.useRef)(null),xe=Object(n.useRef)(null),Ae=Object(n.useRef)(null),Ie=Object(n.useRef)(null);function _e(){return(_e=Object(l.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/groups/getuser/"+t.params.userId).then(function(e){return e.json()}).then(function(e){h(e.data),w(e.data.events),C(e.data.eventsapproved),V(e.data.leaders),N(e.data.posts),L(e.data.polls),ae(e.data.rules),re(e.data.purchases),pe(e.data.restrictions),ce(e.data.restriction),ve(e.data.rulesapproved),Se(e.data.restrictionsapproved),Z(e.data.newmembers)}).catch(function(e){console.error(e)});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Re(){return(Re=Object(l.a)(s.a.mark(function e(){var a,n,o,r,i,l,c,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),a=[],!Oe.current.files[0]){e.next=8;break}return(n=new FormData).append("file",Oe.current.files[0]),n.append("upload_preset","jvm6p9qv"),e.next=8,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",n).then(function(e){a.push(e.data.public_id)});case 8:if(!Ne.current.files[0]){e.next=14;break}return(o=new FormData).append("file",Ne.current.files[0]),o.append("upload_preset","jvm6p9qv"),e.next=14,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",o).then(function(e){a.push(e.data.public_id)});case 14:if(!xe.current.files[0]){e.next=20;break}return(r=new FormData).append("file",xe.current.files[0]),r.append("upload_preset","jvm6p9qv"),e.next=20,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",r).then(function(e){a.push(e.data.public_id)});case 20:if(!Ae.current.files[0]){e.next=26;break}return(i=new FormData).append("file",Ae.current.files[0]),i.append("upload_preset","jvm6p9qv"),e.next=26,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",i).then(function(e){a.push(e.data.public_id)});case 26:if(!Ie.current.files[0]){e.next=32;break}return(l=new FormData).append("file",Ie.current.files[0]),l.append("upload_preset","jvm6p9qv"),e.next=32,k.a.post("https://api.cloudinary.com/v1_1/julianbullmagic/image/upload",l).then(function(e){a.push(e.data.public_id)});case 32:return c={_id:t.params.userId,name:Te.name||void 0,email:Te.email||void 0,expertise:Te.expertise||void 0,rates:Te.rates||void 0,images:a,password:Te.password||void 0,events:v,eventsapproved:S,newmembers:$,leaders:z,posts:O,polls:q,rules:te,restriction:le,rulesapproved:ge,restrictionsapproved:Ee},h(c),u={method:"PUT",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8"}},e.next=37,fetch("/groups/updateuser/"+t.params.userId,u).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.error(e)});case 37:R(!1),M(!0),setTimeout(function(){M(!1)},5e3);case 40:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(n.useEffect)(function(){!function(){_e.apply(this,arguments)}()},[]);var Pe=function(e){return function(t){je(Object(H.a)({},Te,Object(J.a)({},e,t.target.value)))}},De=(new Date).getTime(),Fe=o.a.createElement(o.a.Fragment,null);return de&&(Fe=de.map(function(e){var t=De-e.timecreated,a=Math.round(t/864e5),n=e.duration-a;return o.a.createElement("div",{className:"leader",style:{textAlign:"center",margin:"0.5vw"}},o.a.createElement("p",{style:{display:"inline"}},o.a.createElement("strong",null,"Restriction: "),e.restriction," for ",n," days. ",o.a.createElement("strong",null,"Explanation: ")," ",e.explanation,". "),e.createdby==x.isAuthenticated().user._id&&o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("p",{style:{display:"inline"}},"You created this restriction with your leader privileges "),o.a.createElement("button",{style:{display:"inline"},onClick:function(t){return function(e,t){var a=de.filter(function(e){return!(e._id==t._id)});pe(a);var n={method:"Delete",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}};fetch("/groups/deleterestriction",n).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}(0,e)}},"Delete Restriction?")))})),o.a.createElement(o.a.Fragment,null,i&&o.a.createElement("div",{className:"signupform",style:{textAlign:"center"}},o.a.createElement("div",{className:"innersignupform",style:{textAlign:"center"}},o.a.createElement("h1",{style:{textAlign:"center"}},i.name),i.expertise&&o.a.createElement("h3",{style:{textAlign:"center"}},"Expertise: ",i.expertise),i.phone&&o.a.createElement("h3",{style:{textAlign:"center"}},"Phone Number: ",i.phone),i.email&&o.a.createElement("h3",{style:{textAlign:"center"}},"Email Address: ",i.email),i.images&&i.images.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("br",null),o.a.createElement("h3",{style:{textAlign:"center"}},"Images"),o.a.createElement("div",{style:{marginBottom:"40vw"}},o.a.createElement(ye.a,{style:{marginLeft:"5vw",width:"50vw",zIndex:1,position:"absolute"}},i.images&&i.images.map(function(e){return o.a.createElement("div",null,o.a.createElement(F.a,{style:{width:"100%"},cloudName:"julianbullmagic",publicId:e}))})))),i.restrictions&&i.restrictions.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{style:{textAlign:"center"}},"Restrictions"),Fe))),x.isAuthenticated()&&x.isAuthenticated().user._id==t.params.userId&&o.a.createElement("div",{style:{transform:"translateY(-5%)"},className:"signupform"},o.a.createElement("div",{style:{position:"static"},className:"innersignupform"},o.a.createElement("h1",{style:{textAlign:"center"}},"Edit Listing"),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"},"Name "),o.a.createElement("input",{id:"name",placeHolder:i.name,label:"Name",value:Te.name,onChange:Pe("name"),margin:"normal"})),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",{style:{marginRight:"1vw",textAlign:"left"},className:"ruletext"},"Email "),o.a.createElement("input",{id:"email",placeHolder:i.email,type:"email",label:"Email",value:Te.email,onChange:Pe("email"),margin:"normal"})),o.a.createElement("div",{style:{margin:"1vw"}},o.a.createElement("h5",{style:{marginRight:"1vw",display:"block"}},"Try to explain your skills, knowledge, experience, qualifications. You may be elected as a leader of a group and other group members need some way of evaluating if you are a good candidate."),o.a.createElement("textarea",{style:{width:"95%",height:"20vh",overflowY:"auto",display:"block"},id:"expertise",placeHolder:i.expertise,label:"expertise",value:Te.expertise,onChange:Pe("expertise"),margin:"normal"})),o.a.createElement("h4",null,"Tick the boxes below to recieve email notifications about new suggestions. At least 10% of members must have voted for something before notifications will be sent in order to help prevent individuals from spamming everyone. "),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:v,style:{transform:"translateY(40%)",display:"inline"},onChange:function(e){w(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Event Suggestions, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:z,style:{transform:"translateY(40%)"},onChange:function(e){V(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," New Leaders, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:O,style:{transform:"translateY(40%)"},onChange:function(e){N(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Posts, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:q,style:{transform:"translateY(40%)"},onChange:function(e){L(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Polls, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:$,style:{transform:"translateY(40%)"},onChange:function(e){Z(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," New Members In Your Groups, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:te,style:{transform:"translateY(40%)"},onChange:function(e){ae(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Rule Suggestions, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:le,style:{transform:"translateY(40%)"},onChange:function(e){ce(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Restrictions "))),o.a.createElement("h4",null,"Tick the boxes below to recieve email notifications when new rules or restrictions for particular uses recieve approval from above 75% of the members"),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:ge,style:{transform:"translateY(40%)"},onChange:function(e){ve(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Rule Approval, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",checked:Ee,style:{transform:"translateY(40%)"},onChange:function(e){Se(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Restriction Approval, ")),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("input",{type:"checkbox",style:{transform:"translateY(40%)"},checked:S,onChange:function(e){C(e.target.checked)}}),o.a.createElement("h5",{style:{marginRight:"1vw"},className:"ruletext"}," Events Approved "))),o.a.createElement("div",{className:"signininput",style:{margin:"2vw",display:m.length>=1?"block":"none"}},o.a.createElement("input",{style:{width:"100%"},id:"file",type:"file",ref:Oe})),o.a.createElement("div",{className:"signininput",style:{margin:"2vw",display:m.length>=2?"block":"none"}},o.a.createElement("input",{style:{width:"100%"},id:"file",type:"file",ref:Ne})),o.a.createElement("div",{className:"signininput",style:{margin:"2vw",display:m.length>=3?"block":"none"}},o.a.createElement("input",{style:{width:"100%"},id:"file2",type:"file",ref:xe})),o.a.createElement("div",{className:"signininput",style:{margin:"2vw",display:m.length>=4?"block":"none"}},o.a.createElement("input",{style:{width:"100%"},id:"file3",type:"file",ref:Ae})),o.a.createElement("div",{className:"signininput",style:{margin:"2vw",display:m.length>=5?"block":"none"}},o.a.createElement("input",{style:{width:"100%"},id:"file4",type:"file",ref:Ie}),o.a.createElement("p",null,"Max 5 images")),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t=m;t.length<5&&t.push(0),f(Object(u.a)(t))}(e)}},"Add Extra Image"),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t=m;t.length>0&&t.pop(),f(Object(u.a)(t))}(e)}},"One Less Image"),!_&&o.a.createElement("button",{id:"submit",onClick:function(e){!function(){Re.apply(this,arguments)}()}},"Submit"),_&&o.a.createElement("h3",null,"...Uploading Changes"),U&&o.a.createElement("h2",null,"Upload Complete"))))}var Ze=function(e,t){return e.location.pathname,{color:"white"}},Qe=Object(r.g)(function(e){var t=e.history;return o.a.createElement("div",{className:"menu",style:{backgroundColor:"#759CC9"}},o.a.createElement("h2",{className:"menutitle"},"Democracy Social Network"),o.a.createElement("div",{className:"navbuttons"},o.a.createElement(U.b,{to:"/"},o.a.createElement("button",{style:Ze(t)},"Home")),x.isAuthenticated()&&x.isAuthenticated().user.cool&&o.a.createElement(o.a.Fragment,null,o.a.createElement(U.b,{to:"/explanation"},o.a.createElement("button",{id:"explanation"},"About")),o.a.createElement(U.b,{to:"/info"},o.a.createElement("button",{style:Ze(t)},"Info"))),!x.isAuthenticated()&&o.a.createElement("span",null,o.a.createElement(U.b,{style:{marginLeft:"10px",marginRight:"5px"},to:"/signup"},o.a.createElement("button",{id:"signup"},"Sign up")),o.a.createElement(U.b,{to:"/signin"},o.a.createElement("button",null,"Sign In"))),x.isAuthenticated()&&o.a.createElement("span",null,o.a.createElement(U.b,{to:"/singleuser/"+x.isAuthenticated().user._id},o.a.createElement("button",{style:{marginLeft:"10px",marginRight:"5px"}},"My Profile")),o.a.createElement("button",{color:"inherit",onClick:function(){x.clearJWT(function(){return t.push("/")})}},"Sign out"))))});function et(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{width:"92vw",marginBottom:"4vw",marginLeft:"4vw",marginRight:"4vw"}},o.a.createElement("h4",null,"This app is a work in progress, if you have any suggestions or constructive criticism, please email democraticsocialnetwork@gmail.com"),o.a.createElement("h1",null,"Why do we need something like the Democracy Social Network?"),o.a.createElement("p",null,"For the last few decades, the situation for working class people in this country has grown steadily worse and worse. Houses are at least five times more expensive than they were in the 1980s even taking into account inflation. Wage growth has decreased substantially. The rate of unemployment has tripled since the 1970s. Union membership has gone down very dramatically. University, childcare and many other things people need have become much more costly. Our technology has improved dramatically and it should be vastly easier and cheaper to produce these essential goods and services. For example, very nice houses can be 3d printed for less than $4000 these days, yet people are still coerced into paying off mortgages for several decades. The economic levers that could be pulled to resolve these problems are well understood and there are a range of solutions that have proven to be practical. After all, even in Australia, we used to have these economic problems under much better control in the 1970s. It is not a question of if we know how to fix them, rather, we need to choose the sorts of leaders who would choose to persue the solutions. We need a system where leaders are much more accountable to the people they represent and where authority is much more grounded in knowledge, wisdom, moral integrity and empathy instead of coercive or exploitative power."),o.a.createElement("img",{style:{width:"45vw"},src:a(362)}),o.a.createElement("img",{style:{width:"45vw"},src:a(363)}),o.a.createElement("img",{style:{width:"45vw",height:"70vh"},src:a(364)}),o.a.createElement("img",{style:{width:"45vw"},src:a(365)}),o.a.createElement("p",null,"The root of these problems is that our political system is not really very democratic and is quite heavily biased in favour of the rich. Almost all our politicians are very wealthy, belonging to the top 5% most wealthy members of our society or they receive campaign funding from wealthy people. They create and impose rules that make it easier to make more money for themselves. This is largely because political marketing campagins are very expensive and the mass media is controlled by very wealthy people."),o.a.createElement("a",{style:{color:"blue"},href:"https://www.abc.net.au/news/2022-02-01/australian-election-commission-financial-disclosure/100794808"},"https://www.abc.net.au/news/2022-02-01/australian-election-commission-financial-disclosure/100794808"),o.a.createElement("a",{style:{color:"blue"},href:"https://www.greenleft.org.au/content/reminder-australia-plutocracy"},"https://www.greenleft.org.au/content/reminder-australia-plutocracy"),o.a.createElement("a",{style:{color:"blue"},href:"https://thepropertytribune.com.au/features/almost/"},"https://thepropertytribune.com.au/features/almost/"),o.a.createElement("a",{style:{color:"blue"},href:"https://independentaustralia.net/australia/australia-display/australia-exists-for-the-rich-and-powerful--but-that-can-change,14727"},"https://independentaustralia.net/australia/australia-display/australia-exists-for-the-rich-and-powerful--but-that-can-change,14727"),o.a.createElement("div",null,o.a.createElement("iframe",{style:{margin:"0.5vw",width:"44vw",height:"44vh",display:"inline"},src:"https://www.youtube.com/embed/34LGPIXvU5M",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{style:{margin:"0.5vw",width:"44vw",height:"44vh",display:"inline"},src:"https://www.youtube.com/embed/tTBWfkE7BXU",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),o.a.createElement("p",null,"For thousands of years, political science has understood that there is an intimate relationship between a persons' economic/financial situation and their ability to participate in politics. Two and a half thousand years ago, the ancient Athenian democracy used to pay citizens to attend their assembly. They knew that some of the poorer members of society could not afford to take the time off work that was necessary to participate in politics. This helped to prevent group decisions from becoming biased in favour of the rich. This is not necessarily the perfect solution to this problem, but it is certainly the first recorded attempt to resolve this issue. If someone is struggling to meet their own basic needs because of poverty, (lack of housing, food, medicine, social interaction etc) they cannot think about a long term plan for their own lives and they certainly cannot afford to take the time to think about a long term plan for society. Financial security and stability are empowering."),o.a.createElement("p",null,"There is also very little democracy within most businesses, capitalist firms are undemocratic, the executives and shareholders are unelected and unaccountable to most of the people who work for the organization. There is no valid reason why we should be able to elect our politicians but not the leaders of the enterprises we work for. Corporate executives mostly only listen to the workers if the government or unions force them to. This does not necessarily need to be the case. Around the world there are millions of democratic businesses with hundreds of millions of members. Businesses where the workers are the shareholders, can elect their own leaders and vote on how to distribute profits. This is a very old and very reliable model of organization. We already have many of them in Australia.",o.a.createElement("a",{style:{color:"blue"},href:"https://www.ica.coop/en/cooperatives/facts-and-figures"},"https://www.ica.coop/en/cooperatives/facts-and-figures"),o.a.createElement("a",{style:{color:"blue"},href:"https://www.un.org/esa/socdev/documents/2014/coopsegm/grace.pdf"},"https://www.un.org/esa/socdev/documents/2014/coopsegm/grace.pdf")),o.a.createElement("h1",null,"Exploitation?"),o.a.createElement("p",null,"Usually when we think of exploitation we imagine a slave owner whipping slave or something terrible like that, however in the modern world, exploitation is usually much more discrete. The labour theory of value first popularised by the classical economists David Ricardo and Adam Smith. The basic idea is that the value of all goods and services is roughly proportional to the human labour time invested in creating them, with some variation depending on the supply and demand. All the accounts gathered by the statistics bureaus of all developed countries show a very strong correlation between value created and human labour time, roughly 95%. When we take goods off the shelf, it is usually very difficult/impossible to know exactly how much labour time has gone into creating them because this information is not shared between the companies involved or the shop that sells the product. However, government statistics bureaus do gather and publish data about the total number of hours worked in each industry and the total value created in each industry. This can be plotted on a graph, and there is almost always a very strong correlation. (Zachariah, Dave. (2006). Labour value and equalisation of profit rate: A multi-country study. 4. https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.549.2098&rep=rep1&type=pdf Cockshott, Paul, Cottrell, Allin and Valle Baeza, Alejandro, (2014), The Empirics of the Labour Theory of Value: Reply to Nitzan and Bichler, EconStor Open Access Articles and Book Chapters, issue , p. 115-134, https://EconPapers.repec.org/RePEc:zbw:espost:157802.) We can also calculate the average amount of value created per hour of human labour simply by adding all the value created in all industries then dividing it by the sum of all hours worked in all industries. In Australia in 2020, the average value created per hour of labour was $83 AUD, the average wage was only $59. The median hourly rate of pay was only $36. Even without factoring in the obscenely high cost of living, Australians already have between 71 and 43% of the value they create for society stolen from them. This surplus value is the profit that get's paid to shareholders as dividends. This stolen value is the reason corporate executives can earn more than 30 times as much money, (sometimes hundreds of times more money) than the lowest paid workers in a company. More than 90% of people would benefit financially from a socialist economic system grounded in the labour theory of value."),o.a.createElement("p",null,"Paul Cockshott, a scottish Computer Scientist with a BA in Economics and PHD in computer science does a very good job of explaining this theory."),o.a.createElement("iframe",{src:"https://www.youtube.com/embed/emnYMfjYh1Q"}),o.a.createElement("iframe",{src:"https://www.youtube.com/embed/-arn--Gtu-E"}),o.a.createElement("p",null,"Because human labour time is the source of economic value, incomes that do not come from someone's own labour are exploitative. That value is not appearing out of nowhere, it is being stolen from someone else. Incomes from rents, dividends, interest and royalties are usually forms of exploitation. If we banned individuals or private companies from doing these things, the vast majority of the population would be substantially better off financially. Sometimes landlords provide some management and maintenance services, but the cost of this is usually massively inflated and much higher than it should be."),o.a.createElement("p",null,"Again, Paul Cockshott does a very nice job of explaining these ideas."),o.a.createElement("iframe",{src:"https://www.youtube.com/embed/zfHV0yWhe9I"}),o.a.createElement("iframe",{src:"https://www.youtube.com/embed/x-oRmcYR5cM"}),o.a.createElement("p",null,"In a socialist society there would still be a labour market and therefore people would be paid varying amounts. Jobs that are perhaps more difficult or less desireable would be require higher rates of pay to incentivise people to do them and less desireable jobs would be paid less. This is similar to a labour market in a capitalist society, however, we would eliminate forms of exploitation, passive incomes that do not come from doing any work and incomes that are massively inflated because of artificial/manufactured scarcity."),o.a.createElement("h1",null,"Manufactured Scarcity"),o.a.createElement("p",null,"Our technology has been advanced enough to eliminate poverty within industrialised societies since the late 19th century. In 1892 the russian communist Peter Kropotkin estimated that it was only necessary for one man to work 30 hours a week, 5 hours a day for 6 days a week, in order to meet the needs of a family of 5. Of course, our technology and productive forces have improved very dramatically since then and the minimum amount of work time required to meet people's needs should have fallen very substantially."),"(Kropotkin, Petr Alekseevich (2015). The Conquest of Bread Chapter 8. Priestland, David (This edition, using the 1913 text, first published in Penguin Classics in 2015 ed.). London: Penguin Classics. ISBN 9780141396118. OCLC 913790063.)",o.a.createElement("p",null,"Today, almost all of our basic needs could be met by robots, the production of almost all the things we need to live could be fully automated. For several thousand dollars you can buy a robot that can grow all the fuit and vegetables a family will need. https://farmbot.com.au/. A robot can then cook those ingredients into a delicious meal for you. https://moley.com/ Houses can be 3d printed in one or two days for as little as $4000 https://all3dp.com/2/3d-printed-house-cost/. It would not be too difficult for robots to handle most housework, cleaning, laundry, gardening etc https://www.irobot.com.au/. This is easily within the grasp of modern artificial intelligence."),o.a.createElement("a",{style:{color:"blue"},href:"https://farmbot.com.au/"},"*https://farmbot.com.au/"),o.a.createElement("a",{style:{color:"blue"},href:"https://moley.com/"},"*https://moley.com/"),o.a.createElement("a",{style:{color:"blue"},href:"https://all3dp.com/2/3d-printed-house-cost/"},"*https://all3dp.com/2/3d-printed-house-cost/"),o.a.createElement("a",{style:{color:"blue"},href:"https://www.irobot.com.au/"},"*https://www.irobot.com.au/"),o.a.createElement("p",null,"If all this is true, why do we still need to waste years or decades of our lives for rents,  mortgages or food? Why do capitalist countries still have huge numbers of homeless people? Why do 5000 children die every day from diseases we could easily prevent with vaccines that already exist? Why do hundreds of millions of people still experience famines? According to the World Health Organization, 10.4 million children died in 2004 from largely preventable causes like malnutrition and infections.(18) At least two million child deaths a year could be prevented by existing vaccines and most of the rest could be prevented by access to clean water, sanitation, and other basic necessities. Nearly 1.3 billion people live in absolute poverty, and more than 15 million adults aged 20 to 64 die every year from preventable causes. World Health Organization. The world health report 1998 \u2013 Life in the 21st century"),o.a.createElement("p",null,"There is a tendency within a capitalist society for the costs of things people need to become massively inflated. Capitalists will hoard these goods and services, then extort prices from people that are much larger than necessary. The anarchy of the free-market is one of the main problems socialists have resolved with democratic central planning of the economy."),o.a.createElement("p",null,"This is essentially why the cost of childcare and housing in Australia have risen so dramatically in recent decades. Houses are no more difficult to produce than they used to be, but their price has risen by more than a factor of five since the 1980s. These is purely because we need houses, people cannot function in a modern society while living on the street. It is also the reason the cost of childcare has tripled in the last three decades. In the USA, per capita expenditure on medicine has risen by more than a factor of ten since 1950."),o.a.createElement("img",{src:"https://i.redd.it/opf4kvrgipd51.jpg"}),o.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/20100517_Australian_House_Price_Index_1986_-_2009.pdf/page1-1200px-20100517_Australian_House_Price_Index_1986_-_2009.pdf.jpg"}),o.a.createElement("img",{src:"https://www.nejm.org/na101/home/literatum/publisher/mms/journals/content/nejm/2012/nejm_2012.366.issue-11/nejmp1200478/20130726/images/img_medium/nejmp1200478_f1.jpeg"}),o.a.createElement("p",null,"In the 2016 census, there would roughly 116000 homeless people in Australia and more than a million vacant homes. There is by far more than enough homes for everyone and everyone needs a home in order to be a functional member of society, but the supply is restricted. People will pay higher rents and mortgages if they are worried about being homeless. The land lord tells their tennants to pay them hundreds of dollar every week or tough luck, try sleeping out in cold, wind and rain where you are likely to be attacked in the middle of the night at some point or pissed on by drunk youths."),o.a.createElement("a",{href:"https://www.domain.com.au/news/the-real-reason-one-million-homes-were-vacant-in-the-census-data-report-20170726-gxhy8q/"},"https://www.domain.com.au/news/the-real-reason-one-million-homes-were-vacant-in-the-census-data-report-20170726-gxhy8q/"),o.a.createElement("p",null,"The most effective solution to this problem is public monopolies on things people need, or at least overwhelmingly dominant public enterprises that provide the things people need. This is why medicine is so vastly cheaper in Australia than the USA, we have a strong public healthcare system."),o.a.createElement("h1",null,"How does The Democratic Social Network Work?"),o.a.createElement("p",null,"The democratic social network takes what is good about the organization of worker cooperatives and trade unions and tries to use the medium of the internet to enhance these strengths. This application is guided by the principle that if something is relevant to you and you have the expertise to understand it, you should be directly involved in making decisions about it. Democracy is something we should practice every day, in all our relationships, not just once every few years. Democracy is compromising, consulting, discussing, sharing information, filling in the gaps in each others understanding in order to reach much better informed group decisions than any of us could have come to individually. Authority should be grounded in wisdom, knowledge and moral integrity instead of coercive, exploitative power. People's ability to participate should be independent of how wealthy they are and we should make it as easy as possible for people to express their views."),o.a.createElement("p",null,"At the bottom level of the Democratic Social Network Organization there are small groups of less than 50 people, anyone can create one of these. Each of these can elect delegates to higher level groups that represent larger groups of people. These teams can all create and enforce rules together with direct democracy."),o.a.createElement("p",null,"In order to promote equality and cooperation between groups there are higher level representative assemblies. There are no particular election events, instead you can just vote or withdraw a vote for anyone in your groups at any time. These leaders can have their authority taken away whenever the group chooses. This provides a much stronger incentive for leaders to consult and discuss with people in order to make choices that most people are happy with and to lead the group in a direction that is in the best interests of the group. Higher level representative groups can vote to propose rules and events to the lower groups. One of our goals is for people to mostly only be choosing leaders they know personally. This allows us to have more confidence in the quality of our leaders' character."),o.a.createElement("p",null,"Representatives from higher level groups are not allowed to nominate or endorse candidates in lower level groups. This helps to ensure a genuinely meritocratic but also democratic organization. There are no election campaigns on this web application. However, you can post a resume in your group for other members to look at and evalutate your credentials. The choice of leaders or experts should be purely based on their skill, empathy, experience, trustworthyness, wisdom, moral integrity and knowledge. Leader selection should have nothing to do with how much money candidates have to spend on a political marketing campaigns or how much control they have over the media."),o.a.createElement("p",null,"In order to prevent a situation where people get selected simply because they were first to get any votes, all elected leaders must receive at least 75% approval from their group and the most popular members above this threshold can become representatives. When you choose who to vote for, try to priortise their actual credentials instead of whether or not you like them personally. The democratic social network tries to prevent demagoguery. This is a phenomenon where people gain influence simply with charm and charisma, while they may not actual have the competence for leadership. A demagogue is sort of like a sociopath, very manipulative and cunning, but the term refers particularly to political leaders. It is nice if leaders are likeable and friendly, but this should not be the priority. A real leader tells you what you need to hear, not just what you want to hear."),o.a.createElement("p",null,"Only two leaders are chosen from each group, however there may be many members who happen to all be equally and most popular. For this reason, every three months, two leaders are chosen randomly from this group. Ideally, in the long term, we should be aiming for a system where everybody takes a turn as a leader. We would randomly choose people to serve a term as a leader, perhaps for three month terms, then we cross their name off the list after they have served their term limit. This would mean that there could not be anything even sort of like a ruling class or oligarchy and there could not be any bias in favour of any particular groups. All groups within society would be proportionately represented. African, Asian, European, Indigenous people etc would all have a number of representatives that is proportional to the size of their population. We cannot just immediatly do this, leadership requires certain qualities. Leaders must be socially conscious, willing to consult, discuss and negotiate with their groups in order to find decisions that as many as people as possible are happy with. It requires empathy, responsibility, integrity and other characteristics. One of the main goals of the Democratic Social Network is to try to encourage these qualities within all users of the application and to try to increase the number of people who take their turn as leaders. We really believe everyone has the potential to do this."),o.a.createElement("p",null,"All the groups in this network are relatively small. This is intended to promote deliberative democracy. We want people to be making informed choices, have discussions in order to share information, correct each others mistakes and try to arrive at decisions that are much better informed than any individual could come up with on their own. It is not enough for people to simply consent to a group decision, their should be informed consent. In order to try to prevent the votes of inactive users from distorting the outcome of votes on all issues, people's accounts and votes will be deleted if they don't log in three times in one month. If this happens, you can still just easily recreate the same account."),o.a.createElement("p",null,"In this application, all voting is open. You can see exactly who has voted for what, you can even visit higher level representative groups in order to observe their discussions. If you are worried about people persecuting you for expressing your thoughts and opinions, there are much deeper problems in the group than whether or not voting is secret and anonymous. The real issue is that there are imbalances of power that must be fixed. Anonymity mostly makes it easier for people to stab each other in the back and to conceal domination or abuse. Secretive voting encourages passive aggressive behaviour. If you are going to vote for something that oppresses, abuses or exploits someone else, they should be able to see this and confront you. It is much harder to dehumanize people if you must interact with them personally and witness their emotional response to your abuse. Bullies are like cockroaches, they hate having light shone onto them. Most bullies are cowards. Groups can enforce rules with the Jury tab on each group page. If they vote to create a restriction for a user, the user can always see which rules they have supposedly broken, and dispute this if they like. A rule might seem like common sense to you, but to someone else with a different background, culture or beliefs, it may not. For this reason, all rules are made explicit and can be viewed in the rules tab of the group page. For example, in a large Capitalist business, the upper level managers and directors who make most decisions about who to hire and fire practically never meet or work directly with the lower level workers and thus they very easily dispose of them when their work is no longer profitable to the business. In contrast to this, in worker cooperatives, democratic businesses that are owned and run by their own workers, people very rarely get fired. The managers and directors are elected by the workers and usually work fairly closely with them.",o.a.createElement("a",{style:{color:"blue"},href:"https://www.researchgate.net/publication/290244575_EMPLOYMENT_STABILIZATION_INSIDE_FIRMS_AN_EMPIRICAL_INVESTIGATION_OF_WORKER_COOPERATIVES"},"https://www.researchgate.net/publication/290244575_EMPLOYMENT_STABILIZATION_INSIDE_FIRMS_AN_EMPIRICAL_INVESTIGATION_OF_WORKER_COOPERATIVES")),o.a.createElement("p",null,"There is greater transparency in an open voting system. We encourage users of this application to communicate through other mediums, have discussions and talk about why each person voted for the things they voted for. Not only does this help everyone to reach better informed choices, it also allows people to scrutineer the web application and ensure there is no voting fraud going on. Open voting encourages conversation, if you disagree with people you can try to share information with each other in order to reach a mutual understanding. If you don't know who has voted for what, you won't know who you need to start the discussion with. If there are any very personal issues that require privacy, we recommend communicating through another medium. Of course there are some sensitive issues that call for secrecy, but secret voting certainly should not be the dominant form of democratic decision making."),o.a.createElement("p",null,'Errors are a natural, inevitable and useful part of the learning process. A "debate" is an irrational form of discussion that leads to sophistry. Finding the truth is not a contest. If we think of our disagreements as a competition, we will try to rationalise our point of view, we will try to manipulate or distort the truth in order to fit our perspective. We will selective focus on information that confirms our biases. We only think this way because our society is so hierarchical. Powerful people do not need to have valid arguments, they can simply impose their views onto others. Often when we disagree with people, we worry that an admission of error will be interpretted as an admission of inferiority. However, whether you are right or wrong about any particular question tells us nothing about your overall worth as a person. When we mutually arrive at the most accurate answers, everybody wins, regardless of whether any individual is correct or incorrect. If I am correct and I fail to persuade you, we both lose. Failure to understand this is the root cause of most of the bureaucratic nonesense in our society. Bees can demonstrate the benefits of this sort of thinking. When honeybees need to find a new place to build a nest they send out hundreds of scouts to search for one. They know exactly what they are all looking for, they need certain height, temperature, protection from the weather, access to food etc. The more bees they send out, the greater the chance they will find a better quality home. While hundreds of bees investigate, only the best place is chosen and they all unanimously agree to move to this new location because it is in everyone\'s interest to do this.')),o.a.createElement("br",null))}function tt(){return Object(n.useEffect)(function(){fetch("/groups/addtopagecounter/home",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{marginLeft:"5vw",marginTop:"3vw",width:"90vw"}},o.a.createElement("a",{style:{color:"black",textDecoration:"none",display:"block"},href:"/Psychological-War"},o.a.createElement("div",{className:"articlelink"},o.a.createElement("h2",null,"The Psychological War On Communism"),o.a.createElement("p",null,"Since the birth of Socialism in the early 20th century, the capitalist ruling class have gone to great lengths to destroy socialism. They have tried their absolute best to destroy people's perception of Communism, spreading slander throughout the mass media and academic institutions. They have infiltrated many real socialist organisations and created many of their own fake ones. Divide and conquer is their primary strategy, if they perceive any divisions between socialist groups, they try to drive a wedge into it. When they build their own socialist organisations, the most common strategy is to spread ideas that sound socialistic, but are ultimately not at all useful. They will try to encourage a puritanical, vengeful, arrogant and self righteous mentality, any revolution that is less than perfect is bluntly dismissed, there is no constructive criticism or acknowledgement of the achievements of real viable socialist revolutions. They won't support any socialist experiments unless they failed, didn't last very long or didn't produce any measurable, lasting benefits to people's lives. The goal is to leave people with the feeling that communism is a Utopian fantasy, idealistic, unrealistic, a nice idea, but not practical. The bourgeoisie have also tried to meddle in the elections of countries where the population shows strong support for socialism, attempting to get more right wing candidates elected."),o.a.createElement("h4",null,"Read More"))),o.a.createElement("a",{style:{color:"black",textDecoration:"none",display:"block"},href:"/Cuba"},o.a.createElement("div",{className:"articlelink"},o.a.createElement("h2",null,"Cuba"),o.a.createElement("p",null,"Thanks to the release of numerous formerly classified CIA documents, we now know the truth about Cuba. Most of the references for this article are directly from the website of the worst enemy of Socialism, the Central Intelligence Agency of the United States Government. There are many very rich and powerful people in this world who have strong motives for slandering Socialist countries like Cuba (especially Cuba) and hugely disproportionate access to mass mediums through which to spread these lies. The Communist Party of Cuba are radical humanists who have dramatically improved the quality of life of the the Cuban people. The government have taken large steps towards guaranteeing that all Cubans will have their basic needs met, massively reducing poverty and guaranteeing the necessities of life are affordable and in many cases provided for free at public expense. Housing, public transport, electricity, university, childcare and many other essential services are either free or cheap. The Communist party have greatly improved that status of African people and women, eliminating the worst aspects of racism and sexism. The standards of health and education are the best in the third world and in many ways as good or better than some first world countries. The Party created a much more fair and equitable distribution of wealth than Capitalist countries. Their private sector is largely worker-cooperatives, 30% of their GDP is produced by democratic businesses or self employed people where the workers are the shareholders. Their public sector is somewhat like an enormous co-operative in which all Cubans are a member and the goal is to meet human needs instead of generate profits. Their society is highly unionised with the vast majority of their people in at least one union and most work arrangements negotiated through unions. Recently, the sustainable development index found Cuba to be the most sustainable country in the world. "),o.a.createElement("h4",null,"Read More"))),o.a.createElement("a",{style:{color:"black",textDecoration:"none",display:"block"},href:"/Soviet-Union"},o.a.createElement("div",{className:"articlelink"},o.a.createElement("h2",null,"Soviet Union"),o.a.createElement("p",null,"The CIA archives also contain numerous documents that reveal the true nature of the USSR. The Soviet Union was actually quite progressive and humanistic for the time period. Their worst enemy admits this blatantly. These are some facts we know about the USSR. It took several decades to develop Socialism, it took time to build the industry and technology that was needed. They also experienced a quite severe crisis: a civil war, numerous invasions and WW2. By the mid 20th century life in the Soviet Union became quite free. The USSR experienced very rapid economic growth, double that of the United States, this growth was targeted at raising the well being, health, education, wages and general living standards of the population. The socialist government massively reduced economic inequality. The highest rate of pay was only about three times higher than the lowest. In Capitalist Societies Bourgeois elites can make hundreds or thousands of times more money than working class people with income gained from exploiting workers. The government consciously tried to reduce the prices of things and the rates of unemployment (to make it easier for people to find jobs and increase economic growth) and were quite successful. All education was free and most university students were paid to study. Soviet citizens ate a slightly more nutritious diet than the United States\u2019 population. The Soviet Union was highly feministic, with rates of female employment and enrolment at University roughly twice that of the USA. The communist government provided women with very cheap subsidised childcare services, paid maternity leave, divorce was easy to obtain, abortion was provided for free at public expense, the rates of infant mortality and teenage pregnancy were quite low. The criminal justice system in the USSR was aimed at rehabilitation. Prisoners were paid fairly well for their work, they were always adequately fed and they only worked the standard 8 hour day. Non-violent criminals were not confined to a cell. The USSR created a quality free universal healthcare system, one of the first in the world. The USSR built houses at a faster rate than any other country, they didn\u2019t treat housing as a commodity but rather, as something everyone needs. It was the first country to more or less eliminate homelessness and their constitution guaranteed housing to all citizens. The USSR did not have exploitative or imperialistic economic relations with it\u2019s trading partners, on the contrary, it gave huge amounts of financial aid, many billions of dollars worth."),o.a.createElement("h4",null,"Read More"))),o.a.createElement("a",{style:{color:"black",textDecoration:"none",display:"block"},href:"/Yugoslavia"},o.a.createElement("div",{className:"articlelink"},o.a.createElement("h2",null,"Yugoslavia"),o.a.createElement("p",null,"The Socialist Federal Republic of Yugoslavia (SFRY) was a very encouraging experiment in Socialism that existed from 1945 to 1992. As with most other Communist countries, the CIA archives provide us with an abundance of valuable sources that tell a very clear story, one of massive improvements to the quality of life of the population. There were enormous gains in health, education, political participation, real wage growth and social equality. Yugoslavia had a very distinctive \u201cself-management\u201d system. This was much more decentralised than the Soviet Union, giving much more power to individual organisations, each of which was controlled by an elected worker council. Yugoslavia also experienced some economic difficulties that the USSR did not, inflation, higher unemployment and economic cycles. On the whole, despite it's faults, this Balkan Socialist country set a very promising example of what a world without exploitation, domination and imperialism could look like."),o.a.createElement("h4",null,"Read More"))),o.a.createElement("a",{style:{color:"black",textDecoration:"none",display:"block"},href:"/China"},o.a.createElement("div",{className:"articlelink"},o.a.createElement("h2",null,"China"),o.a.createElement("p",null,"Capitalist historians would have us believe that the People's Republic of China experimented with Socialism for a few decades between 1949 and 1978, until finally realising that Capitalism was clearly superior to Communism and adopted a free market capitalist economy. Supposedly, all of China's problems resulted from Socialism and the huge progress China has made since the 1980s is entirely a result of Capitalism. This narrative is very misleading. It ignores the huge progress and growth made within Communist China prior to 1978. It excludes the fact that Communist leadership set China free from ruthless European Imperialism and Feudal Serfdom, that the standard of living, social and economic inequality dramatically reduced under Chairman Mao's Leadership. The status of women was greatly elevated, the commune system was organised in such a way as to liberate women from the need to perform unpaid domestic labour, the slavery of housework. Rates of female employment, university enrolment and leadership greatly increased (like most other socialist revolutions). Standards of health and education improved very substantially. The situation in China at the time of the Chinese revolution in 1949 was substantially worse than in Eastern Europe where the Soviet Revolution had occurred. Pre-communist China was one of the poorest countries in the world. Despite dramatic improvements, the poverty of the People's Republic persisted for several decades. In the late 1970s China was still far behind the Soviet Union and the First World countries in terms of development and wealth per capita. Gross Domestic Product per capita in the Soviet Union was 28 times higher than China, very few chinese people owned cars, televisions or even access to electricity. In order to address this problem more rapidly, the Communist government made some pragmatic compromises, allowing foreign capitalists to invest in China. This created an inflow of new technology that has greatly helped to increase productivity and efficiency. The countries of the former Soviet Union that have all adopted a Bourgeois type of parliament, heavily influenced by money and political lobbying, however China has retained a strong communist government that is much more resistant to corruption (although not completely). The communist party creates long term economic plans that allow them achieve huge goals that Capitalist governments are simply incapable of doing. Since the pro-capitalist reforms China has experienced the most rapid and consistent period of economic growth and poverty alleviation of any country in human history. No other country even comes sort of close. Yes China does now have some capitalist businesses, however the majority of their economy is still socialised, public enterprises and worker co-operatives."),o.a.createElement("h4",null,"Read More"))))}function at(){return Object(n.useEffect)(function(){fetch("/groups/addtopagecounter/sovietunion",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{marginLeft:"5vw",marginTop:"3vw",width:"90vw"}},o.a.createElement("h1",null,"Soviet Union"),o.a.createElement("p",null,"A great number of formerly classified CIA documents have revealed that the dominant narrative about the USSR being controlled by a tyrannical oligarchy is simply not true. The Soviet Union was actually quite progressive and humanistic for the time period. Their worst enemy admits this blatantly. These are some facts we know about the USSR. It took several decades to develop Socialism, it took time to build the industry and technology that was needed. They also experienced a quite severe crisis: a civil war, numerous invasions and WW2. By the mid 20th century life in the Soviet Union became quite free. The USSR experienced very rapid economic growth, double that of the United States, this growth was targeted at raising the well being, health, education, wages and general living standards of the population. The socialist government massively reduced economic inequality. The highest rate of pay was only about three times higher than the lowest. In Capitalist Societies Bourgeois elites can make hundreds or thousands of times more money than working class people with income gained from exploiting workers. The government consciously tried to reduce the prices of things and the rates of unemployment (to make it easier for people to find jobs and increase economic growth) and were quite successful. All education was free and most university students were paid to study. Soviet citizens ate a slightly more nutritious diet than the United States\u2019 population. The Soviet Union was highly feministic, with rates of female employment and enrolment at University roughly twice that of the USA. The communist government provided women with very cheap subsidised childcare services, paid maternity leave, divorce was easy to obtain, abortion was provided for free at public expense, the rates of infant mortality and teenage pregnancy were quite low. The criminal justice system in the USSR was aimed at rehabilitation. Prisoners were paid fairly well for their work, they were always adequately fed and they only worked the standard 8 hour day. Non-violent criminals were not confined to a cell. The USSR created a quality free universal healthcare system, one of the first in the world. The USSR built houses at a faster rate than any other country, they didn\u2019t treat housing as a commodity but rather, as something everyone needs. It was the first country to more or less eliminate homelessness and their constitution guaranteed housing to all citizens. The USSR did not have exploitative or imperialistic economic relations with it\u2019s trading partners, on the contrary, it gave huge amounts of financial aid, many billions of dollars worth."),o.a.createElement("p",null,o.a.createElement("strong",null,"Wage Categories In Soviet Industry")," paragraph 1 \u201cA continuous increase in work productivity and diminished production costs provide the Soviet Government with the opportunity of carrying out it's policy of lowering prices, which leads to a steady increase in real wages and to a further elevation in the nations standard of living.\u201d The highest pay grade was only about 2.6 times above the lowest. ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000700070145-2.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000700070145-2.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Soviet Wages and Wage Differentials")," page 8 The highest rate of pay was only about three times higher than the lowest. In Capitalist Societies Bourgeois elites can make hundreds or thousands of times more money than working class people with income gained from exploiting workers.",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP79-01093A000400010003-1.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP79-01093A000400010003-1.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"The Challenge of Soviet Economic Expansion")," page 2 para 5 \u201cOur best estimates of Soviet domestic economic expansion place the average annual rate of growth of the Soviet Economy as a whole at between six and seven percent over the past eight years. Their industrial growth rate has averaged between eight and nine percent in this same time. Over the same period, our own average annual increase, both in Gross National Product and in Industrial Production, has been about three percent.\u201d (ie. The rate of economic growth was twice as fast in the USSR than the USA, at least until the USA started to be aware of and retaliate to this immense threat.)",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP62S00545A000100090039-5.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP62S00545A000100090039-5.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"USSR Report Consumer Goods and Domestic Trade")," page 4 para 4 \u201cDeveloped Socialist society is characterised by the plan based growth of the economy, the dynamic development of key economic sectors, and, the corresponding increases in public well-being. \u201d",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp82-00850r000500070070-2"},"https://www.cia.gov/readingroom/document/cia-rdp82-00850r000500070070-2")),o.a.createElement("p",null,o.a.createElement("strong",null,"The Employment Situation in the Soviet Union")," page 5 paragraph 3-4 \u201cExtremely high participation of women in the Soviet Labour force, about 2 thirds of adult women as compared with only 1 third in the US.....Despite the overall success of the USSR in creating more jobs than are economically justifiable by western standards, substantial unemployment has persisted amongst some groups.\u201d (i.e. The USSR has massively reduced the rate of unemployment, making it much easier for people to find a job.)"),o.a.createElement("p",null,o.a.createElement("strong",null,"Marriage and the Family in the USSR")," page 5 para 4 The abolition of private ownership of the means and instruments of production has freed the family from the evil influence of the cash nexus. Socialist society has brought the conditions for a really free marriage. Consolidation of the socialist system, the growing well-being of the people and the emancipation of women mean that the overwhelming majority of marriages in the USSR have nothing to do with the considerations of gain. Mutual love of man and woman and affection for children is the guiding force of marriage in the Soviet Union.",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80T00246A001600750004-8.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP80T00246A001600750004-8.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Soviet Concern over Falling Birth Rate")," page 8 para 2 \u201cIn recent years, efforts to increase female employment have intensified....Wages in the service sector, where women workers predominate, have been raised substantially and child care facilities have been expanded.... In urban areas, 90% of women are either employed or studying full time, compared to 50% in the USA\u201d page 9 para 3 \u201cThe government provides free medical services, child care facilities, paid maternity leave, family allowance payments, it's policy with respect to abortion is liberal and divorce is relatively easy to obtain.\u201d",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP85T00875R001600010074-9.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP85T00875R001600010074-9.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Comments on the Change in Soviet Leadership")," \u201cEven in Stalin's time there was collective leadership. The western idea of a dictator in the communist setup is exaggerated. Stalin, although holding wide powers, was merely the captain of a team\u201d (ie. Stalin wasn't a dictator)",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00810A006000360009-0.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP80-00810A006000360009-0.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Stength-diet 1983")," \u201cAmerican and Soviet citizens eat about the same amount of food each day but the Soviet Diet may be more nutritious.\u201d",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP85M00363R000601440024-5.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP85M00363R000601440024-5.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"The Educational Attainment Process in the Soviet Union: A Case Study")," page 1 para 1 \u201cThe Soviet government provides tuition free schooling at all levels and stipends for more than 70 of full time students of higher or special secondary education.\u201d (ie. The majority of higher education students were actually paid to study and all education was at least free)",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP83T00966R000100060029-4.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP83T00966R000100060029-4.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Forced Labour in the USSR 1953-57")," page 2 para 2 \u201cThe administration of the camp system has undergone a radical transformation since 1953, and the treatment of prisoners has improved substantially... It was decided some time in 1956 to convert all corrective labour camps into corrective labour \u201ccolonies\u201d, where the principle emphasis would be on rehabilitating the prisoners and returning them speedily to civilian life rather than exploiting prison labour for economic purposes.\u201d page 8 para 4 \u201cAbout 1952-53 Soviet administrators evidently became convinced that economic progress in a modern industrial state must depend on the provision of incentives rather than the use of coercion.\u201d",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP79R01141A001200060002-9.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP79R01141A001200060002-9.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Forced Labour Camps in the USSR; Transfer of Prisoners Between Camps Until 1952")," prisoners were given a guaranteed amount of food, plus extra food for over-fulfilment of quotas. After 1952, prisoners were paid according to the amount of work completed. For over-fulfilling the quotas by 105%, one day of sentence was counted as two, thus reducing the sentence of criminals. Until 1954, prisoners worked 10 hour days, after 1954 their work day was reduced to the normal 8 hour day worked by most soviet citizens. 95% of gulag prisoners were actual criminals.",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80T00246A032000400001-1.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP80T00246A032000400001-1.pdf")),o.a.createElement("p",null,o.a.createElement("strong",null,"Soviet Subsidies To Eastern Economies")," page 1 para 2 \u201cThe theory that the Soviet Union exploits Eastern 'Europe's Eastern Europe through the imposition of discriminatory terms of trade-is not supported by the facts. A recent study trade. A recent study concluded that the Soviet Union has granted Eastern Europe large trade subsidies, averaging $4.8 billion dollars between 1974-78 and rising to 10.4 billion in 1979 and a staggering 20.1 billion in 1980\u201c",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP88B00443R001103940160-0.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP88B00443R001103940160-0.pdf")),o.a.createElement("p",null,"A US Academy of Political Science, of which several former Presidents are honorary members, published an article in which they claim that the Soviet Union housing was treated as a social good instead of a commodity. The USSR built houses at a faster rate than any other country and their 1977 constitution guaranteed housing to everyone as a human right. Morton, Henry W. \u201cHousing in the Soviet Union.\u201d\xa0Proceedings of the Academy of Political Science\xa035, no. 3 (1984): 69\u201380. https://doi.org/10.2307/1174118."),o.a.createElement("p",null,"Clearly, the Soviet Union was not governed by a terrible authoritarian regime. It may not have been Utopia, but they took many substantial steps in the right direction. Notice the very stark difference between how the Soviet Union is portrayed in the Capitalist media and education systems. At school I was just taught that the USSR was a terrible authoritarian country were everyone lived in poverty and the government murdered or enslaved everyone who disagreed with their ideology. This is clearly slander."),o.a.createElement("p",null,"I cannot discredit every single allegation that has been made about the USSR and there certainly were mistakes made along the way. It wasn\u2019t perfect. Probably the most credible allegation is that of homophobia, male gay sex was made illegal in 1934 (like most countries at the time). This was certainly a problem, however it is not constructive to just bluntly dismiss all of the huge achievements because of these errors. Overall, the Soviet Union was a very positive thing for working class people around the world and this is why the ruling class have slandered socialism so terribly. We must take allegations about socialism with a grain of salt. There are many people who have very strong motives for slandering the USSR, particularly the rulers of capitalist countries. Our politicians do not consciously plan to try to raise people wages, reduce unemployment, or to ensure everyone has a home. By all these indicators, the situation has been growing much worse since the 1970s in Australia. The numerous war crimes and instances of mass murder committed by the armies of Capitalist governments are well documented."),o.a.createElement("p",null,"Revolutions always happen in the real world with real people. The people involved are always imperfect human beings, living in a very imperfect world. When the USSR was born, Russia was a very poor, mostly feudal country. Most of the population were illiterate peasants, there would be occasional famines. The leadership of the Bolshevik Party was responsible for ending this terrible situation. The first priority of the party was to try to increase the standard of living, educate the people and industrialise as fast as possible in order to be able to compete with the western capitalist countries. If Stalin had not pushed for very rapid industrialisation, the Soviet Union would not have been strong enough to survive the threat of Fascism in Europe and Russia would have been destroyed in WW2. We know this because we can compare the Soviet Union with other socialist experiments that were more \u201clibertarian\u201d, like the Spanish Libertarian revolution in 1936 and the Paris Commune. These revolutions, while perhaps more directly democratic were quickly crushed by hostile external imperialist forces. The USSR survived, produced a viable lasting form of socialism that massively improved the lives of hundreds of millions of people. It is important to keep in mind that what is ideal and what is practical are two separate things."),o.a.createElement("p",null,"It is misleading to say the USSR was \u201cauthoritarian\u201d. It is much more accurate to say it had strong responsible leadership. There can be valid reasons to exclude people from political participation for the sake of their own protection. For example, my grandmother just believes women are supposed to be housewives. Even though I am a man, I know she is obviously wrong, women have huge potential and are overall, just as amazing as men. Should we let her drag other women down with her? A bunch of illiterate peasants who struggle to even meet their own basic needs, simply to not have the knowledge and competence for organising a revolution. It's not their fault, they've been oppressed terribly by their feudal lords, but realistically they just don't know what to do."),o.a.createElement("p",null,"Power does have a very strong tendency to corrupt people. We need to be wary of this, however realistically, revolutions require some sort of leadership. Our modern world is far too complicated for a direct form of democracy to be practical on a huge scale with millions of people."),o.a.createElement("p",null,"We need to try to learn from the experiences of the USSR and other Socialist countries. They have found much better ways of choosing leaders who are more responsible, sympathetic and ethical. We need to try to use modern technology to try to enhance the strengths of socialism and give each other more freedom and democracy. This is why we have tried to build the democratic-social-network."))}function nt(){return Object(n.useEffect)(function(){fetch("/groups/addtopagecounter/china",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{marginLeft:"5vw",marginTop:"3vw",width:"90vw"}},o.a.createElement("h1",null,"China"),o.a.createElement("p",null,"Capitalist historians would have us believe that the People's Republic of China experimented with Socialism for a few decades between 1949 and 1978, until finally realising that Capitalism was clearly superior to Communism and adopted a free market capitalist economy. Supposedly, all of China's problems resulted from Socialism and the huge progress China has made since the 1980s is entirely a result of Capitalism. This narrative is very misleading. It ignores the huge progress and growth made within Communist China prior to 1978. It excludes the fact that Communist leadership set China free from ruthless European Imperialism and Feudal Serfdom, that the standard of living, social and economic inequality dramatically reduced under Chairman Mao's Leadership. The status of women was greatly elevated, the commune system was organised in such a way as to liberate women from the need to perform unpaid domestic labour, the slavery of housework. Rates of female employment, university enrolment and leadership greatly increased (like most other socialist revolutions). Standards of health and education improved very substantially. The situation in China at the time of the Chinese revolution in 1949 was substantially worse than in Eastern Europe where the Soviet Revolution had occurred. Pre-communist China was one of the poorest countries in the world. Despite dramatic improvements, the poverty of the People's Republic persisted for several decades. In the late 1970s China was still far behind the Soviet Union and the First World countries in terms of development and wealth per capita. Gross Domestic Product per capita in the Soviet Union was 28 times higher than China, very few chinese people owned cars, televisions or even access to electricity. In order to address this problem more rapidly, the Communist government made some pragmatic compromises, allowing foreign capitalists to invest in China. This created an inflow of new technology that has greatly helped to increase productivity and efficiency. The countries of the former Soviet Union that have all adopted a Bourgeois type of parliament, heavily influenced by money and political lobbying, however China has retained a strong communist government that is much more resistant to corruption (although not completely). The communist party creates long term economic plans that allow them achieve huge goals that Capitalist governments are simply incapable of doing. Since the pro-capitalist reforms China has experienced the most rapid and consistent period of economic growth and poverty alleviation of any country in human history. No other country even comes sort of close. Yes China does now have some capitalist businesses, however the majority of their economy is still socialised, public enterprises and worker co-operatives."),o.a.createElement("p",null,"The 1949 Communist Revolution brought enormous improvements to China. In the first five year economic plan industrial production increased 420%, capital goods increased 570%, steel production 1300% and cement 700%. They constructed 1900 new types of machines. The initial priority was industrialising as quickly as possible in order to improve the standard of living of the population (ref #1, ref #2). The work day became restricted to 8 hours, real wages tended to increase and working conditions improved. There was a steady elimination of illiteracy. The status of women improved dramatically. Most entered the workforce, equal pay for equal work was introduced. At the grassroots organisational level, in factories, farms, neighbourhood committees, female party members frequently outnumbered men. There were also substantial efforts to include women in the upper party echelons, up to 10% in 1973 while previously there had been zero. Birth control devices were distributed by the government without charge by the women's federation. The commune system attempted to eliminate the need for women to do unpaid housework. Traditionally female domestic labour such as cooking, laundering, sewing and childcare were performed by communal institutions (ref #3, ref#4). The land redistribution reforms specified that women were entitled to an equal allotment of land as men. Female enrolment in University increased substantially, for example at the North China Revolutionary People's University near Beijing, 30% of students were women by 1949. Many nurseries were established to help raise children and 45 days paid maternity leave was introduced. Slavery, child sales and exploitation of child labour were made illegal. There was a distinct improvement in the mortality rate among infants and mothers. Polygamy, concubinage, prostitution, the sale of women, marriage arranged by parents without voluntary agreement of the parties all became illegal. Women gained an equal right to divorce (ref #5)."),o.a.createElement("p",null,"For the first decade of the Chinese revolution, substantial progress was made in improving the standards of living and education. The Communist party had successfully unified China into a strong that had assumed a place of primary importance in the strategic thinking of world superpowers. However, in the second decade after the 1949 revolution, there was a period of relative stagnation. There have only been two, relatively short periods of negative economic growth in the history of the People's Republic of China, a few years following The Great Leap Forward of 1959 and a few more years following the Cultural Revolution 1967. For most of the history of Communism in this country, the trend has been quite strong and steady economic growth (ref #6). In the early years, Chairman Mao closely imitated the Stalinist approach to Socialism, very rapid, somewhat forceful industrialisation. It was understood that while this may have been less than ideal, alleviating poverty by increasing the productive forces of society was a greater priority. However, after the first decade, the communist party decided to conduct some social experiments in order to try to find a more democratic form of socialism. This proved to have some disastrous economic results, and these mistakes were soon rectified. On balance, however, even during the worst periods the country retained a certain cohesiveness and sense of national unity. The charisma of Mao Tse-tung remained a strong unifying influence (ref #6). There were some famines during the early years of the Chinese revolution because the country had been a poor feudal society prior to 1949. All feudal societies experience famines every few years, their technology is not advanced enough to ensure a constant stable supply of food (ref #7, ref #8, ref #9). The communist party could not just snap their fingers and suddenly and magically fix everything that was wrong with China. It took time to develop socialism. Despite their mistakes, the overall trend has been dramatic increases in life expectancy, improvements to the standards of health and nutrition, and a decline in the rate of death. This was particularly true during the leadership of Chairman Mao (ref #10, ref #11, ref #12, ref #13). The claim that Chairman Mao killed millions of innocent people is slander spread as Capitalist anti-Communist propaganda."),o.a.createElement("p",null,"Despite all the improvements delivered by Socialism in China, by the late 1970s, poverty was still widespread. Gross Domestic Product Per Capita was still only twenty times lower than the Soviet Union and 50 times lower than Australia (ref #14, ref #15, ref #16). In 1978, the successor to Chairman Mao, Deng Xiaoping, introduced a series of pro-market reforms, that allowed some foreign Capitalist investment and opening up to international trade. This has resulted in the most rapid and consistent period of economic growth of any country in human history by far, averaging 10% GDP growth per-capita for four decades straight (ref #17, ref #18, ref #19). Peoples' incomes have increased dramatically (ref #20). The cost of living is also relatively cheap compared with Capitalist countries like Australia, data gathered by numerous crowd sourced cost-of-living web sites confirm this conclusion (ref #21, ref #22, ref #23, ref #24, ref #25)."),o.a.createElement("p",null,"In the Capitalist media, China is frequently misrepresented as having a tyrannical authoritarian government. In reality, the population greatly appreciate the enormous improvements that have been delivered by the communist party and mostly co-operate with their leadership. One study performed by academics at Harvard University found that 95% of Chinese people are satisfied with the communist party (ref #26). Chinese police usually don't carry guns (ref #27, ref #28) while Australian police usually do carry guns (ref #29, ref #30). The rate of imprisonment per capita is about a quarter lower than Australia (ref #31). China has quite a participatory form of democracy with extensive consultation and discussion between the people and the government. All laws require public consultation before they can be approved (ref #32, ref #33, ref #34, ref #35). In a study conducted by Chinese academic Li Yao, released in 2017, the majority of protests which were non-controversial did not receive much if any negative police action, which is to say police may have been present but in no more capacity than Western police would be attending to a protest/mass gathering event. The idea that Chinese do not protest or would be brutally repressed for any kind of political action does not seem to be supported by existing data (ref #36)."),o.a.createElement("p",null,"In recent years, two separate factions have appeared in the Australian communist movement, the party split into the Communist Party of Australia (CPA) and the Australian communist party (ACP). One of the main points of disagreement is over whether or not to support China. The ACP believe that China has devolved into capitalism, it has become a social democracy like the Scandinavian countries. They believe this means that the high standard of living that has been achieved for the Chinese population is a result of imperialism, the exploitation of working class people in foreign countries. Real socialism is internationalist, favouring equality and mutual respect between countries. In socialism the worker class at the dominant class in society, in social democracy, a Capitalist oligarchy is dominant, however they have made large concessions to the working class within their own country. This view is incorrect, China's relationships with other countries are much more humanistic. The People's Republic has undoubtedly taken on some capitalistic characteristics, economic inequality has increased and there are more capitalist businesses now, however, the Working class are still the dominant class. China is the reverse of social democracy. Social-democracy is the Bourgoisie making some concessions to the working class that ultimately allow them to stay dominant, it placates the working class, China is the opposite of this. Globally, the Bourgoise are still the dominant class and this has forced The CPC to make some concessions, economic isolationism is a recipe for poverty and catastrophe. China forms mutually beneficial partnerships with other countries and does not try to dominate, control or exploit them. For the last few hundred years, the Scandinavian countries have engaged in the same kind of militaristic and ruthless imperialism that other European countries such as Britain and France have also engaged in. The Scandinavian countries have dozens of foreign military bases and have been involved in dozens of aggressive wars since World War Two (ref #37, ref #38, ref  #39, ref #40, ref #41, ref #42, ref #43). Since the founding of the People\u2019s Republic, China has never started a single war or conflict, and has never taken one inch of land from other countries. China has only engaged in military conflicts for the purpose of defending territory that has historically been a part of Modern China for longer than most of the modern nation states of Europe and America have even existed. The former US president Jimmy Carter made not of how the People's Republic is much less militaristic than the USA while talking to Donald Trump, \u201cSince 1979, do you know how many times China has been at war with anybody? None. And we have stayed at war\"(ref #44, ref #45). The western media often alleges that China has tried to expand it's territory into regions such as Tibet, Xinjiang, Hong Kong, Taiwan and the South China Sea. The Qing Dynasty of China conquered Xinjiang in 1759 and has been a region of China for most of that time (ref #46) Tibet has been a part of China for most of the period since 1720 (ref #47, ref #48) China has been involved in the regions of the South China Sea that it claims for thousands of years, they were the first to map, settle and use the natural resources. There is an extensive historical and archaeological record that confirms this (ref #49). Taiwant has been a part of China for most of the time since 1683 (ref #50) Hong Kong has been a part of China for most of the time since 221BC (ref #51). The concept of Hong Kong and Taiwan being separate, independent countries is a very new one, Hong Kong is only thought of as independent because it was colonised and conquered by the British in 1841. China only has one military base outside of it's own historical territories, a base in the east African Country of Djibouti, and only since 2017. This is largely for the purpose of preventing piracy in the Indian Ocean and defending Chinese trade ships passing through the Red Sea. They were only able to build the base with the agreement of the Djibouti government, as do many other countries (ref #52, ref #53, ref #54). Imperialism is a coercive, tyrannical, exploitative relationship where one country dominates another. China's relationships with other countries are simply not like this, their economic support in the third world countries has brought enormous economic growth. An imperialist country will try to weaken and control their subject countries as much as possible. China has objectively helped numerous countries to develop, grow and strengthen. The goal is to form mutually beneficial partnerships that make both countries' stronger (ref #55, ref #56). The People's Republic has also shown great leniency with the terms of their investment, there are many examples of them renegotiating loans or providing debt relief when countries have struggled to pay (ref #57, ref #58). They have forgiven $10 billion in debt to third world countries (ref #59). Capitalist countries enforce property rights with the violence of the state. The fact that China doesn't have military bases in almost all the countries they invest in gives those countries a substantial level of power. They could decide to not repay China, but this would result in them losing a very formidable and valuable friend. China's lack of violent intimidation towards other countries could be described as libertarian. In the future their behaviour may change, but so far they have become hugely influential around the world by much more humanistic methods than how the European/US empires were built."),o.a.createElement("p",null,"There are numerous common talking points that are made in the capitalist media when talking about the supposedly \u201cauthoritarian\u201d nature of China. We often hear about the oppression of the Uighur and Tibetan people, as well as the religious sect Falun Gung. The alleged Tiananmen Square massacre is frequently referred to. In all cases, these allegations are provably false and slanderous. The suggestion that the People's Republic is committing cultural genocide against the Uighur people or locking them up in concentration camps is simply not true. In 2019 \xa0two coalitions sent competing letters to the UN Human Rights Council, one block condemning China's prisons in Xinjiang and another block showing support. Most of the countries condemning the prisons were western European countries, many with extensive histories of ruthless imperialism and colonialism, many who had committed genocide themselves numerous times. Most of the countries supporting China were Muslim majority countries, third world or socialist. The Palestinians, the worst oppressed nation of mostly Muslim people, approved of China's Uighur prison camps (ref #60). The truth is that it is about counteracting a very real terrorist threat and the prisons themselves are very humane and rehabilitative. The Communist Party practices very strong affirmative action. The government actively tries to lift up disadvantaged groups in society in order to raise everyone to the same level and give all Chinese people an equal opportunity in life. Some regions are more poor or less developed and need more assistance than others so the government gives them more support. This is communist philosophy in practice, it is an example of the principle, \u201cfrom each according to their ability, to each according to their need\u201d. For example minority groups like the Uighur and Tibetan people receive extra subsidies  for health, education, infrastructure and a variety of other reasons. Entrance scores for tertiary education are reduced and university substantially cheaper. Quotas are sometimes set for particular jobs where a certain number of disadvantaged minorities must be chosen (ref #61). The capitalist media often mentions Chinese oppression and organ harvesting from the Falun Gung religion. First of all, we must consider that the practice of transplanting organs from people who have recently died and assuming they consent unless they say otherwise, is relatively common. When you die, you no longer need the organs, you may as well use them to save somebody else's life. Many countries have this policy, including all of Scandinavia, France, Portugal, Greece, Austria, Belguim and many other places that are generally not regarded as being controlled by \u201cauthoritarian\u201d, regimes. In 2017, China decided to ban this practice with regards to executed criminals due to concerns about this distorting the outcome of the judicial process (ref #62, ref #63). There are members of the Falung Gung group who are actual criminals and many of the religions' teachings are dangerous and harmful. They have prejudiced views towards homosexuals and interracial children. The leaders advise people not to take medicine. Falung Gung is also associated with a far right wing/fascist newspaper called the Epoch Times (ref #64, ref #65). With the Tiananmen square protests of 1989, there are strong reasons to believe that the story of the government massacring innocent protesters has been fabricated as anti-communist propaganda. There was certainly some violence, nobody really denies this. However, the communist party claim that a small minority of the protesters became violent, shooting at and throwing molotov cocktails at the People's liberation army, who then fired on the agressors in self defence. No photographic or video evidence shows who initiated the violence and therefore who was actually the aggressor. Deng Xiaoping's pro-capitalist reforms that began in 1978 were a valid cause for anxiety among the population. This was a new experimental strategy that could justifiably be viewed as compromising socialism to some extent. In hindsight, Xioaping's reforms have proven to be very successful, with strong net benefits for the Chinese population, however it was natural for people to be worried and a restoration of full capitalism. The western media has misrepresented the protests as being about demands for a western, bourgoise style of democracy while in reality, many were protesting because they were worried that their political system might become a capitalist type of democracy. Very drawn out negotiations between the government and protest leaders came to nothing and eventually the Party decided to send soldiers to move the protesters out of the square. No western journalists claim to have actually been present when the fighting started and there is no real basis for the positive assertion that there was a cold blooded massacre of innocent people (ref #66, ref #67). The capitalist media does some very extreme mental gymnastics in order to portray Socialist countries like China in a negative way."),o.a.createElement("p",null,"China has become a highly innovative, cutting edge country. They have created the most powerful quantum supercomputers by far, 1 million times faster than Google's quantum computer (ref #68, ref #69, ref #70). The People's Republic has constructed a quantum internet that can transmit information instantaneously, faster than the speed of light (ref #71, ref #72). They are building enormous construction projects, like a dam, entirely with robots (ref #73). China can build ten story buildings in 29 hours (ref #74). They have the world's largest super fast train network and the world's fastest trains (ref #75, ref #76). The People's Republic has constructed a 6g mobile network that is 10-20 times faster than 5g (ref #77). They also have the most powerful fusion reactors, they can maintain a reaction five times hotter than the sun for 17 minutes (ref #78, ref #79). China must be a very exciting place to live where people can really look forward to a brighter future."),o.a.createElement("p",null,"In conclusion, it is quite clear what China actually is. The People's Republic is a mostly socialist country that has made some relatively large concessions to the Bourgeoisie. These compromises have resulted in strong overall net benefits for the population, enormous improvements to the standard of living and quality of life. China is responsible for the most dramatic and rapid poverty alleviation in all of human history. 850 million Chinese people who used to be impoverished now have all their basic needs met. This prosperity has not resulted from imperialistic exploitation of workers in other countries. China has relatively libertarian, mutually beneficial relationships with foreign countries. They have created very strong economic growth in Africa and other Third World areas of the Earth. The Capitalist media of western countries has slandered China terribly precisely because of their enormous humanistic achievements. Hopefully, within the next few decades, China will overtake the United States of America as the dominant global superpower and this will be a very positive thing for working class people around the world."),o.a.createElement("h2",null,"References"),o.a.createElement("p",null,"1)https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000700230243-5.pdf CHINA\u201dS ECONOMIC ACHIEVEMENTS AND THE 1955 Leipzig SPRING FAIR page 2 para 2, page 2 para 3 2)https://www.cia.gov/readingroom/docs/CIA-RDP62S00545A000100090004-3.pdf COMMUNIST CHINA'S ECONOMY \u2013 CURRENT AND FUTURE page 1 para 3, page 4 para 2, page 5 para one 3)https://www.cia.gov/readingroom/docs/CIA-RDP78-02771R000300120006-7.pdf 'COLLECTIVE LIFE' AND THE FAMILY IN CHINA'S COMMUNES page 2 para 4 4)https://www.cia.gov/readingroom/docs/CIA-RDP79R01142A001100040002-1.pdf THE ROLE OF WOMEN IN CHINA page 1 para 1, page 2 para 1, page 1 para 3 5)https://www.cia.gov/readingroom/docs/CIA-RDP82-00457R007600040003-5.pdf  WOMEN IN NEW CHINA Page 19 para 3, page 23 para 2, page 45 para 3, page 46 para 5, page 54 para 3-4, page 56 para 1 6)https://www.cia.gov/readingroom/docs/CIA-RDP79-00927A007400010002-0.pdf China Twenty Years After Communism page 3 para 3, page 7 para 2 7)https://www.europenowjournal.org/2018/09/04/famine-and-dearth-in-medieval-england/ 8)https://en.wikipedia.org/wiki/List_of_famines 9)https://www.historyextra.com/period/medieval/why-did-people-die-danger-medieval-period-life-expectancy/ 10)https://www.macrotrends.net/countries/CHN/china/death-rate 11)https://data.worldbank.org/indicator/SP.DYN.CDRT.IN?locations=CN 12)https://www.statista.com/statistics/1041350/life-expectancy-china-all-time/ 13)https://www.macrotrends.net/countries/CHN/china/life-expectancy 14)https://www.macrotrends.net/countries/CHN/china/gdp-per-capita 15)http://data.un.org/Data.aspx?d=SNAAMA&f=grID%3A101%3BcurrID%3AUSD%3BpcFlag%3A1%3BcrID%3A810 16)https://data.worldbank.org/indicator/NY.GDP.PCAP.CD?locations=AU 17)https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000401280001-8.pdf CHINA's ECONOMIC REFORMS: STRETCHING SOCIALISM page 1 para 3 18)https://www.cia.gov/readingroom/docs/CIA-RDP85T01058R000201610001-6.pdf CHINA:COPING WITH ACCELERATED GROWTH 1985 page 2 para 1 19)https://www.cia.gov/readingroom/docs/DOC_0005467611.pdf CHINA\u201dS DOMESTIC ECONOMY AND TRADE page 1 para 1 20)https://data.worldbank.org/indicator/NY.ADJ.NNTY.PC.CD?locations=CN 21)https://www.numbeo.com/cost-of-living/compare_countries_result.jsp?country1=China&country2=Australia 22)https://www.expatistan.com/cost-of-living/country/comparison/australia/china 23)https://livingcost.org/cost/australia/china 24)https://www.mylifeelsewhere.com/cost-of-living/china/australia 25)https://www.nationmaster.com/country-info/compare/Australia/China/Cost-of-living 26)https://news.harvard.edu/gazette/story/2020/07/long-term-survey-reveals-chinese-government-satisfaction/ 27)https://www.washingtonpost.com/news/worldviews/wp/2014/09/26/newly-armed-police-in-china-say-they-fear-their-guns-as-much-as-public/ 28)http://www.china.org.cn/china/2014-04/21/content_32154769.htm 29)https://www.aic.gov.au/sites/default/files/2020-05/sarre.pdf 30)https://www.abc.net.au/radio/programs/nightlife/history-police-guns/13622148 31)https://www.sentencingcouncil.vic.gov.au/sentencing-statistics/international-imprisonment-rates 32)https://law.yale.edu/china-center/resources/public-participation-china 33)https://www.brookings.edu/blog/order-from-chaos/2020/06/08/chinese-law-requires-public-consultation-in-lawmaking-what-does-it-mean-for-the-hong-kong-national-security-legislation/ 34)https://en.wikipedia.org/wiki/Chinese_People%27s_Political_Consultative_Conference 35)https://www.globaltimes.cn/page/202206/1269361.shtml 36)Li, Yao (April 2019).\xa0\"A Zero-Sum Game? Repression and Protest in China\".\xa0Government and Opposition.\xa054\xa0(2): 309\u2013335.\xa0doi:10.1017/gov.2017.24.\xa0ISSN\xa00017-257X. 37)https://www.telesurenglish.net/analysis/Scandinavias-Covert-Role-in-Western-Imperialism-20170320-0022.html 38)https://nordics.info/show/artikel/the-colonialism-of-denmark-norway-and-its-legacies 39)https://en.wikipedia.org/wiki/Scandinavian_colonialism 40)https://www.forsvaret.dk/en/roles-and-responsibilities/International-operations/ 41)https://www.forsvarsmakten.se/en/activities/current-international-missions/#:~:text=Some%20360*%20Swedish%20military%20personnel,*As%20of%20February%202020. 42)https://en.wikipedia.org/wiki/Norwegian_military_operations_abroad 43)https://www.forsvaret.no/en/exercises-and-operations/international-operations 44)https://www.npr.org/2019/04/15/713495558/president-trump-called-former-president-jimmy-carter-to-talk-about-china 45)https://www.newsweek.com/donald-trump-jimmy-carter-china-war-infrastructure-economy-trade-war-church-1396086 46) Liu, Tao Tao; Faure, David (1996).\xa0Unity and Diversity: Local Cultures and Identities in China. Hong Kong University Press.\xa0ISBN\xa0978-9622094024. Retrieved\xa010 March\xa02014. page78 47)Szczepanski, Kallie (31 May 2018).\xa0\"Was Tibet Always Part of China?\".\xa0ThoughtCo. 48)Lamb, Alastair (1989),\xa0Tibet, China & India, 1914-1950: A history of imperial diplomacy, page 2-3 Roxford Books,\xa0ISBN\xa09780907129035 49) https://www.mfa.gov.cn/ce/ceca/eng/sgxw/t1814543.htm 50)Teng, Emma Jinhua (2004),\xa0Taiwan's Imagined Geography: Chinese Colonial Travel Writing and Pictures, 1683\u20131895, page 34-59, Cambridge MA: Harvard University Press,\xa0ISBN\xa0978-0-674-01451-0. 51) \"Nam Viet | ancient kingdom, Asia\".\xa0Encyclop\xe6dia Britannica. 20 July 1998. Retrieved\xa031 July\xa02020. 52)Vinayak Bhat, Col (October 30, 2020).\xa0\"Construction fast-tracked at China PLA's first overseas base in Djibouti\". India Today. Retrieved\xa0November 20,\xa02020. 53)Foreign Ministry Spokesperson Hong Lei's Regular Press Conference on January 21, 2016\".\xa0Ministry of Foreign Affairs of the People's Republic of China. January 21, 2016. Archived from\xa0the original\xa0on May 18, 2017. 54)https://politicstoday.org/djibouti-surrounded-by-military-bases-of-china-us-france-uk-germany-others/ 55)https://www.sciencedirect.com/science/article/pii/S2590291122000304 56)https://openknowledge.worldbank.org/bitstream/handle/10986/33529/wber_32_3_610.pdf?sequence=1&isAllowed=y 57)https://www.economist.com/finance-and-economics/2022/02/12/china-does-not-always-collect-its-debts-on-time 58)http://www.sais-cari.org/debt-relief#:~:text=In%20February%20of%202021%2C%20Chinese,program%20is%20managed%20by%20CIDCA. 59)https://www.forbes.com/sites/kenrapoza/2019/05/29/china-has-forgiven-nearly-10-billion-in-debt-cuba-accounts-for-over-half/?sh=235edfc3615b 60)https://thediplomat.com/2019/07/which-countries-are-for-or-against-chinas-xinjiang-policies/ 61https://digitalcommons.law.uw.edu/cgi/viewcontent.cgi?article=1147&context=wilj Affirmative Action, Ethnic Minorities and China's Universities page 3-5 62)https://www.kidney-international.org/article/S0085-2538(19)30185-1/fulltext 63)https://www.washingtonpost.com/world/asia_pacific/in-the-face-of-criticism-china-has-been-cleaning-up-its-organ-transplant-industry/2017/09/14/d689444e-e1a2-11e6-a419-eefe8eff0835_story.html 64)https://www.abc.net.au/religion/the-abc-is-right-that-falun-gong-teachings-are-dangerous/12538058 65)https://www.nytimes.com/2020/10/24/technology/epoch-times-influence-falun-gong.html 66)https://www.criticalsocialworkpublishinghouse.com/post/1989-tiananmen-square-student-massacre-was-a-hoax 67)https://www.workers.org/2022/06/64607/ 68)https://www.indiatimes.com/technology/news/chinese-worlds-fastest-quantum-computer-552715.html 69)https://www.scmp.com/news/china/science/article/3153727/china-launches-worlds-fastest-programmable-quantum-computers 70)https://www.independent.co.uk/tech/china-scientists-programmable-quantum-computers-b1946018.html 71)https://phys.org/news/2021-01-world-quantum-network.html 72)https://www.newscientist.com/article/2281591-quantum-data-link-established-between-two-distant-chinese-cities/ 73)https://www.scmp.com/news/china/science/article/3176777/chinas-robot-built-3d-printed-dam-ready-2-years-scientists 74)https://www.designdekko.com/featured/10-storey-building-made-in-28-hours-and-45-minutes-with-pre-fabricated-containers-in-china#:~:text=Chinese%20developer%20BROAD%20has%20made,how%20they%20accomplished%20this%20feat.&text=The%20BROAD%20group%20in%20China,28%20hours%20and%2045%20minutes. 75)https://edition.cnn.com/travel/article/china-high-speed-rail-cmd/index.html 76)https://edition.cnn.com/travel/article/china-fastest-maglev-train-intl-hnk/index.html 77)https://nextshark.com/chinese-lab-sets-record-for-fastest-internet-transmission/#:~:text=faster%20than%205G-,Chinese%20lab%20claims%20world%20record%20with%206G%20breakthrough%2C%2010,20%20times%20faster%20than%205G&text=A%20state%2Drun%20lab%20in,those%20of%20most%205G%20networks. 78)https://www.livescience.com/chinas-1-trillion-artificial-sun-fusion-reactor-just-got-five-times-hotter-than-the-sun 79)https://www.smithsonianmag.com/smart-news/chinas-artificial-sun-reactor-broke-record-for-nuclear-fusion-180979336/"))}function ot(){return Object(n.useEffect)(function(){fetch("/groups/addtopagecounter/cuba",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{marginLeft:"5vw",marginTop:"3vw",width:"90vw"}},o.a.createElement("h1",null,"Cuba"),o.a.createElement("p",null,"Thanks to the release of numerous formerly classified CIA documents, we now know the truth about Cuba. Most of the references for this article are directly from the website of the worst enemy of Socialism, the Central Intelligence Agency of the United States Government. There are many very rich and powerful people in this world who have strong motives for slandering Socialist countries like Cuba (especially Cuba) and hugely disproportionate access to mass mediums through which to spread these lies. The Communist Party of Cuba are radical humanists who have dramatically improved the quality of life of the the Cuban people. The government have taken large steps towards guaranteeing that all Cubans will have their basic needs met, massively reducing poverty and guaranteeing the necessities of life are affordable and in many cases provided for free at public expense. Housing, public transport, electricity, university, childcare and many other essential services are either free or cheap. The Communist party have greatly improved that status of African people and women, eliminating the worst aspects of racism and sexism. The standards of health and education are the best in the third world and in many ways as good or better than some first world countries. The Party created a much more fair and equitable distribution of wealth than Capitalist countries. Their private sector is largely worker-cooperatives, 30% of their GDP is produced by democratic businesses and self-employed people where the workers are the shareholders. The public sector is somewhat like an enormous co-operative in which all Cubans are a member and the goal is to meet human needs instead of generating profits. Their society is highly unionised with the vast majority of their people in at least one union and most work arrangements negotiated through unions. Recently, the sustainable development index found Cuba to be the most sustainable country in the world."),o.a.createElement("p",null,"When you look through the references for this essay, you may find it strange to see the worst enemies of Socialism admitting very blatantly that communism leads to superior economic performance for ordinary people. This is because the Capitalist ruling class have quite a fundamentally different point of view. Their lives are largely insulated from the consequences of their actions. They mostly spend time with other elites who think in a similar way and they reinforce each others ideology and belief in their own superiority to ordinary people. In many cases they genuinely believe that capitalism is actually meritocratic and that their own merciless sociopath behaviour makes them superior to normal people. They simply do not see wage growth, low unemployment rates and dramatic improvements to the standards of health as a good thing. As long as there is economic growth and rich people are getting richer, then the economy is going great from their point of view. They simply do not see high rates of homelessness and poverty as something shameful that reflect poorly on their leadership. Therefore, most of the statistical evidence that demonstrates the huge social problems with capitalism comes directly from the statistics bureaus of the capitalist governments themselves, they don't try to hide these issues because they just don't see them as negative."),o.a.createElement("p",null,"The Cuban Communist Party have created a much more humanistic economic system that is aimed at meeting the needs of population instead of generating profits for a ruling elite. The distribution of wealth is also more equitable than most capitalist countries. For most of the history of Cuba, the average income of Cubans has tended to increase, although there was a very sharp drop in the early 1990s with the collapse of the Soviet Union, their biggest trading partner and main source of fossil fuels (ref#1). The communist party created a much more egalitarian and equitable distribution of income. They also banned passive unearned incomes from rents, dividends, interest on loans or royalties (ref#2). Unemployment rates were dramatically reduced, making it much easier to find a job and to change job (ref#3). Numerous crowd sourcing cost of living websites show that the cost of living is relatively cheap in Cuba (ref#4,ref#5,ref#6,ref#7). This is data gathered by capitalist businesses, it is not Communist government propaganda. The Cuban economic planning system largely shelters the population from the inflation experienced by other countries in Latin America. Rationing and subsidies result in fairly steady prices for food and consumer goods. The government provides many subsidies, such as for rents, public utilities, public transport and medical services. All the basic necessities of life are affordable to all Cubans (ref#8). Cuba has an unusually high rate of home-ownership and close to zero homeless people (ref #9,ref #10,ref#11)."),o.a.createElement("p",null,"The revolution has brought enormous improvements to Cuba's education system. A large-scale public education program has effectively eliminated illiteracy and has significantly upgraded Cuban educational levels. The islands educational indicators are among the best in the third world, literacy rate has risen to about 96 percent the highest in Latin America and one of the highest in the world. (ref#12). Cuba has universal free education(ref#13)."),o.a.createElement("p",null,"Cuban socialism has resulted in enormous improvements to the status of women. In few other countries are men and women treated more equally than in Cuba. The Communist Party made strong efforts to reduce sexual discrimination and initiated policies to facilitate the entry of women into the workforce. They created subsidised day care centres to provide affordable childcare. In 1953 women were 17% of total work force, by 1975 this figure had risen to 28%. By 1980 more than 40 percent of the labour union leadership was female (ref #14). In 2021, 53% of representatives in the Cuban National Parliament were women. In capitalist countries, parliaments are usually less than one third female, effectively giving men twice as much power (ref #15). Since the Cuban communist party transformed the Island, the status of African people has enormously improved. Black people no longer encounter blatant discrimination in the juridical process. Organisations limiting their membership or their activities to a particular ethnic or racial group are illegal (ref #16, ref #17)."),o.a.createElement("p",null,"Cuba has a very high quality free universal healthcare system, the standards of health have improved enormously since the revolution. Their doctors have eradicated or almost eradicated diseases like polio, diphtheria, malaria and nutritional deficiencies. The rates of teenage pregnancy and infant mortality are unusually low, even when compared to developed countries. By 1980 life expectancy had been raised to 72 years, the highest in Latin America and comparable to many first world countries. Dietary improvement through guaranteed access to basic foodstuffs also has been a  major factor in combating nutritional deficiencies and an increasing resistance to disease (ref #18). Life expectancy is now 79 years. (ref #19)."),o.a.createElement("p",null,"Cuba is a genuinely internationalist country. Nothing about the way they interact with other countries can be described as even somewhat imperialistic. They do try to form mutually beneficial relationships with other countries. They host students from all around the world, 75 different third world countries. They set up schools in developing countries to provide cheap or free education. The socialist country also provides workers at little or no charge, they send doctors, construction workers, agricultural scientists and many other kinds of assistance that help alleviate third world problems. The cumulative value of this assistance amounts to about $400 million USD (ref #20). Cuba does not export capital in order to exploit poorer weaker countries like European Oligarchs have done for hundreds of years."),o.a.createElement("p",null,"The revolutionary Island of Cuba has one of the most humane criminal justice systems in the world. Their focus is largely on rehabilitating criminals, giving them an opportunity to rebuild their lives. Incarcerated criminals are expected to study an acquire some sort of qualification if they don't have one already, this education is provided for free by the state. Inmates who are not studying are expected to work and they are paid the same amount for their labour as they would outside prison. One third is set aside to maintain the prison, pay the staff, guards, cleaners, cooks etc. They can keep the rest for themselves unless they are have any dependents who they must support. In this case, another fraction of their income is sent to the family. The rate of incarceration in Cuba is 190 per 100,000, in Australia, this figure is 214 per 100,000. (ref #21,ref #22). Professional Judges are always make their decisions with elected lay judges. The lay judges always outnumber the professional, 2 for 1 at lower level courts and 3 for 2 at higher level courts. This helps to ensure that professional judges have a genuine authority, grounded in knowledge, wisdom an moral integrity. The ability of the lay judges to overrule the professional ones means that there is greater pressure on professional judges to demonstrate their own legitimacy. They cannot make any judgement without persuading and convincing the lay judges. In capitalist countries, legal fees are usually extremely expensive, in Cuba, all lawyers are public workers, and their fees are quite heavily subsidised to make them affordable to all Cubans, not just the rich. It also is not possible to settle out of court, rich criminals cannot bribe their victims in order to escape punishment like they can in the United States (ref #21)."),o.a.createElement("p",null,"The capitalist media and capitalist academic literature generally describe Cuba's political system as highly coercive, authoritarian and tyrannical, as though the people living on the Island are too stupid to understand that their government has enormously improved their lives and the population just refuse to cooperate with this assistance. This is obviously ridiculous, the people are very supportive of the Cuban Communist Party and extremely proud of their own socialist achievements.  In our highly complicated modern world, some sort of representative democracy is needed. We must elect experts to make decisions about certain issues. Of course, a very direct sort of democracy like the one practised in Ancient Athens is inappropriate for advanced industrial societies. In Athens there was just a huge assembly that all citizens could attend and anyone can be involved in making decisions about anything. Today, democracy means electing a government that substantially fights to improve the lives of the population as much as possible. A government that actually shows leadership, tries to plan the economy in a rational way in order to meet the needs of the people, reduce exploitation and corruption as much as possible. A democratic government will try their best to consult and discuss with the population to try to reach collective decisions that most people are happy with, but also ones that are well informed with expert advice. If a question is relevant to you, or you have the expertise to understand it, then you should be directly involved in making that choice. By these criteria, Cuba probably has the most democratic government in the world. They have actively and strongly encouraged the population to participate in the political life of the island. Propaganda campaigns were used to encourage everyone to join and participate in at least one mass organisation or union (ref #23). In 2008, 81.4% of Cubans were members of unions (ref #24). The Cuban constitution was created in quite a unique way, through a process of heavy direct public consultation and debate involving the majority of the population and national referendum. No other country has had their entire constitution approved with a referendum and very few achieve such high rates of voter turnout and approval. Their two constitutional referendum, 1976 and 2019, both achieved above 85% voter turnout and 85% approval. The 1976 referendum had 98% voter turnout and 99% approval. Voting is voluntary in Cuba with no punishment or fine for abstaining (ref #25,ref #26,#27). This figures might seem too good to be true if you did not understand how enormously the Cuban government has improved the lives of the population. An integral aspect of Cuban self government is the Committees for the Defence of the revolution. These committees are a holistic system of direct democratic participation. Involvement is completely voluntary, however, the vast majority of people do join these collectives. This organisation has a range of functions, providing community services, performing a neighbourhood watch patrol, providing rehabilitation, mental health services and financial support for misdemeanour offenders (ref #28,ref #29). Besides mobilizing society for the defense of the revolution and the triumph of socialism, the CDRs also had a role in national literacy and vaccination campaigns. They maintain social hygiene by eradicating the origins of transmission for certain diseases. They popularly mobilized people for demonstrations for Elian Gonzalez, the \u201cFive Heroes\u201d spies, or Mariel Boatlift. The CDR is also vital for the National Civil Defense as they evacuate millions of people during hurricanes and are responsible for block clean up operations to remove debris and clear up roads, among others. CDR has additional responsibilities beyond monitoring individual's political and moral background; these include arranging community festivals, administrating voluntary community projects, and organising community attendance to mass rallies. Proponents further emphasise that CDRs have helped to put medical, educational, or other campaigns into national effect. They also act as centres for many who do not work in farms or factories, and hence include a large proportion of female membership. The CDRs also take an active role in vaccination campaigns, blood banks, recycling, practicing evacuations for hurricanes, and supporting the government in its fight against corruption (ref #29). Since the 1990s, Cuba has expanded their private sector, today about 29% of people are either self-employed or work for a co-operative enterprise. In co-operatives, the workers are the shareholders, they own the business, decide how profit is distributed, how much to pay to themselves and how much to reinvest. They can also elect their own managers and directors (ref #30). The Public sector is still very large, 72% of people work for public enterprises. At times, independent private firms do contracts for the government, leading to some ambiguity about how to classify them (ref #31). The public sector could be considered as an enormous co-operative that all Cubans are a member of, except it's purpose is not to make profit, but rather to meet the needs of the population and promote equality."),o.a.createElement("p",null,'Cuba can be described as a semi-direct democracy that tries to incorporate the best aspects of both representative and direct democracy. They have created a political system that achieves a nice balance between democracy and technocracy, in other words, they reach decisions that are well informed with expert advice, but also ones that most people are happy with. Political lobbying is banned and money has little influence over their election process. All potential candidates have equal access to the state media with which to explain their credentials to the population. Their election procedure has been widely misrepresented in the Capitalist Media and Capitalist academic literature. Candidates are chosen in local direct assemblies that anyone can participate in. There are public debates and conversations about who is most suitable for leadership, each nominee submits their resume and people discuss who is most qualified, who has the best track record of improving the lives of the people they represent. After candidates are chosen, there is an election in which people can approve and disapprove of the candidate they have already chosen. If the candidate receives less than 50% approval, then another candidate is chosen and people can vote in a second round of elections. This almost never happens because the people have already chosen the candidate at their local assembly and the election is just to give a stamp of approval. This is a much more genuinely meritocratic way of choosing leaders than Capitalist election procedures. Cuba can be more accurately described as a "no-party" state than a "one party" state. candidates are chosen directly by the people and are not appointed by the Cuban Communist Party. The Communist Party mainly just has moral and intellectual authority and not power (ref #32, ref #33).'),o.a.createElement("p",null,"Cuban socialism also recognises that the well-being of the human race is inextricably linked with the well-being of planet Earth. Cubans are highly environmentally progressive. In 2015 they were found to be the most sustainably developed country in the world by the Sustainable Development Index (ref #34). Most of the Island's food is produced by permaculture techniques in agricultural co-operatives. Cuban agricultural scientists are also pioneers in the field of organic farming, creating many of their own innovative techniques to increase yields sustainably (ref #35,ref #36)."),o.a.createElement("p",null,"The only authoritarian regime trying to tyrannise Cuba is the United States oligarchy. The achievements of the Cuban revolution are embarrassing to these elites. The United States is the richest country in the world but still there are half a million people living on the streets while Cuba has close to zero homeless people. In the USA Monopolistic pharmaceutical companies extort vast sums of money from people in exchange for vital medicines they need to live and encourage doctors to over prescribe highly addictive opiates and psycho-stimulants. The United States has an very token kind of democracy, statistical analysis has demonstrated that the views of ordinary US citizens have close to zero impact on decisions made by the government (ref #37), rates of union membership are vastly lower than Cuba (only 10%)(ref #38), the co-operative and public sectors are vastly smaller (ref #39,ref#40). Real wage growth in the States has stagnated since the 1980s (ref #41). The USA one of the most economically unequal countries in the world, while Cuba is one of the most equitable (ref #42). The CIA tried and failed to assassinate the leader of Cuba, Fidel Castro 638 times (ref #43, ref #44). They have made numerous attempts to sabotage and destroy Cuba's socialism, one notable example was Operation Mongoose (ref #45). Since relatively soon after the Cuban revolution, the United States has blockaded Cuba's economy with the explicit goal of starving and impoverishing the entire population of the country. This is obviously an extremely sadistic and completely disproportionate punishment (ref #46). In 2010, a secret diplomatic cable from the United States Government, obtained and released by wikileaks revealed that political dissidents have little support in Cuba (ref #47)."),o.a.createElement("p",null,"Supposed Human Rights NGOs like Amnesty International and Human Rights watch frequently slander Cuba, accusing them of human rights abuses. It is quite clear that these are deeply corrupt organisations, accepting enormous bribes (they call them \u201cgrants\u201d) from ruthless imperialistic capitalist governments and billionaires. Amnesty claims on their website that they do not accept money from governments so that they can stay independent of political ideology, but this is a blatant lie, you can see in the accounts they publish on their own website that they clearly have taken many millions of dollars in bribes from the US, UK, Israeli, French and many other governments. Human Rights Watch's biggest donor is the billionaire George Soros (ref #48, ref #49, ref #50)."),o.a.createElement("p",null,"In conclusion, there is a very extensive number of United States government documents that prove quite conclusively what Cuba actually is. The Socialist island is a beacon of hope for working class people around the world. Cuba represents a possible world without imperialism, exploitation, oppression, domination or bullying of any kind. Cuba has demonstrated that this is a practical and viable reality and not a utopian fantasy. They pose an immense threat to the socio-pathic oligarchs who rule planet Earth. The Capitalists have slandered Cuba terribly because they don't want us to know that their own authority is completely illegitimate. They are a burden on us and they take vastly more than they give."),o.a.createElement("br",null),o.a.createElement("h2",null,"References"),o.a.createElement("p",null,"1) https://wid.world/country/cuba/ 2) The Cuban Economy: Model for third world development? Page 2, page 13 paragraph 4, page 14 paragraph 1 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000100490001-9.pdf 3) The Cuban Economy: Model for third world development? Page 18 paragraph 1 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000100490001-9.pdf 4) https://www.numbeo.com/cost-of-living/compare_countries_result.jsp?country1=Cuba&country2=Australia 5) https://livingcost.org/cost/australia/cuba 6) https://www.mylifeelsewhere.com/cost-of-living/australia/cuba 7) https://www.expatistan.com/cost-of-living/country/comparison/australia/cuba 8) The Cuban Economy: Model for third world development? Page 15 para 4, page 15 para 1 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000100490001-9.pdf 9) https://borgenproject.org/homelessness-in-cuba/ 10) https://www.propertyrescue.co.uk/useful-guides-articles/world-countries-highest-rates-homeownership/ 11) https://www.worldatlas.com/articles/countries-with-the-highest-home-ownership-rates.html 12) The Cuban Economy: Model for third world development? Page 2,page 18 para 4 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000100490001-9.pdf 13) Cuba: Social inequality page 1 para 2 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000101190001-1.pdf 14) Cuba: Social inequality page 2 para 5 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000101190001-1.pdf 15)  https://data.worldbank.org/indicator/SG.GEN.PARL.ZS 16) Cuba: Social inequality page 1 para 2, page 2 para 1, https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000101190001-1.pdf 17) A Cuban Balance Sheet; Batista and Castro regimes in Cuba, page 5 para 2 https://www.cia.gov/readingroom/docs/CIA-RDP79T01148A000600030049-9.pdf 18) The Cuban Economy: Model for third world development? page 20 para 2, Page 19 para 5, Page 19 para 4 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000100490001-9.pdf 19) https://data.worldbank.org/indicator/SP.DYN.LE00.IN?locations=CU 20) Castro's reach into the third world: the cuban economic assistance program. Page 4 para 1, page 12 para 6, page 13 para 3 https://www.cia.gov/readingroom/docs/CIA-RDP90T01298R000300070001-4.pdf 21) World Factbook of Criminal Justice Systems \u2013 Cuba. page 8 para 6, page 8 para 7, page 12 para 4, page 12 para 12  https://bjs.ojp.gov/content/pub/pdf/wfbcjsc.pdf 22) https://www.abs.gov.au/statistics/people/crime-and-justice/prisoners-australia/latest-release 23) The Cuban Economy: Model for third world development. Page 22 para 1-2 https://www.cia.gov/readingroom/docs/CIA-RDP85T00287R000100490001-9.pdf 24) https://ilostat.ilo.org/topics/union-membership/ 25) https://www.wola.org/analysis/cubas-new-constitution-explained/ 26) https://www.reuters.com/article/us-cuba-constitution-referendum-idUSKCN1QE22Y 27) https://en.wikipedia.org/wiki/1976_Cuban_constitutional_referendum 28) https://www.justice.gov/sites/default/files/eoir/legacy/2013/11/07/CUB103443.FE.pdf 29) https://www.ecured.cu/Comit%C3%A9s_de_Defensa_de_la_Revoluci%C3%B3n 30) U.S.\u2013CUBA COOPERATIVE WORKING GROUP 2017 REPORT UNDERSTANDING COOPERATIVES IN CUBA AND OPPORTUNITIES FOR U.S.\u2013 CUBAN ENGAGEMENT Page 8 para 7 https://www.ncba.coop/images/Cuba-Photo-Gallery/Cuba-Report-2017-FINAL.pdf 31) Torres, Ricardo (2 June 2016).\xa0\"Economic transformations in Cuba: a review\".\xa0Third World Quarterly.\xa037\xa0(9): 1683\u20131697.\xa0doi:10.1080/01436597.2016.1177454.\xa0S2CID\xa0156099431. 32) https://www.greenleft.org.au/content/ten-truths-about-cuba-general-elections 33) https://www.greenleft.org.au/content/myth-and-reality-cuban-electoral-system 34) https://sites.psu.edu/sovas3a/2020/02/03/cuba-found-to-be-the-most-sustainably-developed-country-in-the-world-new-research-finds/ 35) https://www.panoramas.pitt.edu/health-and-society/sustainable-agriculture-cuba-urban-farming-and-%E2%80%9Corganop%C3%B3nicos%E2%80%9D 36) https://www.permaculturenews.org/2013/09/09/how-cuba-leads-the-world-in-permaculture-podcasts-parts-i-ii/ 37) https://scholar.princeton.edu/sites/default/files/mgilens/files/gilens_and_page_2014_-testing_theories_of_american_politics.doc.pdf 38) https://www.pewresearch.org/fact-tank/2022/02/18/majorities-of-adults-see-decline-of-union-membership-as-bad-for-the-u-s-and-working-people/#:~:text=The%20share%20of%20U.S.%20workers,very%20little%20since%20last%20year. 39) https://link.springer.com/chapter/10.1057/9781403920171_5#:~:text=The%20public%20sector%20employs%2020.2,federal%2C%20state%20and%20local%20government. 40) https://www.aciamericas.coop/Economic-impact-of-the-United 41) https://www.epi.org/blog/growing-inequalities-reflecting-growing-employer-power-have-generated-a-productivity-pay-gap-since-1979-productivity-has-grown-3-5-times-as-much-as-pay-for-the-typical-worker/#:~:text=The%20gap%20between%20productivity%20and%20a%20typical%20worker's%20compensation%20has,hourly%20compensation%20growth%2C%201948%E2%80%932019&text=Notes%3A%20Data%20are%20for%20compensation,productivity%20of%20the%20total%20economy 42) https://en.wikipedia.org/wiki/List_of_countries_by_income_equality 43) Escalante Font, Fabi\xe1n\xa0[es]\xa0(2006).\xa0Executive Action: 634 Ways to Kill Fidel Castro. Melbourne: Ocean Press.\xa0ISBN\xa01920888721. 44) https://www.abc.net.au/triplej/programs/hack/how-castro-survived-638-assassination-attempts/8064788 45) MEMORANDUM OF (Sanitized)MEETING HELD ON THURSDAY, OCTOBER 4, 1962. Page 8 para 7 https://www.cia.gov/readingroom/docs/CIA-RDP80B01676R001700180033-1.pdf 46) https://history.state.gov/historicaldocuments/frus1958-60v06/d499 47) https://www.reuters.com/article/us-cuba-dissidents-wikileaks-idUKTRE6BG1NJ20101217 48) https://www.ngo-monitor.org/ngos/human_rights_watch_hrw_/ 49) https://www.ngo-monitor.org/reports/breaking_its_own_rules_amnesty_s_gov_t_funding_and_researcher_bias/ 50) https://www.amnesty.org/en/about-us/how-were-run/finances-and-pay/"))}function rt(){return Object(n.useEffect)(function(){fetch("/groups/addtopagecounter/yugoslavia",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{marginLeft:"5vw",marginTop:"3vw",width:"90vw"}},o.a.createElement("h1",null,"Yugoslavia"),o.a.createElement("p",null,"The Socialist Federal Republic of Yugoslavia (SFRY) was a very encouraging experiment in Socialism that existed from 1945 to 1992. As with most other Communist countries, the CIA archives provide us with an abundance of valuable sources that tell a very clear story, one of massive improvements to the quality of life of the population. There were enormous gains in health, education, political participation, real wage growth and social equality. Yugoslavia had a very distinctive \u201cself-management\u201d system. This was much more decentralised than the Soviet Union, giving much more power to individual organisations, each of which was controlled by an elected worker council. Yugoslavia also experienced some economic difficulties that the USSR did not, inflation, higher unemployment and economic cycles. On the whole, despite it's faults, this Balkan Socialist country set a very promising example of what a world without exploitation, domination and imperialism could look like."),o.a.createElement("p",null,"Overall, socialism in Yugoslavia resulted in a substantially more humanistic political/economic/social system that was better at meeting the needs of the population and improving their quality of life than capitalism. Gross National Product tripled between the between the foundation of The Socialist Federal Republic of Yugoslavia (1945) and 1973. This growth was targeted at improving the general standard of living of the population, with enormous improvements to the quality of education, healthcare, social equality, social security and political equality. Yugoslavia did have persistent problems with inflation, however, gdp growth, as well as gdp per capita growth tended to outpace this rise in prices (ref #1,ref #2,ref #3,ref#4). Living levels in both the rural and urban areas improved markedly between 1950 and 1973 and became considerably higher than pre-World War Two Yugoslavia. Peasants in even the poorest parts of the country were drawn into the money economy and had cash at their disposal for the purchase of clothing, furniture and consumer durables which traditionally had been a rarity in most peasant households. The variety and quality of goods available to the Yugoslav consumer compared favourably with other Eastern European countries and prices were generally lower relative to wages than elsewhere in Eastern Europe. In many instances, however, an apartment was included with the workers job at a nominal rent. Economic inequality became dramatically reduced, the earnings ratio between persons with university-level training and the unskilled workers was roughly 3:1 (ref #5). The government practised affirmative action, they actively channelled funds into less developed regions in order to narrow the gap between developed and underdeveloped parts of the federation(ref #6)."),o.a.createElement("p",null,"Yugoslavia had very extensive political democracy. They attempted to create a new kind of representative democracy that was much more suited to an industrial, scientifically and technologically advanced society. Of course, our modern world is extremely complicated and it is necessary to somehow elect experts to make decisions about certain questions. Yugoslavia attempted to create a nice balance between democracy and technocracy, decisions that most people are happy with, but also that are well informed with expert knowledge. It was not a direct democracy in the sense the Ancient Athens was a direct democracy, with a large assembly that anyone can attend and anyone can vote in and make proposals. Instead, power was quite evenly spread out so that people could be involved in making decisions about things that were relevant to them (ref #7). Almost all organisations had an elected governing council and rates of union membership were very high. Public participation in government had grown hugely. A particular important organ of popular political involvement was The Socialist Alliance of Working People of Yugoslavia, which became a place where the voice of the people could be heard. Meetings were used as the forum for open debates on constitutional amendments and the organisation's concomitant drive to strengthen ties with socialist parties in the west (ref #8). Extremely significant was the flexibility the Yugoslavs showed in introducing their reforms. This indicated a genuine willingness on the part of the government to listen to domestic criticisms and to meet objections if they appear valid. Constitutional amendments were often substantially altered in response to this criticism (ref #9). Workers became increasingly articulate, and strikes, or work stoppages as they were euphemistically called, became a highly effective means of gaining demands (ref #10). Yugoslavia's university students even became involved in the governance of their own academic institutions. In 1970, students in Zagreb succeeded in defeating a candidate for school pro-rector who had been approved by the communist party (ref #11). In 1969 Serbia amended their university law to allow faculty and students a free hand in the election of their deans and rectors (ref #12). The self-management system was eventually introduced into virtually all elements of Yugoslav society. Even prisoners are encouraged to form councils in order to increase their production and to prepare themselves better to fit into a self-managed society when they would be released (ref #13). Self management had many strengths, however it also seemed to create problems with inflation, an ongoing, chronic economic problem for Yugoslavia. Many enterprise councils, in the absence of competitors, would raised prices in order to increase wages (ref #14). Self management was even applied to the judicial system. Every citizen who was of age could be elected a judge or judge-juror. Judges and judge-jurors are elected or dismissed by the people's executive councils and the people's assemblies. Judges and judge-jurors made their judgements together, the jurors always outnumber the professional judges and can outvote them. This helps to ensure the moral authority of judge is legitimate, they must demonstrate their trustworthiness and moral integrity in order to make judgements (ref #15)."),o.a.createElement("p",null,"This increased of political democracy, combined with the leadership of the Communist Party, resulted in a very generous social security system. They made great progress towards guaranteeing all Yugoslav people would have their basic needs met. Between 1945 and the 1970s, the social security budget increased 600% (ref #16). The government introduced extensive subsidies for public health care, temporary disability and illness, old age pensions and assistance to mothers. In particular, there were a great number of benefits intended to take the pressure of child raising off women, making it easier for them to study at technical colleges or universities and gain employment. Women received 90 days paid maternity leave after having a baby, a range of other subsidies to help pay for food, clothing and other necessities. There were also subsidised public childcare services that low income families could use for free (ref #17). Like most other Socialist revolutions, there was an enormous improvement to the status of women. Disabled workers were entitled to another corresponding job and received a disability pension if they needed to train in a new career (ref #18,ref #19). Pensions were also given to family members of disabled people if a physician said their support was required (ref #20, ref#21). The education system dramatically improved and was extended to all citizens. Before the revolution, the population had been largely illiterate and uneducated, Communism brought an end to this (ref #22, ref #23, ref #24)."),o.a.createElement("p",null,"Communism brought enormous improvements to the standards of health in Yugoslavia. The rate of death declined from 12.7 per 1000 in 1947 to 8.7 per 1000 in 1968. Infant mortality dropped from 116 per 1000 in 1953 to 59.8 per 1000 for males and 54.3 per 1000 for females. Hospital services expanded hugely, there was 1 hospital bed per 180 Yugoslav people (ref #25). Medical students could study for free and received a stipend to cover their living expenses. Textbooks were also provided for free. Yugoslavia experienced a levelling of educational opportunities, people of all economic levels could study what they were wanted without discrimination(ref #26)."),o.a.createElement("p",null,"By now it should be clear that the label \u201cauthoritarian\u201d simply just doesn't apply to the Socialist Federal Republic of Yugoslavia. The party possessed a genuine kind of authority, the authority of knowledge, wisdom, humility and moral integrity. In the beginning, it may have been necessary for them to use power in order to effect the transition to socialism, but this gradually faded as the people's new found economic security and political participation made them increasingly self confident. The Communist party may have had valuable knowledge about what a fair and democratic society should look like, but they, like all leaders, were just human beings, capable of making mistakes. The masses were willing and able to overrule the party if necessary and there are many examples of them doing this. Capitalist constitutions often have token checks and balances written into them they are designed to give the appearance of democracy and accountability, without actually providing real democracy. For example, the United States constitution supposedly has an impeachment process to allow the president to be removed from office but it has never actually been used. This was not so in Yugoslavia, there were many examples of people genuinely holding their government accountable and forcing them to concede when criticised. For example, in the 1967 election, people were heavily involved in selecting candidates in public gatherings. Voter turnout was very high, 89% of people participated and 30% of communist party backed candidates failed to win. In order to prevent anyone from getting too comfortable in a position of power there were frequent rotations in office, mainly in the elective posts, to foster the infusion of new blood into the political system. This helped to counter bureaucratism, routininsm and dogmatism. After the death of Josip Broz Tito (the first president) The role of president rotated annually (ref #27)."),o.a.createElement("p",null,"Yugoslavia's economic system was distinctly less centralised than the Soviet Union. There was a relatively large independent private sector that consisted mostly of cooperatives. Workers councils in factories were elected by the workers. People could essentially hire and fire the directors of the companies they worked for, nobody had a \"boss\" who would just give orders. The council then elected management boards to manage the factories in conjunction with the factory directors. Workers could dismiss the board, councils adopted wage regulations, formulated operating plans for the factory and distributed part of the profit of the factory (ref #28). Cooperatives were organised on the principle of voluntary efforts and internal democracy. All members of a cooperative were equal, with equal rights and equal duties. In the countryside, agricultural co-operatives were more than just businesses, they also aimed to raise economic and cultural levels and to develop socialism in villages. In addition to developing agricultural production, they dealt with village communal problems, such as electrification, health and veterinary stations, water supply and construction of cooperative centres. They also contributed to the technical, cultural, educational, ideological and political advancement of villages (ref #29). It was unnecessary to force farmers to join these agricultural cooperatives. Instead, the party persuaded them by demonstrating the benefits such as higher yeilds and by providing financial incentives. Loans at 1% p/a interest were given to help start these democratic businesses. This money was given by public banks, the interest was used to fund Yugoslavia's generous social security system. The government also created a range of different types of cooperative of varying levels of socialism/collectivism. Some with more sharing of land, machines and resources and more political participation than others. The idea was to gradually wean workers onto collectivism. They did not necessarily need to invest hugely as they might have perceived this as risky because socialism was new and unfamiliar. Instead, workers could invest a little bit, see some benefits, and then invest increasingly more and more if they felt comfortable. For example, farmers did not necessarily have to sell their land and machines to a cooperative, they could just rent them. This gradual acclimatization proved to be a highly effective collectivisation process, membership in agricultural cooperatives increased from half a million people in 1945 to 3.5 million in 1950 (ref #30, ref #31)."),o.a.createElement("p",null,"To me, it seems unclear overall whether the Soviet Union's version of Socialism was superior to that of Yugoslavia, they each had their own strengths and weaknesses. Yugoslavia had substantially more political democracy, while the USSR had better overall economic performance. Collectivisation in Yugoslavia was less forceful than the Soviet Union, however it was also much less rapid, meaning slower poverty reduction. It doesn't seem fair to judge one as better than the other. The circumstances in which they both were born were very different. If you read the writings of the Bolshevik leaders, there is a clear understanding that persuasion is superior to coercion because people work with much more enthusiasm if they have been persuaded to do something than if they have been forced. There are even CIA documents were they admit that this is how the Russian Communist Party thought (ref #32). In this respect, the ideology of the Bolsheviks and the Yugoslav communist party was essentially the same.  Their differing circumstances were the reason for their different approaches to collectivisation. All governments become more authoritarian during times of crisis. Soviet Russia was born into terrible crisis, a horrible civil war, then several capitalist countries tried to invade and destroy them, then soon after they needed to prepare for World War Two. They also had no other socialist countries to support them and they had to figure out how to do socialism on their own. The learning curve was steep. Dire circumstances call for stronger leadership. If they had not industrialised and collectivised at break-neck speed, Socialist Russia would not have been strong enough to survive World War Two. We know this because Bolshevism co-existed with numerous other socialist ideologies, some much more libertarian. None of the other varieties produced a viable lasting form of socialism that could substantially improve people's lives. For example, there was an libertarian/anarchist socialist revolution in Spain in the 1930s that was quickly crushed by the Fascist government. Yugoslavia was born into a world where the threat of Fascism in Europe had been largely suppressed at least for the time being. While there may have been some initial ideological disagreements between the Russian and Yugoslav communist parties, they did eventually provide mutual aid and support to each other."),o.a.createElement("p",null,"I feel that if Yugoslavia had been allowed to continue, they probably would have eventually learned how to resolve their economic difficulties. It certainly was a very admirable and encouraging socialist experiment that greatly improved the lives of many millions of people. This conclusion is undeniable when you read the numerous documents about Yugoslavia in the CIA archives that I have refernced below. The worst enemy of communism admitted all of this blatantly."),o.a.createElement("br",null),o.a.createElement("h2",null,"References"),o.a.createElement("p",null,o.a.createElement("div",{className:"references"},o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100036-6.pdf"},"1)National Intelligence Survey 21; Yugoslavia; The Economy page 9 para 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP79T01003A002200250001-9.pdf"},"2)Economic Growth In Eastern Europe in 1964 page 11 para 2"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP79R00904A000500020034-0.pdf"},"3)Yugoslavia and the Non-u Countries page 4 para 2"),o.a.createElement("a",{href:"http://eprints.lse.ac.uk/85079/1/WP268.pdf"},"4)Leonard Kuki\u0107, Socialist growth revisited: insights from Yugoslavia,\xa0European Review of Economic History, Volume 22, Issue 4, November 2018, Pages 403\u2013429,\xa0https://doi.org/10.1093/ereh/hey001 Page 27, figure 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000600380337-6.pdf"},"5)Pay Schedules and Income Taxes in Yugoslavia 1951 page 2 para 2, page 2 para 7"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100032-0.pdf"},"6)National Intelligence Survey 21; Yugoslavia; The Society Page 30 para 2-3, page 31 para 2, page 35 para 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp79-00927a007400070002-4"},"7)Yugoslavia: Twenty Years of Self-Management Page 5 para 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP85T00875R001500030020-7.pdf"},"8)Weekly Summary Special Report Yugoslavic The New Revolution page 9 para 2-4"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP85T00875R001500030020-7.pdf"},"9)Weekly Summary Special Report Yugoslavic The New Revolution Page 13 para 6"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp79-00927a007400070002-4"},"10)Yugoslavia: Twenty Years of Self-Management Page 8 para 3"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP85T00875R001500030020-7.pdf"},"11)Weekly Summary Special Report Yugoslavic The New Revolution Page 10 para 3"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp79-00927a007400070002-4"},"12)Yugoslavia: Twenty Years of Self-Management Page 9 para 3-4"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp79-00927a007400070002-4"},"13)Yugoslavia: Twenty Years of Self-Management Page 9 para 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp79-00927a007400070002-4"},"14)Yugoslavia: Twenty Years of Self-Management Page 13 para 4"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000700090447-5.pdf"},"15)Development and Organization of the Judiciary in Yugoslavia page 2 para 11 Page 3 para 5"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100036-6.pdf"},"16)National Intelligence Survey 21; Yugoslavia; The Economy page 28 para 2"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100032-0.pdf"},"17)National Intelligence Survey 21; Yugoslavia; The Society page 38 para 7"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000600380566-2.pdf"},"18)New Yugoslav Law on Social Security for Blue and White Collar Workers page 5-6"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100032-0.pdf"},"20)National Intelligence Survey 21; Yugoslavia; The Society page 35 para 6"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00926A004600010022-8.pdf"},"21)Family Legislation page 45 para 7"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100032-0.pdf"},"22)National Intelligence Survey 21; Yugoslavia; The Society page 14 para 10"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100032-0.pdf"},"23)National Intelligence Survey 21; Yugoslavia; The Society page 49 para 2, page 50 para 6"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000700100125-0.pdf"},"24)Schools In Yugoslavia page 1 para 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000600240629-7.pdf"},"25)Sociological- Education page 1 para 3"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP01-00707R000200100032-0.pdf"},"26)National Intelligence Survey 21; Yugoslavia; The Society page 40 para 7"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00926A006900050014-8.pdf"},"27)Status of Medicine, Medical Training, Research and Public Health page 2"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp01-00707r000200100033-9"},"28)National Intelligence Survey 21 Yugoslavia; government and politics page 12 para 7, page 33, page 37 para 3 1967"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP79R01141A000900090002-0.pdf"},"29)Reorganization of Economic Management in the European Satellites 1956 page 11 para 3"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp80-00809a000700120344-5"},"30)Development Of Cooperatives in Yugoslavia page 3 para 6, page 3 para 5, page 4 para 6"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80-00809A000600240726-9.pdf"},"31)ECONOMIC-FARM COOPERATIVES page 2 para 6, page 2-3"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp80-00809a000700120344-5"},"32)Development Of Cooperatives in Yugoslavia page 2 para 6, page 5 para 1"),o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP79R01141A001200060002-9.pdf"},"33)Forced Labour in the USSR 1953-57 page 2 para 2, page 8 para 4"))))}function it(){return Object(n.useEffect)(function(){fetch("/groups/addtopagecounter/psychologicalwar",{method:"put",headers:{"Content-Type":"application/json"},body:""}).then(function(e){return e.json()}).catch(function(e){console.error(e)})},[]),o.a.createElement("div",{style:{marginLeft:"5vw",marginTop:"3vw",width:"90vw"}},o.a.createElement("h1",null,"The Psychological War On Communism"),o.a.createElement("p",null,o.a.createElement("strong",null,"\u201cFor many years our press has misled us about the achievements of the Russian People and their government. In Russia, there is not only a formal but an actual equality of nationalities and cultural groups of every sort. 'Equal goals and equal rights with equal contributions' is no empty phrase, but a standard followed in actual life\u201d-Albert Einstein, What Russia Means To Us, 1942")),o.a.createElement("p",null,"Since the birth of Socialism in the early 20th century, the capitalist ruling class have gone to great lengths to destroy socialism. They have tried their absolute best to destroy people's perception of Communism, spreading slander throughout the mass media and academic institutions. They have infiltrated many real socialist organisations and created many of their own fake ones. Divide and conquer is their primary strategy, if they perceive any divisions between socialist groups, they try to drive a wedge into it. When they build their own socialist organisations, the most common strategy is to spread ideas that sound socialistic, but are ultimately not at all useful. They will try to encourage a puritanical, vengeful, arrogant and self righteous mentality, any revolution that is less than perfect is bluntly dismissed, there is no constructive criticism or acknowledgement of the achievements of real viable socialist revolutions. They won't support any socialist experiments unless they failed, didn't last very long or didn't produce any measurable, lasting benefits to people's lives. The goal is to leave people with the feeling that communism is a Utopian fantasy, idealistic, unrealistic, a nice idea, but not practical. The bourgeoisie have also tried to meddle in the elections of countries where the population shows strong support for socialism, attempting to get more right wing candidates elected."),o.a.createElement("p",null,"The suggestion that Socialist countries are governed by horrible exploitative authoritarian governments is a large lie. The capitalist ruling class get away with this very bold fabrication because they have very extensive control over the mediums through which ideas spread in our society, the mass media and education systems. The private mass media organisations of the Capitalist world are themselves undemocratic, capitalist businesses. There is a small oligarchy of shareholders who elect the board of directors and orders flow downwards to the vast majority of people who work for the company. The companies' main customers are other undemocratic capitalist businesses who pay for advertising. The goal of the capitalist media is to extract surplus value from the people who work for their companies and the other businesses that pay for marketing. There are also relatively few conglomerate companies that own and control all other mass media companies. In the USA 6 major companies own 90% of mass media organisations, in Australia, two companies, News Corp and Nine Entertainment own the vast majority of the media. The national public media typically targets and serves elite opinion, groups that, on the one hand, provide an optimal \u201cprofile\u201d for advertising purposes, and, on the other, play a role in decision-making in the private and public spheres. The national media would be failing to meet their elite audience\u2019s needs if they did not present a tolerably realistic portrayal of the world. But their \u201csocietal purpose\u201d also requires that the media\u2019s interpretation of the world reflect the interests and concerns of the sellers, the buyers, and the governmental and private institutions dominated by these groups. The publicly run media corporations are also run in a largely undemocratic way. The boards of these companies are generally chosen by an elected bourgeois government and orders flow from top to bottom, directors to workers. The state also censors the media with varying levels of coercion. Capitalist media allows vigorous debate and discussion within a certain range of the spectrum of political/economic ideology. This creates the impression of a freedom of speech, however if certain boundaries are crossed, serious penalties can result. This can mean simple ostracism, losing your job as a journalist, or in some cases the state may try to charge critics with crimes and serious jail time. Some obvious examples of this would be Julian Assange and Wikileaks for exposing United States government war crimes or Richard Boyle who exposed corruption within the ATO (ref #1. ref#2,ref#3)."),o.a.createElement("p",null,"The bourgeoisie have also tried to create their own pseudo-socialism in order to mislead working class people, create divisions and demoralise them. In the mid 20th century the CIA established and funded organisations like the Congress for Cultural Freedom and the Committee of the Free World. They used these groups as a means of enlisting intellectuals and opinion makers in a war of ideas against communism. The United States Government subsidised editors and scholars who were selected for their correct cold-war positions rather than for their talent or merit, enabling them to rig the free marketplace of ideas (ref #4). The National Student Association, the largest student organisation in the USA, received funding from the CIA in order to spread anti-communist ideology. Roughly $200000 per year (ref #5,ref #6, ref #7,ref#8). Central Intelligence Agency Funds were given to numerous youth organisations around the world, clearly for the purposes of indoctrination with Capitalist ideology (ref #9). Money was also given by the Agency to a range of Labour Unions such as the Free Trade Union Committee and the International Confederation of Free Trade Unions (ref #10, ref #11). CIA funding was given to anti-communist radio stations like Radio Liberty and Radio Free Europe that spread propaganda throughout eastern Europe (ref #12, ref #13). COINTELPRO\xa0(syllabic abbreviation\xa0derived from\xa0Counter Intelligence\xa0Program) (1956\u20131971) was a series of\xa0covert\xa0and illegal (ref#14, ref#15)\xa0projects actively conducted by the United States\xa0Federal Bureau of Investigation\xa0(FBI) aimed at surveilling, infiltrating, discrediting, and disrupting domestic American\xa0political organizations(ref #16, ref#17).\xa0FBI records show COINTELPRO resources targeted groups and individuals the FBI deemed\xa0subversive,including\xa0feminist\xa0organizations,(ref#18,ref#19)the\xa0Communist Party USA,(ref#20)anti\u2013Vietnam War\xa0organizers, activists of the\xa0civil rights movement\xa0and\xa0Black Power movement\xa0(e.g.\xa0Martin Luther King Jr., the\xa0Nation of Islam, and the\xa0Black Panther Party),\xa0environmentalist\xa0and\xa0animal rights\xa0organisations, the\xa0American Indian Movement\xa0(AIM), independence movements (including\xa0Puerto Rican independence\xa0groups such as the\xa0Young Lords\xa0and the\xa0Puerto Rican Socialist Party), a variety of organisations that were part of the broader\xa0New Left (ref #21, ref #22). Cointelpro involved the creation of several magazines and zines that were designed to appear to have a far left wing ideology but in actual fact their purpose was to spread confusing and disorienting messages, in order to encourage divisions within the socialist movements. Some claimed to be Anarchists, some Maoists, some Trotskyist (ref #23, ref #24). The numerous splits and factions that occur within socialist and communist groups in the first world capitalist countries seem to largely be a result of this sort of psychological warfare. These divisions do not reflect the actual understanding of the leaders of actual socialist countries. In reality, there is very strong solidarity, mutual aid and support within the communist bloc. The leaders of Cuba, China, Soviet Union, Yugoslavia, Vietnam and North Korea all strongly support each other. There are disagreements and different strategies or experiments, however overall, the Communist Parties of these countries support each other."),o.a.createElement("p",null,"Novels and films were published and distributed by the Bourgoisie as anti-communist propaganda. For example, the works of George Orwell, such as Animal Farm and 1984, were distributed around the world by a UK government propaganda organisation called the Information Research Department (IRD). They published his books in 20 different languages and spread them onto every continent (ref #25). The CIA worked with the IRD to create an Animal Farm animated film (ref #26). Many historians have attributed Orwell's fame largely to the joint efforts of the IRD and CIA. Orwell's stories were allegories, supposedly about both Fascism and Communism, but in actual fact had little to do with communism. The author had never lived in or even visited a real socialist country like the Soviet Union, his works are pure fiction (ref #27, ref #28). Another Anti-communist novel distributed by the CIA was Dr Zhivago, a book depicting the supposed \u201cauthoritarian\u201d nature of the Soviet Union. The agency published the work in several eastern European languages, distributing it in these countries and broadcasting the book on Radio Free Europe (ref #29, ref #30, ref #31, ref #32)."),o.a.createElement("p",null,"Supposed Human Rights Non Government Organisations like Amnesty International and Human Rights watch frequently slander Socialist Countries, accusing them of human rights abuses. It is quite clear that these are deeply corrupt organisations, accepting enormous bribes (they call them \u201cgrants\u201d) from ruthless imperialistic capitalist governments and billionaires. Amnesty claims on their website that they do not accept money from governments so that they can stay independent of political ideology, but this is a blatant lie, you can see in the accounts they publish on their own website that they clearly have taken many millions of dollars in bribes from the US, UK, Israeli, French and many other ruthless imperialistic governments. Human Rights Watch's biggest donor is the billionaire George Soros (ref #33,ref #34, ref #35,). These Human Rights NGOs are clearly controlled by the bourgeoisie."),o.a.createElement("p",null,"Since World War Two the CIA has intervened in foreign elections in order to have more right wing candidates elected. Ones who are more favourable to US interests and hostile to communism. Beginning with an election in Italy in 1947, they spent ten million dollars distributing anti-communist propaganda, spreading pamphlets, defaming communist candidates and bribes to candidates who displayed willingness to work with the USA (ref #36). Since WW2 the USA has intervened in more than 60 foreign elections for similar purposes, the CIA created a special department for this, the Office of Policy Coordination (ref #37)."),o.a.createElement("p",null,"Since Socialism began in the 20th century, the capitalist ruling class have tried their absolute best to destroy people's perception of Communism, spreading lies in the mass media and academic institutions. They have infiltrated many real socialist organisations and created many of their own fake ones. The Bourgeoisie try to create divisions within and demoralise left wing groups. Capitalists have also tried to meddle in the elections of countries where the population shows strong support for socialism, attempting to get more right wing candidates elected."),o.a.createElement("h3",null,"Refernces"),o.a.createElement("p",null,"1) Manufacturing Consent: The Political Economy of the Mass Media Noam Chomsky, Edward S. Herman 1988"),o.a.createElement("p",null,"2) Inventing Reality: The Politics of News Media Michael Parenti 1993"),o.a.createElement("p",null,"3) https://www.abc.net.au/news/2019-03-06/ato-whistleblower-faces-161-years-prison-possibility/10872350"),o.a.createElement("p",null,"4) CULTURE WAR 2 ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP90-00806R000200970013-9.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP90-00806R000200970013-9.pdf")," paras 2, 6 and 8"),o.a.createElement("p",null,"5) Press Release ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000700020017-8.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000700020017-8.pdf")),o.a.createElement("p",null,"6) Secret Subsidizing of National Student Association By Central Intelligence Agency Congressional Record ",o.a.createElement("a",{href:" https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000700150009-3.pdf"}," https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000700150009-3.pdf")),o.a.createElement("p",null,"7) The CIA Nightmare ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000200770001-8.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000200770001-8.pdf")),o.a.createElement("p",null,"8) CIA Subsidizes Youth Foundation; Brown Source Knew NSA Secret ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP73-00475R000102040015-5.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP73-00475R000102040015-5.pdf")),o.a.createElement("p",null,"9)",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000700530003-7.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP75-00149R000700530003-7.pdf"),"Anti-Communist Work of the National Students Association."),o.a.createElement("p",null,"10) Units Linked With CIA ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/document/cia-rdp73-00475r000200260001-7"},"https://www.cia.gov/readingroom/document/cia-rdp73-00475r000200260001-7")),o.a.createElement("p",null,"11) Robert D. Parmet,\xa0The Master of Seventh Avenue: David Dubinsky and the American Labor Movement\xa0(NY: New York University Press, 2005) 235-6"),o.a.createElement("p",null,"12)",o.a.createElement("a",{href:" https://www.cia.gov/readingroom/docs/CIA-RDP90-00806R000200740006-2.pdf"}," https://www.cia.gov/readingroom/docs/CIA-RDP90-00806R000200740006-2.pdf")),o.a.createElement("p",null,"13)",o.a.createElement("a",{href:" https://www.cia.gov/readingroom/docs/LOC-HAK-294-3-27-3.pdf"}," https://www.cia.gov/readingroom/docs/LOC-HAK-294-3-27-3.pdf"),"Radio Free Europe page 3-4"),o.a.createElement("p",null,"14) Grants to Radio Free Europe and Radio Liberty ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP73B00296R000500050007-4.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP73B00296R000500050007-4.pdf")),o.a.createElement("p",null,'15) Jalon, Allan M. (March 8, 2006).\xa0"A break-in to end all break-ins".\xa0Los Angeles Times.\xa0Archived\xa0from the original on December 3, 2013. Retrieved\xa0July 15,\xa02014.'),o.a.createElement("p",null,"16) The Dangers of Domestic Spying by Federal Law Enforcement\xa0(PDF)\xa0(Report).\xa0American Civil Liberties Union. 2002.\xa0Archived\xa0(PDF)\xa0from the original on February 5, 2018. Retrieved\xa0November 14,\xa02017."),o.a.createElement("p",null,"17) Jeffreys-Jones, Rhodri\xa0(2008) [2007].\xa0The FBI: A History. New Haven, CT: Yale University Press. p.\xa0189.\xa0ISBN\xa0978-0-300-14284-6.\xa0OCLC\xa0223872966."),o.a.createElement("p",null,"18) Rosen, Ruth. (2006.)\xa0The World Split Open: How the Modern Women's Movement Changed America.\xa0New York: Penguin Group. ISBN 0670814628. p. 239-261. Accessed: 2022-07-12."),o.a.createElement("p",null,'19) Salper, Roberta. (2008.) "U.S. Government Surveillance and the Women\'s Liberation Movement, 1968-1973: A Case Study."\xa0Feminist Studies\xa034(3): 431\u2013455.\xa0doi:10.2307/20459215. Accessed: 2022-07-12.'),o.a.createElement("p",null,"21) Weiner, Tim (2012).\xa0Enemies: A History of the FBI\xa0(1st\xa0ed.).195 New York: Random House.\xa0ISBN\xa0978-1-4000-6748-0.\xa0OCLC\xa01001918388."),o.a.createElement("p",null,"22) ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP90-01208R000100150193-4.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP90-01208R000100150193-4.pdf"),"The Most Secret Agents"),o.a.createElement("p",null,"23) ",o.a.createElement("a",{href:"https://www.autistici.org/poderobrero/articulos/in-cointelpro-fbi-used-anarchism-to-disrupt-left-attack-vietnam-ussr"},"https://www.autistici.org/poderobrero/articulos/in-cointelpro-fbi-used-anarchism-to-disrupt-left-attack-vietnam-ussr")),o.a.createElement("p",null,"24) ",o.a.createElement("a",{href:"https://multipolarista.substack.com/p/in-cointelpro-fbi-used-anarchism"},"https://multipolarista.substack.com/p/in-cointelpro-fbi-used-anarchism")),o.a.createElement("p",null,"25) \xa0Rubin N., Andrew (2012).\xa0Archives of Authority: Empire, Culture and the Cold War. Woodstock: Princeton University Press. pp.\xa040\u201342."),o.a.createElement("p",null,'26) \xa0Dunton, Mark (17 August 2020).\xa0"Animal Farm: The cartoon strip and the Cold War".\xa0National Archives. Retrieved\xa014 January\xa02021.'),o.a.createElement("p",null,'27) \xa0Shaw, Tony (22 September 2011).\xa0"Making a pig\'s ear of Orwell".\xa0The Independent. Retrieved\xa014 January\xa02021.'),o.a.createElement("p",null,"28) \xa0Mitter, Rana; Major, Patrick (2005).\xa0Across the Block: Cold War Cultural and Social History. Taylor & Francis e-library: Frank Cass and Company Limited. p.\xa0125."),o.a.createElement("p",null,"29) ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP80R01731R000400580002-7.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP80R01731R000400580002-7.pdf"),"letter To Victor Baton From Allen W. Dulles (The First Director of the CIA)"),o.a.createElement("p",null,"30) ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/0002389324.pdf"},"https://www.cia.gov/readingroom/docs/0002389324.pdf")),o.a.createElement("p",null,"31)",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/DOC_0005796328.pdf"}," https://www.cia.gov/readingroom/docs/DOC_0005796328.pdf"),"Memorandum For Acting Deputy Director (plans): Miniature Edition of Dr Zhivago"),o.a.createElement("p",null,"32) ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/DOC_0005795618.pdf"},"https://www.cia.gov/readingroom/docs/DOC_0005795618.pdf"),"Note on Pasternak's Novel, Dr Zhivago"),o.a.createElement("p",null,"33) ",o.a.createElement("a",{href:"https://www.ngo-monitor.org/ngos/human_rights_watch_hrw_/"},"https://www.ngo-monitor.org/ngos/human_rights_watch_hrw_/")),o.a.createElement("p",null,"34) ",o.a.createElement("a",{href:"https://www.ngo-monitor.org/reports/breaking_its_own_rules_amnesty_s_gov_t_funding_and_researcher_bias/"},"https://www.ngo-monitor.org/reports/breaking_its_own_rules_amnesty_s_gov_t_funding_and_researcher_bias/")),o.a.createElement("p",null,"35) ",o.a.createElement("a",{href:"https://www.amnesty.org/en/about-us/how-were-run/finances-and-pay/"},"https://www.amnesty.org/en/about-us/how-were-run/finances-and-pay/")),o.a.createElement("p",null,"36) ",o.a.createElement("a",{href:"https://www.cia.gov/readingroom/docs/CIA-RDP91-00901R000600300001-1.pdf"},"https://www.cia.gov/readingroom/docs/CIA-RDP91-00901R000600300001-1.pdf"),"Opinion Commentary A Short Course In The Secret War page 1"),o.a.createElement("p",null,"37) Dov H. Levin 2019.\xa0\xa0 \u201cPartisan Electoral Interventions by the Great Powers: Introducing the PEIG Dataset\u201d\xa0Conflict Management and Peace Science, 36 (1): 88-106"),o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/tTBWfkE7BXU",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/-zIqCH00V4I",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/EuwmWnphqII",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/34LGPIXvU5M",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/xL3b_QmNV2Y",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),o.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/xgKPyIj8Q60",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}))}var st=Object(K.a)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}});function lt(e){var t=st(),a=Object(n.useState)(!1),r=Object(c.a)(a,2),i=r[0],u=r[1],h=Object(n.useState)(!1),d=Object(c.a)(h,2),p=d[0],m=d[1],f=Object(n.useState)({password:"",passwordtwo:"",email:"",tokenerror:"",error:"",open:!1,redirectToReferrer:!1}),g=Object(c.a)(f,2),y=g[0],v=g[1];function w(){return(w=Object(l.a)(s.a.mark(function t(){var a,n,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"POST",body:"",headers:{"Content-type":"application/json; charset=UTF-8"}},t.next=3,fetch("/groups/verifychangepasswordjwt/"+e.match.params.token+"/"+y.email,a).then(function(e){return e.json()}).catch(function(e){return console.error(e)});case 3:n=t.sent,console.log("response",n),n.message&&(v(Object(H.a)({},y,{tokenerror:n.message})),setTimeout(function(){v(Object(H.a)({},y,{tokenerror:""}))},5e3)),"can log in"==n&&(y.password!=y.passwordtwo&&v(Object(H.a)({},y,{passworderror:!0,tokenerror:!0})),y.password==y.passwordtwo&&(v(Object(H.a)({},y,{passworderror:!1,tokenerror:!0})),u(!0),o={email:y.email,password:y.password},ae(o).then(function(e){e.error?v(Object(H.a)({},y,{error:e.error})):v(Object(H.a)({},y,{error:"",open:!0}))}),u(!1),m(!0),setTimeout(function(){m(!1)},5e3)));case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}var b=function(e){return function(t){v(Object(H.a)({},y,Object(J.a)({},e,t.target.value)))}};return o.a.createElement("div",{className:"signinform"},o.a.createElement("div",{className:"innersigninform",style:{height:"auto"}},o.a.createElement("h4",{style:{textAlign:"center"}},"Reset Password"),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",null,"Email "),o.a.createElement("input",{style:{display:"inline"},id:"password",type:"text",label:"Email",className:t.textField,value:y.email,onChange:b("email"),margin:"normal"})),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",null,"Password "),o.a.createElement("input",{style:{display:"inline"},id:"password",type:"password",label:"Password",className:t.textField,value:y.password,onChange:b("password"),margin:"normal"})),o.a.createElement("div",{className:"signininput"},o.a.createElement("h5",null,"Confirm Password "),o.a.createElement("input",{style:{display:"inline"},id:"password",type:"password",label:"Password",className:t.textField,value:y.passwordtwo,onChange:b("passwordtwo"),margin:"normal"})),y.tokenerror&&o.a.createElement("h5",{style:{marginRight:"1vw",color:"red"},className:"ruletext"},y.tokenerror),!(y.password==y.passwordtwo)&&!(""==y.passwordtwo)&&o.a.createElement("h5",{style:{marginRight:"1vw",color:"red"},className:"ruletext"},"Passwords Do Not Match"),y.password==y.passwordtwo&&!(""==y.passwordtwo)&&!i&&o.a.createElement("button",{style:{marginLeft:"45%"},id:"submit",onClick:function(){return w.apply(this,arguments)}},"Submit"),i&&o.a.createElement("h3",null,"...Uploading Changes"),p&&o.a.createElement("h2",null,"Upload Complete, Password Updated")),o.a.createElement(X.a,{open:y.open,disableBackdropClick:!0},o.a.createElement(ee.a,null,"New Account"),o.a.createElement(Z.a,null,o.a.createElement(Q.a,null,"Password successfully changed.")),o.a.createElement($.a,null,o.a.createElement(U.b,{to:"/signin"},o.a.createElement("button",null,"Sign In")))))}t.a=function(){return o.a.createElement("div",null,o.a.createElement(Qe,null),o.a.createElement(r.d,null,o.a.createElement(r.b,{exact:!0,path:"/",component:G}),o.a.createElement(r.b,{exact:!0,path:"/signup",component:re}),o.a.createElement(r.b,{exact:!0,path:"/signin",component:se}),o.a.createElement(r.b,{exact:!0,path:"/forgotpassword/:token",component:lt}),o.a.createElement(r.b,{exact:!0,path:"/group/:groupId",component:Xe}),o.a.createElement(r.b,{exact:!0,path:"/explanation",component:et}),o.a.createElement(r.b,{exact:!0,path:"/singleuser/:userId",component:$e}),o.a.createElement(r.b,{exact:!0,path:"/info",component:tt}),o.a.createElement(r.b,{exact:!0,path:"/Psychological-War",component:it}),o.a.createElement(r.b,{exact:!0,path:"/psychological-war",component:it}),o.a.createElement(r.b,{exact:!0,path:"/Cuba",component:ot}),o.a.createElement(r.b,{exact:!0,path:"/cuba",component:ot}),o.a.createElement(r.b,{exact:!0,path:"/Soviet-Union",component:at}),o.a.createElement(r.b,{exact:!0,path:"/soviet-union",component:at}),o.a.createElement(r.b,{exact:!0,path:"/yugoslavia",component:rt}),o.a.createElement(r.b,{exact:!0,path:"/Yugoslavia",component:rt}),o.a.createElement(r.b,{exact:!0,path:"/china",component:nt}),o.a.createElement(r.b,{exact:!0,path:"/China",component:nt})))}},175:function(e,t,a){"use strict";(function(e){var n=a(0),o=a.n(n),r=a(118),i=a(11),s=a(178),l=(a(366),a(88));t.a=Object(s.hot)(e)(function(){return o.a.createElement(i.a,null,o.a.createElement(l.Notifications,null),o.a.createElement(r.a,null))})}).call(this,a(194)(e))},189:function(e,t,a){e.exports=a(376)},33:function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"g",function(){return o}),a.d(t,"b",function(){return r}),a.d(t,"f",function(){return i}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return c});var n="login_user",o="register_user",r="auth_user",i="logout_user",s="get_group_chat",l="get_chat",c="after_post_message"},357:function(e,t,a){e.exports=a.p+"static/media/hands.0cd2a94f.png"},362:function(e,t,a){e.exports=a.p+"static/media/housing-prices-Australia.96a4179f.png"},363:function(e,t,a){e.exports=a.p+"static/media/WageSlowdown.65f9eafa.jpg"},364:function(e,t,a){e.exports=a.p+"static/media/Australian-unemployment-rates.d5a8701e.png"},365:function(e,t,a){e.exports=a.p+"static/media/Trade-union-density-in-Australia-percentage-of-employees-1960-2011-a-a-Trade-union.e2c0dc8c.png"},366:function(e,t,a){},373:function(e,t,a){e.exports=a.p+"static/media/robots-txt.2b8002b7.config"},376:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),i=a.n(r),s=a(175);a(118),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(72),c=a(9),u=a(33),h=Object(l.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.g:return Object(c.a)({},e,{register:t.payload});case u.e:return Object(c.a)({},e,{loginSucces:t.payload});case u.b:return Object(c.a)({},e,{userData:t.payload});case u.f:return Object(c.a)({},e);default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.c:case u.d:return Object(c.a)({},e,{chats:t.payload});case u.a:return Object(c.a)({},e,{chats:e.chats.concat(t.payload)});default:return e}}}),d=a(91),p=a(179),m=a.n(p),f=a(180),g=Object(l.a)(m.a,f.a)(l.c);(0,a(371).generateRobotText)(),i.a.render(o.a.createElement(d.a,{store:g(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},o.a.createElement(s.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[189,1,2]]]);
//# sourceMappingURL=main.681414fc.chunk.js.map